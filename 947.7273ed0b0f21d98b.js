(self.webpackChunkbanned_book_korea=self.webpackChunkbanned_book_korea||[]).push([[947],{4947:(j,a,C)=>{"use strict";C.r(a),C.d(a,{ReferenceModule:()=>m});var t=C(4946),O=C(7668),F=C.t(O,2);C(8365),function U(){return typeof window>"u"}()||function I(h,l,_){h[l]=_}(F,"verbosity",O.VerbosityLevel.INFOS);let W=(()=>{class h{}return h.\u0275fac=function(_){return new(_||h)},h.\u0275mod=t.oAB({type:h}),h.\u0275inj=t.cJS({}),h})();var g=C(6814),x=C(6538),b=C(7411);function w(h,l){1&h&&t._UZ(0,"img",19)}function A(h,l){if(1&h){const _=t.EpF();t.TgZ(0,"img",20),t.NdJ("click",function(){t.CHM(_);const M=t.oxw();return t.KtG(M.openPage(M.currentPage-1))}),t.qZA()}}function S(h,l){1&h&&t._UZ(0,"img",21)}function n(h,l){if(1&h){const _=t.EpF();t.TgZ(0,"img",22),t.NdJ("click",function(){t.CHM(_);const M=t.oxw();return t.KtG(M.openPage(M.currentPage+1))}),t.qZA()}}const i=function(h){return{"background-image":h}},P=[{path:"",component:(()=>{class h{constructor(_,y){this.router=_,this.sharedService=y,this.page=0,this.pagesList=[{url:"url(assets/reference/00.png)",view:"cover",class:"full-page"},{url:"url(assets/reference/01.png)",view:"full",class:"full-page"},{url:"url(assets/reference/02.png)",view:"full",class:"full-page"},{url:"url(assets/reference/03.png)",view:"right",class:"right-page"},{url:"url(assets/reference/04.png)",view:"full",class:"full-page"},{url:"url(assets/reference/05.png)",view:"full",class:"full-page"},{url:"url(assets/reference/06.png)",view:"full",class:"full-page"},{url:"url(assets/reference/07.png)",view:"full",class:"full-page"},{url:"url(assets/reference/08.png)",view:"full",class:"full-page"},{url:"url(assets/reference/09.png)",view:"full",class:"full-page"},{url:"url(assets/reference/10.png)",view:"full",class:"full-page"},{url:"url(assets/reference/11.png)",view:"full",class:"full-page"},{url:"url(assets/reference/12.png)",view:"full",class:"full-page"},{url:"url(assets/reference/13.png)",view:"full",class:"full-page"},{url:"url(assets/reference/14.png)",view:"full",class:"full-page"},{url:"url(assets/reference/15.png)",view:"full",class:"full-page"},{url:"url(assets/reference/16.png)",view:"full",class:"full-page"},{url:"url(assets/reference/17.png)",view:"full",class:"full-page"},{url:"url(assets/reference/18.png)",view:"full",class:"full-page"},{url:"url('assets/reference/military reference.jpeg')",view:"single",class:"single-page"}],this.currentPage=0,this.totalPages=this.pagesList.length}ngOnInit(){}navToIntro(){this.sharedService.activeNav=1,this.router.navigateByUrl("/introduction")}openPage(_){this.currentPage=_}}return h.\u0275fac=function(_){return new(_||h)(t.Y36(x.F0),t.Y36(b.F))},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-reference"]],decls:26,vars:10,consts:[[1,"w-100","h-100","d-flex","flex-column","reference-view","px-md-5"],[1,"w-100","d-flex","justify-content-end","py-3","mb-2"],[1,"p-3","reference-title","dark-bg","light-grey-text","cursor-pointer",3,"click"],[1,"w-100","flex-1","overflow-auto","d-flex","justify-content-center","align-items-start","align-items-md-center","flex-wrap","flex-md-nowrap","mt-5","mt-md-0"],[1,"d-flex","justify-content-center","align-items-center","px-3","order-1"],["class","left-arrow cursor-not-allowed","src","/assets/icons/emptyPoly.svg",4,"ngIf"],["class","left-arrow cursor-pointer","src","/assets/icons/fillPoly.svg",3,"click",4,"ngIf"],[1,"d-none","d-md-block","page-holder","page-holder-lg","h-100","order-2"],[1,"bg-contain","book-page","h-100",3,"ngStyle"],[1,"d-block","d-md-none","page-holder","page-holder-sm","mt-2","order-2"],[1,"d-flex","justify-content-center","align-items-center","px-3","order-1","order-md-3"],["class","cursor-not-allowed","src","/assets/icons/emptyPoly.svg",4,"ngIf"],["class","cursor-pointer","src","/assets/icons/fillPoly.svg",3,"click",4,"ngIf"],[1,"d-block","d-md-none","w-100","py-4","my-4","fill-space","order-4"],[1,"w-100","py-4","reference-footer"],[1,"d-flex","fw-bold","align-items-center"],[1,"footer-title","no-wrap"],[1,"footer-subtitle","d-flex","flex-column"],[1,"h-50","no-wrap"],["src","/assets/icons/emptyPoly.svg",1,"left-arrow","cursor-not-allowed"],["src","/assets/icons/fillPoly.svg",1,"left-arrow","cursor-pointer",3,"click"],["src","/assets/icons/emptyPoly.svg",1,"cursor-not-allowed"],["src","/assets/icons/fillPoly.svg",1,"cursor-pointer",3,"click"]],template:function(_,y){1&_&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.NdJ("click",function(){return y.navToIntro()}),t._uU(3," \uc18c\uac1c INTRO "),t.qZA()(),t.TgZ(4,"div",3)(5,"div",4),t.YNc(6,w,1,0,"img",5),t.YNc(7,A,1,0,"img",6),t.qZA(),t.TgZ(8,"div",7),t._UZ(9,"div",8),t.qZA(),t.TgZ(10,"div",9),t._UZ(11,"div",8),t.qZA(),t.TgZ(12,"div",10),t.YNc(13,S,1,0,"img",11),t.YNc(14,n,1,0,"img",12),t.qZA(),t.TgZ(15,"div",13),t._uU(16," \xa0"),t.qZA()(),t.TgZ(17,"div",14)(18,"div",15)(19,"div",16),t._uU(20," \ucc38\uc870 "),t.qZA(),t.TgZ(21,"div",17)(22,"div",18),t._uU(23,"Refer-"),t.qZA(),t.TgZ(24,"div",18),t._uU(25,"ence"),t.qZA()()()()()),2&_&&(t.xp6(6),t.Q6J("ngIf",0==y.currentPage),t.xp6(1),t.Q6J("ngIf",0!=y.currentPage),t.xp6(2),t.Q6J("ngStyle",t.VKq(6,i,y.pagesList[y.currentPage].url)),t.xp6(2),t.Q6J("ngStyle",t.VKq(8,i,y.pagesList[y.currentPage].url)),t.xp6(2),t.Q6J("ngIf",y.currentPage==y.totalPages-1),t.xp6(1),t.Q6J("ngIf",y.currentPage<y.totalPages-1))},dependencies:[g.O5,g.PC],styles:[".reference-view[_ngcontent-%COMP%]{background-color:var(--white1)}.reference-title[_ngcontent-%COMP%]{font-size:min(1.5rem,4vw);line-height:1.3}.page-holder[_ngcontent-%COMP%]{aspect-ratio:3/2}.page-holder-sm[_ngcontent-%COMP%]{width:97.5vw}.page-holder-lg[_ngcontent-%COMP%]{max-width:72.5vw}.book-page[_ngcontent-%COMP%]{background-repeat:no-repeat}.bg-contain[_ngcontent-%COMP%]{background-size:contain;background-position:center center}.router-btn[_ngcontent-%COMP%]{height:2.5rem}.router-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:calc(1rem + 2vw)}.button-text[_ngcontent-%COMP%]{font-size:1.875rem}.next-text[_ngcontent-%COMP%]{color:var(--darkGray1)}[_ngcontent-%COMP%]::-webkit-scrollbar{width:.3125rem;height:.3125rem}[_ngcontent-%COMP%]::-webkit-scrollbar-track{box-shadow:inset 0 0 2px var(--lightGray6);-webkit-box-shadow:inset 0 0 2px var(--lightGray6)}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--lightGray3)}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:var(--lightGray2)}.left-arrow[_ngcontent-%COMP%]{transform:rotate(180deg)}.fill-space[_ngcontent-%COMP%]{min-width:75vw}"]}),h})()},{path:"**",redirectTo:""}];let f=(()=>{class h{}return h.\u0275fac=function(_){return new(_||h)},h.\u0275mod=t.oAB({type:h}),h.\u0275inj=t.cJS({imports:[x.Bz.forChild(P),x.Bz]}),h})(),m=(()=>{class h{}return h.\u0275fac=function(_){return new(_||h)},h.\u0275mod=t.oAB({type:h}),h.\u0275inj=t.cJS({imports:[g.ez,f,W]}),h})()},7668:function(module,__unused_webpack_exports,__webpack_require__){var _classStaticPrivateMethodGet=__webpack_require__(5764).default,_defineProperty=__webpack_require__(8416).default,_classPrivateMethodInitSpec=__webpack_require__(1860).default,_classPrivateMethodGet=__webpack_require__(4467).default,_classPrivateFieldInitSpec=__webpack_require__(9159).default,_classPrivateFieldSet=__webpack_require__(5661).default,_classPrivateFieldGet=__webpack_require__(468).default,_classStaticPrivateFieldSpecSet=__webpack_require__(9382).default,_classStaticPrivateFieldSpecGet=__webpack_require__(1280).default,_asyncToGenerator=__webpack_require__(7156).default,C;C=()=>(()=>{"use strict";var __webpack_modules__=[,(j,a,C)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.VerbosityLevel=a.Util=a.UnknownErrorException=a.UnexpectedResponseException=a.UNSUPPORTED_FEATURES=a.TextRenderingMode=a.StreamType=a.RenderingIntentFlag=a.PermissionFlag=a.PasswordResponses=a.PasswordException=a.PageActionEventType=a.OPS=a.MissingPDFException=a.InvalidPDFException=a.ImageKind=a.IDENTITY_MATRIX=a.FormatError=a.FontType=a.FeatureTest=a.FONT_IDENTITY_MATRIX=a.DocumentActionEventType=a.CMapCompressionType=a.BaseException=a.AnnotationType=a.AnnotationStateModelType=a.AnnotationReviewState=a.AnnotationReplyType=a.AnnotationMode=a.AnnotationMarkedState=a.AnnotationFlag=a.AnnotationFieldFlag=a.AnnotationBorderStyleType=a.AnnotationActionEventType=a.AbortException=void 0,a.arrayByteLength=B,a.arraysToBytes=function Y(z){const D=z.length;if(1===D&&z[0]instanceof Uint8Array)return z[0];let V=0;for(let Te=0;Te<D;Te++)V+=B(z[Te]);let ie=0;const ve=new Uint8Array(V);for(let Te=0;Te<D;Te++){let re=z[Te];re instanceof Uint8Array||(re="string"==typeof re?X(re):new Uint8Array(re));const ce=re.byteLength;ve.set(re,ie),ie+=ce}return ve},a.assert=function J(z,D){z||Q(D)},a.bytesToString=function L(z){("object"!=typeof z||null===z||void 0===z.length)&&Q("Invalid argument for bytesToString");const D=z.length,V=8192;if(D<V)return String.fromCharCode.apply(null,z);const ie=[];for(let ve=0;ve<D;ve+=V){const Te=Math.min(ve+V,D),re=z.subarray(ve,Te);ie.push(String.fromCharCode.apply(null,re))}return ie.join("")},a.createPromiseCapability=function ge(){const z=Object.create(null);let D=!1;return Object.defineProperty(z,"settled",{get:()=>D}),z.promise=new Promise(function(V,ie){z.resolve=function(ve){D=!0,V(ve)},z.reject=function(ve){D=!0,ie(ve)}}),z},a.createValidAbsoluteUrl=function he(z,D=null,V=null){if(!z)return null;try{if(V&&"string"==typeof z){if(V.addDefaultProtocol&&z.startsWith("www.")){const ve=z.match(/\./g);ve&&ve.length>=2&&(z=`http://${z}`)}if(V.tryConvertEncoding)try{z=be(z)}catch{}}const ie=D?new URL(z,D):new URL(z);if(function te(z){if(!z)return!1;switch(z.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(ie))return ie}catch{}return null},a.escapeString=function pe(z){return z.replace(/([()\\\n\r])/g,D=>"\n"===D?"\\n":"\r"===D?"\\r":`\\${D}`)},a.getModificationDate=function le(z=new Date){return[z.getUTCFullYear().toString(),(z.getUTCMonth()+1).toString().padStart(2,"0"),z.getUTCDate().toString().padStart(2,"0"),z.getUTCHours().toString().padStart(2,"0"),z.getUTCMinutes().toString().padStart(2,"0"),z.getUTCSeconds().toString().padStart(2,"0")].join("")},a.getVerbosityLevel=function y(){return l},a.info=function M(z){l>=u.INFOS&&console.log(`Info: ${z}`)},a.isArrayBuffer=function T(z){return"object"==typeof z&&null!==z&&void 0!==z.byteLength},a.isArrayEqual=function K(z,D){if(z.length!==D.length)return!1;for(let V=0,ie=z.length;V<ie;V++)if(z[V]!==D[V])return!1;return!0},a.isAscii=function se(z){return/^[\x00-\x7F]*$/.test(z)},a.objectFromMap=function ee(z){const D=Object.create(null);for(const[V,ie]of z)D[V]=ie;return D},a.objectSize=function Z(z){return Object.keys(z).length},a.setVerbosityLevel=function _(z){Number.isInteger(z)&&(l=z)},a.shadow=oe,a.string32=function $(z){return String.fromCharCode(z>>24&255,z>>16&255,z>>8&255,255&z)},a.stringToBytes=X,a.stringToPDFString=function Ce(z){if(z[0]>="\xef"){let V;if("\xfe"===z[0]&&"\xff"===z[1]?V="utf-16be":"\xff"===z[0]&&"\xfe"===z[1]?V="utf-16le":"\xef"===z[0]&&"\xbb"===z[1]&&"\xbf"===z[2]&&(V="utf-8"),V)try{const ie=new TextDecoder(V,{fatal:!0}),ve=X(z);return ie.decode(ve)}catch(ie){q(`stringToPDFString: "${ie}".`)}}const D=[];for(let V=0,ie=z.length;V<ie;V++){const ve=we[z.charCodeAt(V)];D.push(ve?String.fromCharCode(ve):z.charAt(V))}return D.join("")},a.stringToUTF16BEString=function de(z){const D=["\xfe\xff"];for(let V=0,ie=z.length;V<ie;V++){const ve=z.charCodeAt(V);D.push(String.fromCharCode(ve>>8&255),String.fromCharCode(255&ve))}return D.join("")},a.stringToUTF8String=be,a.unreachable=Q,a.utf8StringToString=function ne(z){return unescape(encodeURIComponent(z))},a.warn=q,C(2),a.IDENTITY_MATRIX=[1,0,0,1,0,0],a.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],a.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},a.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},a.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},a.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},a.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},a.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},a.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},a.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},a.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},a.AnnotationReplyType={GROUP:"Group",REPLY:"R"},a.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},a.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},a.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},a.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},a.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},a.PageActionEventType={O:"PageOpen",C:"PageClose"},a.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},a.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const u={ERRORS:0,WARNINGS:1,INFOS:5};a.VerbosityLevel=u,a.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},a.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},a.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},a.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let l=u.WARNINGS;function q(z){l>=u.WARNINGS&&console.log(`Warning: ${z}`)}function Q(z){throw new Error(z)}function oe(z,D,V){return Object.defineProperty(z,D,{value:V,enumerable:!0,configurable:!0,writable:!1}),V}const R=function(){function D(V,ie){this.constructor===D&&Q("Cannot initialize BaseException."),this.message=V,this.name=ie}return D.prototype=new Error,D.constructor=D,D}();function X(z){"string"!=typeof z&&Q("Invalid argument for stringToBytes");const D=z.length,V=new Uint8Array(D);for(let ie=0;ie<D;++ie)V[ie]=255&z.charCodeAt(ie);return V}function B(z){return void 0!==z.length?z.length:void 0!==z.byteLength?z.byteLength:void Q("Invalid argument for arrayByteLength")}a.BaseException=R,a.PasswordException=class s extends R{constructor(D,V){super(D,"PasswordException"),this.code=V}},a.UnknownErrorException=class e extends R{constructor(D,V){super(D,"UnknownErrorException"),this.details=V}},a.InvalidPDFException=class r extends R{constructor(D){super(D,"InvalidPDFException")}},a.MissingPDFException=class o extends R{constructor(D){super(D,"MissingPDFException")}},a.UnexpectedResponseException=class d extends R{constructor(D,V){super(D,"UnexpectedResponseException"),this.status=V}},a.FormatError=class p extends R{constructor(D){super(D,"FormatError")}},a.AbortException=class c extends R{constructor(D){super(D,"AbortException")}},a.FeatureTest=class Ae{static get isLittleEndian(){return oe(this,"isLittleEndian",function ue(){const z=new Uint8Array(4);return z[0]=1,1===new Uint32Array(z.buffer,0,1)[0]}())}static get isEvalSupported(){return oe(this,"isEvalSupported",function _e(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return oe(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}};const me=[...Array(256).keys()].map(z=>z.toString(16).padStart(2,"0"));class ae{static makeHexColor(D,V,ie){return`#${me[D]}${me[V]}${me[ie]}`}static scaleMinMax(D,V){let ie;D[0]?(D[0]<0&&(ie=V[0],V[0]=V[1],V[1]=ie),V[0]*=D[0],V[1]*=D[0],D[3]<0&&(ie=V[2],V[2]=V[3],V[3]=ie),V[2]*=D[3],V[3]*=D[3]):(ie=V[0],V[0]=V[2],V[2]=ie,ie=V[1],V[1]=V[3],V[3]=ie,D[1]<0&&(ie=V[2],V[2]=V[3],V[3]=ie),V[2]*=D[1],V[3]*=D[1],D[2]<0&&(ie=V[0],V[0]=V[1],V[1]=ie),V[0]*=D[2],V[1]*=D[2]),V[0]+=D[4],V[1]+=D[4],V[2]+=D[5],V[3]+=D[5]}static transform(D,V){return[D[0]*V[0]+D[2]*V[1],D[1]*V[0]+D[3]*V[1],D[0]*V[2]+D[2]*V[3],D[1]*V[2]+D[3]*V[3],D[0]*V[4]+D[2]*V[5]+D[4],D[1]*V[4]+D[3]*V[5]+D[5]]}static applyTransform(D,V){return[D[0]*V[0]+D[1]*V[2]+V[4],D[0]*V[1]+D[1]*V[3]+V[5]]}static applyInverseTransform(D,V){const ie=V[0]*V[3]-V[1]*V[2];return[(D[0]*V[3]-D[1]*V[2]+V[2]*V[5]-V[4]*V[3])/ie,(-D[0]*V[1]+D[1]*V[0]+V[4]*V[1]-V[5]*V[0])/ie]}static getAxialAlignedBoundingBox(D,V){const ie=ae.applyTransform(D,V),ve=ae.applyTransform(D.slice(2,4),V),Te=ae.applyTransform([D[0],D[3]],V),re=ae.applyTransform([D[2],D[1]],V);return[Math.min(ie[0],ve[0],Te[0],re[0]),Math.min(ie[1],ve[1],Te[1],re[1]),Math.max(ie[0],ve[0],Te[0],re[0]),Math.max(ie[1],ve[1],Te[1],re[1])]}static inverseTransform(D){const V=D[0]*D[3]-D[1]*D[2];return[D[3]/V,-D[1]/V,-D[2]/V,D[0]/V,(D[2]*D[5]-D[4]*D[3])/V,(D[4]*D[1]-D[5]*D[0])/V]}static apply3dTransform(D,V){return[D[0]*V[0]+D[1]*V[1]+D[2]*V[2],D[3]*V[0]+D[4]*V[1]+D[5]*V[2],D[6]*V[0]+D[7]*V[1]+D[8]*V[2]]}static singularValueDecompose2dScale(D){const V=[D[0],D[2],D[1],D[3]],ie=D[0]*V[0]+D[1]*V[2],re=D[2]*V[1]+D[3]*V[3],ce=(ie+re)/2,Se=Math.sqrt((ie+re)**2-4*(ie*re-(D[2]*V[0]+D[3]*V[2])*(D[0]*V[1]+D[1]*V[3])))/2,fe=ce-Se||1;return[Math.sqrt(ce+Se||1),Math.sqrt(fe)]}static normalizeRect(D){const V=D.slice(0);return D[0]>D[2]&&(V[0]=D[2],V[2]=D[0]),D[1]>D[3]&&(V[1]=D[3],V[3]=D[1]),V}static intersect(D,V){const ie=Math.max(Math.min(D[0],D[2]),Math.min(V[0],V[2])),ve=Math.min(Math.max(D[0],D[2]),Math.max(V[0],V[2]));if(ie>ve)return null;const Te=Math.max(Math.min(D[1],D[3]),Math.min(V[1],V[3])),re=Math.min(Math.max(D[1],D[3]),Math.max(V[1],V[3]));return Te>re?null:[ie,Te,ve,re]}static bezierBoundingBox(D,V,ie,ve,Te,re,ce,Se){const Pe=[],fe=[[],[]];let xe,ye,Ee,ke,Me,Le,Ne,Re;for(let Ie=0;Ie<2;++Ie)if(0===Ie?(ye=6*D-12*ie+6*Te,xe=-3*D+9*ie-9*Te+3*ce,Ee=3*ie-3*D):(ye=6*V-12*ve+6*re,xe=-3*V+9*ve-9*re+3*Se,Ee=3*ve-3*V),Math.abs(xe)<1e-12){if(Math.abs(ye)<1e-12)continue;ke=-Ee/ye,0<ke&&ke<1&&Pe.push(ke)}else Ne=ye*ye-4*Ee*xe,Re=Math.sqrt(Ne),!(Ne<0)&&(Me=(-ye+Re)/(2*xe),0<Me&&Me<1&&Pe.push(Me),Le=(-ye-Re)/(2*xe),0<Le&&Le<1&&Pe.push(Le));let Fe,De=Pe.length;const Oe=De;for(;De--;)ke=Pe[De],Fe=1-ke,fe[0][De]=Fe*Fe*Fe*D+3*Fe*Fe*ke*ie+3*Fe*ke*ke*Te+ke*ke*ke*ce,fe[1][De]=Fe*Fe*Fe*V+3*Fe*Fe*ke*ve+3*Fe*ke*ke*re+ke*ke*ke*Se;return fe[0][Oe]=D,fe[1][Oe]=V,fe[0][Oe+1]=ce,fe[1][Oe+1]=Se,fe[0].length=fe[1].length=Oe+2,[Math.min(...fe[0]),Math.min(...fe[1]),Math.max(...fe[0]),Math.max(...fe[1])]}}a.Util=ae;const we=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function be(z){return decodeURIComponent(escape(z))}},(j,a,C)=>{C(3)},(j,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.isNodeJS=void 0;const C=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);a.isNodeJS=C},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(5),_font_loader=__w_pdfjs_require__(7),_annotation_storage=__w_pdfjs_require__(8),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(13),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(14),_metadata=__w_pdfjs_require__(15),_optional_content_config=__w_pdfjs_require__(16),_transport_stream=__w_pdfjs_require__(17),_xfa_text=__w_pdfjs_require__(18);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:j,NodeCMapReaderFactory:a,NodeStandardFontDataFactory:C}=__w_pdfjs_require__(19);exports.DefaultCanvasFactory=DefaultCanvasFactory=j,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=a,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=C}function setPDFNetworkStreamFactory(j){createPDFNetworkStream=j}function getDocument(j){const a=new PDFDocumentLoadingTask;let C;if("string"==typeof j||j instanceof URL)C={url:j};else if((0,_util.isArrayBuffer)(j))C={data:j};else if(j instanceof PDFDataRangeTransport)C={range:j};else{if("object"!=typeof j)throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!j.url&&!j.data&&!j.range)throw new Error("Invalid parameter object: need either .data, .range or .url");C=j}const t=Object.create(null);let O=null,F=null;for(const k in C){const E=C[k];switch(k){case"url":if(typeof window<"u")try{t[k]=new URL(E,window.location).href;continue}catch(v){(0,_util.warn)(`Cannot create valid URL: "${v}".`)}else if("string"==typeof E||E instanceof URL){t[k]=E.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":O=E;continue;case"worker":F=E;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&E instanceof Buffer)t[k]=new Uint8Array(E);else{if(E instanceof Uint8Array)break;if("string"==typeof E)t[k]=(0,_util.stringToBytes)(E);else if("object"!=typeof E||null===E||isNaN(E.length)){if(!(0,_util.isArrayBuffer)(E))throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.");t[k]=new Uint8Array(E)}else t[k]=new Uint8Array(E)}continue}t[k]=E}if(t.CMapReaderFactory=t.CMapReaderFactory||DefaultCMapReaderFactory,t.StandardFontDataFactory=t.StandardFontDataFactory||DefaultStandardFontDataFactory,t.ignoreErrors=!0!==t.stopAtErrors,t.fontExtraProperties=!0===t.fontExtraProperties,t.pdfBug=!0===t.pdfBug,t.enableXfa=!0===t.enableXfa,(!Number.isInteger(t.rangeChunkSize)||t.rangeChunkSize<1)&&(t.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),("string"!=typeof t.docBaseUrl||(0,_display_utils.isDataScheme)(t.docBaseUrl))&&(t.docBaseUrl=null),(!Number.isInteger(t.maxImageSize)||t.maxImageSize<-1)&&(t.maxImageSize=-1),"string"!=typeof t.cMapUrl&&(t.cMapUrl=null),"string"!=typeof t.standardFontDataUrl&&(t.standardFontDataUrl=null),"boolean"!=typeof t.useWorkerFetch&&(t.useWorkerFetch=t.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&t.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),"boolean"!=typeof t.isEvalSupported&&(t.isEvalSupported=!0),"boolean"!=typeof t.disableFontFace&&(t.disableFontFace=_is_node.isNodeJS),"boolean"!=typeof t.useSystemFonts&&(t.useSystemFonts=!_is_node.isNodeJS&&!t.disableFontFace),("object"!=typeof t.ownerDocument||null===t.ownerDocument)&&(t.ownerDocument=globalThis.document),"boolean"!=typeof t.disableRange&&(t.disableRange=!1),"boolean"!=typeof t.disableStream&&(t.disableStream=!1),"boolean"!=typeof t.disableAutoFetch&&(t.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(t.verbosity),!F){const k={verbosity:t.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};F=k.port?_PDFWorker.fromPort(k):new _PDFWorker(k),a._worker=F}const H=a.docId;return F.promise.then(function(){if(a.destroyed)throw new Error("Loading aborted");const k=_fetchDocument(F,t,O,H),E=new Promise(function(v){let I;O?I=new _transport_stream.PDFDataTransportStream({length:t.length,initialData:t.initialData,progressiveDone:t.progressiveDone,contentDispositionFilename:t.contentDispositionFilename,disableRange:t.disableRange,disableStream:t.disableStream},O):t.data||(I=createPDFNetworkStream({url:t.url,length:t.length,httpHeaders:t.httpHeaders,withCredentials:t.withCredentials,rangeChunkSize:t.rangeChunkSize,disableRange:t.disableRange,disableStream:t.disableStream})),v(I)});return Promise.all([k,E]).then(function([v,I]){if(a.destroyed)throw new Error("Loading aborted");const U=new _message_handler.MessageHandler(H,v,F.port),G=new WorkerTransport(U,a,I,t);a._transport=G,U.send("Ready",null)})}).catch(a._capability.reject),a}function _fetchDocument(j,a,C,t){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(function*(j,a,C,t){if(j.destroyed)throw new Error("Worker was destroyed");C&&(a.length=C.length,a.initialData=C.initialData,a.progressiveDone=C.progressiveDone,a.contentDispositionFilename=C.contentDispositionFilename);const O=yield j.messageHandler.sendWithPromise("GetDocRequest",{docId:t,apiVersion:"2.14.305",source:{data:a.data,url:a.url,password:a.password,disableAutoFetch:a.disableAutoFetch,rangeChunkSize:a.rangeChunkSize,length:a.length},maxImageSize:a.maxImageSize,disableFontFace:a.disableFontFace,docBaseUrl:a.docBaseUrl,ignoreErrors:a.ignoreErrors,isEvalSupported:a.isEvalSupported,fontExtraProperties:a.fontExtraProperties,enableXfa:a.enableXfa,useSystemFonts:a.useSystemFonts,cMapUrl:a.useWorkerFetch?a.cMapUrl:null,standardFontDataUrl:a.useWorkerFetch?a.standardFontDataUrl:null});if(j.destroyed)throw new Error("Worker was destroyed");return O})).apply(this,arguments)}class PDFDocumentLoadingTask{constructor(){var a,C;this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${_classStaticPrivateFieldSpecSet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId,(a=_classStaticPrivateFieldSpecGet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId),C=a++,a)),C}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){var a=this;return _asyncToGenerator(function*(){a.destroyed=!0,yield a._transport?.destroy(),a._transport=null,a._worker&&(a._worker.destroy(),a._worker=null)})()}}var _docId={writable:!0,value:0};exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(a,C,t=!1,O=null){this.length=a,this.initialData=C,this.progressiveDone=t,this.contentDispositionFilename=O,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(a){this._rangeListeners.push(a)}addProgressListener(a){this._progressListeners.push(a)}addProgressiveReadListener(a){this._progressiveReadListeners.push(a)}addProgressiveDoneListener(a){this._progressiveDoneListeners.push(a)}onDataRange(a,C){for(const t of this._rangeListeners)t(a,C)}onDataProgress(a,C){this._readyCapability.promise.then(()=>{for(const t of this._progressListeners)t(a,C)})}onDataProgressiveRead(a){this._readyCapability.promise.then(()=>{for(const C of this._progressiveReadListeners)C(a)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const a of this._progressiveDoneListeners)a()})}transportReady(){this._readyCapability.resolve()}requestDataRange(a,C){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(a,C){var O,t=this;this._pdfInfo=a,this._transport=C,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:(O=_asyncToGenerator(function*(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),t.stats||{streamTypes:{},fontTypes:{}}}),function(){return O.apply(this,arguments)})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(a){return this._transport.getPage(a)}getPageIndex(a){return this._transport.getPageIndex(a)}getDestinations(){return this._transport.getDestinations()}getDestination(a){return this._transport.getDestination(a)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(a=!1){return this._transport.startCleanup(a||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(a,C,t,O,F=!1){this._pageIndex=a,this._pageInfo=C,this._ownerDocument=O,this._transport=t,this._stats=F?new _display_utils.StatTimer:null,this._pdfBug=F,this.commonObjs=t.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:a,rotation:C=this.rotate,offsetX:t=0,offsetY:O=0,dontFlip:F=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:a,rotation:C,offsetX:t,offsetY:O,dontFlip:F})}getAnnotations({intent:a="display"}={}){const C=this._transport.getRenderingIntent(a);let t=this._annotationPromises.get(C.cacheKey);return t||(t=this._transport.getAnnotations(this._pageIndex,C.renderingIntent),this._annotationPromises.set(C.cacheKey,t),t=t.then(O=>{for(const F of O)void 0!==F.titleObj&&Object.defineProperty(F,"title",{get:()=>((0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),F.titleObj.str)}),void 0!==F.contentsObj&&Object.defineProperty(F,"contents",{get:()=>((0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),F.contentsObj.str)});return O})),t}getJSActions(){return this._jsActionsPromise||=this._transport.getPageJSActions(this._pageIndex)}getXfa(){var a=this;return _asyncToGenerator(function*(){return a._transport._htmlForXfa?.children[a._pageIndex]||null})()}render({canvasContext:a,viewport:C,intent:t="display",annotationMode:O=_util.AnnotationMode.ENABLE,transform:F=null,imageLayer:H=null,canvasFactory:k=null,background:E=null,optionalContentConfigPromise:v=null,annotationCanvasMap:I=null,pageColors:U=null}){void 0!==arguments[0]?.renderInteractiveForms&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),!0===arguments[0].renderInteractiveForms&&O===_util.AnnotationMode.ENABLE&&(O=_util.AnnotationMode.ENABLE_FORMS)),void 0!==arguments[0]?.includeAnnotationStorage&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),!0===arguments[0].includeAnnotationStorage&&O===_util.AnnotationMode.ENABLE&&(O=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const G=this._transport.getRenderingIntent(t,O);this.pendingCleanup=!1,v||(v=this._transport.getOptionalContentConfig());let N=this._intentStates.get(G.cacheKey);N||(N=Object.create(null),this._intentStates.set(G.cacheKey,N)),N.streamReaderCancelTimeout&&(clearTimeout(N.streamReaderCancelTimeout),N.streamReaderCancelTimeout=null);const W=k||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),g=!!(G.renderingIntent&_util.RenderingIntentFlag.PRINT);N.displayReadyCapability||(N.displayReadyCapability=(0,_util.createPromiseCapability)(),N.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(G));const x=A=>{N.renderTasks.delete(b),(this.cleanupAfterRender||g)&&(this.pendingCleanup=!0),this._tryCleanup(),A?(b.capability.reject(A),this._abortOperatorList({intentState:N,reason:A instanceof Error?A:new Error(A)})):b.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},b=new InternalRenderTask({callback:x,params:{canvasContext:a,viewport:C,transform:F,imageLayer:H,background:E},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:I,operatorList:N.operatorList,pageIndex:this._pageIndex,canvasFactory:W,useRequestAnimationFrame:!g,pdfBug:this._pdfBug,pageColors:U});(N.renderTasks||=new Set).add(b);const w=b.task;return Promise.all([N.displayReadyCapability.promise,v]).then(([A,S])=>{this.pendingCleanup?x():(this._stats&&this._stats.time("Rendering"),b.initializeGraphics({transparency:A,optionalContentConfig:S}),b.operatorListChanged())}).catch(x),w}getOperatorList({intent:a="display",annotationMode:C=_util.AnnotationMode.ENABLE}={}){const O=this._transport.getRenderingIntent(a,C,!0);let H,F=this._intentStates.get(O.cacheKey);return F||(F=Object.create(null),this._intentStates.set(O.cacheKey,F)),F.opListReadCapability||(H=Object.create(null),H.operatorListChanged=function t(){F.operatorList.lastChunk&&(F.opListReadCapability.resolve(F.operatorList),F.renderTasks.delete(H))},F.opListReadCapability=(0,_util.createPromiseCapability)(),(F.renderTasks||=new Set).add(H),F.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(O)),F.opListReadCapability.promise}streamTextContent({disableCombineTextItems:a=!1,includeMarkedContent:C=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==a,includeMarkedContent:!0===C},{highWaterMark:100,size:O=>O.items.length})}getTextContent(a={}){if(this._transport._htmlForXfa)return this.getXfa().then(t=>_xfa_text.XfaText.textContent(t));const C=this.streamTextContent(a);return new Promise(function(t,O){const H=C.getReader(),k={items:[],styles:Object.create(null)};!function F(){H.read().then(function({value:E,done:v}){v?t(k):(Object.assign(k.styles,E.styles),k.items.push(...E.items),F())},O)}()})}getStructTree(){return this._structTreePromise||=this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const a=[];for(const C of this._intentStates.values())if(this._abortOperatorList({intentState:C,reason:new Error("Page was destroyed."),force:!0}),!C.opListReadCapability)for(const t of C.renderTasks)a.push(t.completed),t.cancel();this.objs.clear();for(const C of this._bitmaps)C.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(a)}cleanup(a=!1){return this.pendingCleanup=!0,this._tryCleanup(a)}_tryCleanup(a=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:C,operatorList:t}of this._intentStates.values())if(C.size>0||!t.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,a&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const C of this._bitmaps)C.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(a,C){const t=this._intentStates.get(C);t&&(this._stats&&this._stats.timeEnd("Page Request"),t.displayReadyCapability&&t.displayReadyCapability.resolve(a))}_renderPageChunk(a,C){for(let t=0,O=a.length;t<O;t++)C.operatorList.fnArray.push(a.fnArray[t]),C.operatorList.argsArray.push(a.argsArray[t]);C.operatorList.lastChunk=a.lastChunk;for(const t of C.renderTasks)t.operatorListChanged();a.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:a,cacheKey:C}){const O=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:a,cacheKey:C,annotationStorage:a&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}).getReader(),F=this._intentStates.get(C);F.streamReader=O;const H=()=>{O.read().then(({value:k,done:E})=>{E?F.streamReader=null:this._transport.destroyed||(this._renderPageChunk(k,F),H())},k=>{if(F.streamReader=null,!this._transport.destroyed){if(F.operatorList){F.operatorList.lastChunk=!0;for(const E of F.renderTasks)E.operatorListChanged();this._tryCleanup()}if(F.displayReadyCapability)F.displayReadyCapability.reject(k);else{if(!F.opListReadCapability)throw k;F.opListReadCapability.reject(k)}}})};H()}_abortOperatorList({intentState:a,reason:C,force:t=!1}){if(a.streamReader){if(!t){if(a.renderTasks.size>0)return;if(C instanceof _display_utils.RenderingCancelledException)return void(a.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:a,reason:C,force:!0}),a.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT))}if(a.streamReader.cancel(new _util.AbortException(C.message)).catch(()=>{}),a.streamReader=null,!this._transport.destroyed){for(const[O,F]of this._intentStates)if(F===a){this._intentStates.delete(O);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(a,C){const t={data:structuredClone(a,C)};this._deferred.then(()=>{for(const O of this._listeners)O.call(this,t)})}addEventListener(a,C){this._listeners.push(C)}removeEventListener(a,C){const t=this._listeners.indexOf(C);this._listeners.splice(t,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){const j=document?.currentScript?.src;j&&(PDFWorkerUtil.fallbackWorkerSrc=j.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(j,a){let C;try{if(C=new URL(j),!C.origin||"null"===C.origin)return!1}catch{return!1}const t=new URL(a,C);return C.origin===t.origin},PDFWorkerUtil.createCDNWrapper=function(j){return URL.createObjectURL(new Blob([`importScripts("${j}");`]))};class _PDFWorker{constructor({name:j=null,port:a=null,verbosity:C=(0,_util.getVerbosityLevel)()}={}){if(a&&_classStaticPrivateFieldSpecGet(_PDFWorker,_PDFWorker,_workerPorts).has(a))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=j,this.destroyed=!1,this.verbosity=C,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,a)return _classStaticPrivateFieldSpecGet(_PDFWorker,_PDFWorker,_workerPorts).set(a,this),void this._initializeFromPort(a);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(j){this._port=j,this._messageHandler=new _message_handler.MessageHandler("main","worker",j),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(typeof Worker<"u"&&!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let j=_PDFWorker.workerSrc;try{PDFWorkerUtil.isSameOrigin(window.location.href,j)||(j=PDFWorkerUtil.createCDNWrapper(new URL(j,window.location).href));const a=new Worker(j),C=new _message_handler.MessageHandler("main","worker",a),t=()=>{a.removeEventListener("error",O),C.destroy(),a.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},O=()=>{this._webWorker||t()};a.addEventListener("error",O),C.on("test",H=>{a.removeEventListener("error",O),this.destroyed?t():H?(this._messageHandler=C,this._port=a,this._webWorker=a,this._readyCapability.resolve(),C.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),C.destroy(),a.terminate())}),C.on("ready",H=>{if(a.removeEventListener("error",O),this.destroyed)t();else try{F()}catch{this._setupFakeWorker()}});const F=()=>{const H=new Uint8Array;C.send("test",H,[H.buffer])};return void F()}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(j=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const a=new LoopbackPort;this._port=a;const C="fake"+PDFWorkerUtil.fakeWorkerId++,t=new _message_handler.MessageHandler(C+"_worker",C,a);j.setup(t,a);const O=new _message_handler.MessageHandler(C,C+"_worker",a);this._messageHandler=O,this._readyCapability.resolve(),O.send("configure",{verbosity:this.verbosity})}).catch(j=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${j.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),_classStaticPrivateFieldSpecGet(_PDFWorker,_PDFWorker,_workerPorts).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(j){if(!j?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return _classStaticPrivateFieldSpecGet(this,_PDFWorker,_workerPorts).has(j.port)?_classStaticPrivateFieldSpecGet(this,_PDFWorker,_workerPorts).get(j.port):new _PDFWorker(j)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){var _this4=this;const loader=function(){var _ref2=_asyncToGenerator(function*(){const mainWorkerMessageHandler=_this4._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(_this4.workerSrc);return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(_this4.workerSrc),window.pdfjsWorker.WorkerMessageHandler});return function j(){return _ref2.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}var _workerPorts={writable:!0,value:new WeakMap};exports.PDFWorker=_PDFWorker,_PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};var _docStats=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_metadataPromise=new WeakMap;class WorkerTransport{constructor(a,C,t,O){_classPrivateFieldInitSpec(this,_docStats,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_pageCache,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_pagePromises,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_metadataPromise,{writable:!0,value:null}),this.messageHandler=a,this.loadingTask=C,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:C.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:O.ownerDocument,styleElement:O.styleElement}),this._params=O,O.useWorkerFetch||(this.CMapReaderFactory=new O.CMapReaderFactory({baseUrl:O.cMapUrl,isCompressed:O.cMapPacked}),this.StandardFontDataFactory=new O.StandardFontDataFactory({baseUrl:O.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=t,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return _classPrivateFieldGet(this,_docStats)}getRenderingIntent(a,C=_util.AnnotationMode.ENABLE,t=!1){let O=_util.RenderingIntentFlag.DISPLAY,F="";switch(a){case"any":O=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":O=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${a}`)}switch(C){case _util.AnnotationMode.DISABLE:O+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:O+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:O+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,F=this.annotationStorage.hash;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${C}`)}return t&&(O+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:O,cacheKey:`${O}_${F}`}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const a=[];for(const t of _classPrivateFieldGet(this,_pageCache).values())a.push(t._destroy());_classPrivateFieldGet(this,_pageCache).clear(),_classPrivateFieldGet(this,_pagePromises).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const C=this.messageHandler.sendWithPromise("Terminate",null);return a.push(C),Promise.all(a).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),_classPrivateFieldSet(this,_metadataPromise,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:a,loadingTask:C}=this;a.on("GetReader",(t,O)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=F=>{this._lastProgress={loaded:F.loaded,total:F.total}},O.onPull=()=>{this._fullReader.read().then(function({value:F,done:H}){H?O.close():((0,_util.assert)((0,_util.isArrayBuffer)(F),"GetReader - expected an ArrayBuffer."),O.enqueue(new Uint8Array(F),1,[F]))}).catch(F=>{O.error(F)})},O.onCancel=F=>{this._fullReader.cancel(F),O.ready.catch(H=>{if(!this.destroyed)throw H})}}),a.on("ReaderHeadersReady",t=>{const O=(0,_util.createPromiseCapability)(),F=this._fullReader;return F.headersReady.then(()=>{(!F.isStreamingSupported||!F.isRangeSupported)&&(this._lastProgress&&C.onProgress?.(this._lastProgress),F.onProgress=H=>{C.onProgress?.({loaded:H.loaded,total:H.total})}),O.resolve({isStreamingSupported:F.isStreamingSupported,isRangeSupported:F.isRangeSupported,contentLength:F.contentLength})},O.reject),O.promise}),a.on("GetRangeReader",(t,O)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const F=this._networkStream.getRangeReader(t.begin,t.end);F?(O.onPull=()=>{F.read().then(function({value:H,done:k}){k?O.close():((0,_util.assert)((0,_util.isArrayBuffer)(H),"GetRangeReader - expected an ArrayBuffer."),O.enqueue(new Uint8Array(H),1,[H]))}).catch(H=>{O.error(H)})},O.onCancel=H=>{F.cancel(H),O.ready.catch(k=>{if(!this.destroyed)throw k})}):O.close()}),a.on("GetDoc",({pdfInfo:t})=>{this._numPages=t.numPages,this._htmlForXfa=t.htmlForXfa,delete t.htmlForXfa,C._capability.resolve(new PDFDocumentProxy(t,this))}),a.on("DocException",function(t){let O;switch(t.name){case"PasswordException":O=new _util.PasswordException(t.message,t.code);break;case"InvalidPDFException":O=new _util.InvalidPDFException(t.message);break;case"MissingPDFException":O=new _util.MissingPDFException(t.message);break;case"UnexpectedResponseException":O=new _util.UnexpectedResponseException(t.message,t.status);break;case"UnknownErrorException":O=new _util.UnknownErrorException(t.message,t.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}C._capability.reject(O)}),a.on("PasswordRequest",t=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),C.onPassword){const O=F=>{F instanceof Error?this._passwordCapability.reject(F):this._passwordCapability.resolve({password:F})};try{C.onPassword(O,t.code)}catch(F){this._passwordCapability.reject(F)}}else this._passwordCapability.reject(new _util.PasswordException(t.message,t.code));return this._passwordCapability.promise}),a.on("DataLoaded",t=>{C.onProgress?.({loaded:t.length,total:t.length}),this.downloadInfoCapability.resolve(t)}),a.on("StartRenderPage",t=>{this.destroyed||_classPrivateFieldGet(this,_pageCache).get(t.pageIndex)._startRenderPage(t.transparency,t.cacheKey)}),a.on("commonobj",([t,O,F])=>{if(!this.destroyed&&!this.commonObjs.has(t))switch(O){case"Font":const H=this._params;if("error"in F){const v=F.error;(0,_util.warn)(`Error during font loading: ${v}`),this.commonObjs.resolve(t,v);break}let k=null;H.pdfBug&&globalThis.FontInspector?.enabled&&(k={registerFont(v,I){globalThis.FontInspector.fontAdded(v,I)}});const E=new _font_loader.FontFaceObject(F,{isEvalSupported:H.isEvalSupported,disableFontFace:H.disableFontFace,ignoreErrors:H.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:k});this.fontLoader.bind(E).catch(v=>a.sendWithPromise("FontFallback",{id:t})).finally(()=>{!H.fontExtraProperties&&E.data&&(E.data=null),this.commonObjs.resolve(t,E)});break;case"FontPath":case"Image":this.commonObjs.resolve(t,F);break;default:throw new Error(`Got unknown common object type ${O}`)}}),a.on("obj",([t,O,F,H])=>{if(this.destroyed)return;const k=_classPrivateFieldGet(this,_pageCache).get(O);if(!k.objs.has(t))switch(F){case"Image":k.objs.resolve(t,H);const E=8e6;if(H){let v;if(H.bitmap){const{bitmap:I,width:U,height:G}=H;v=U*G*4,k._bitmaps.add(I)}else v=H.data?.length||0;v>E&&(k.cleanupAfterRender=!0)}break;case"Pattern":k.objs.resolve(t,H);break;default:throw new Error(`Got unknown object type ${F}`)}}),a.on("DocProgress",t=>{this.destroyed||C.onProgress?.({loaded:t.loaded,total:t.total})}),a.on("DocStats",t=>{this.destroyed||_classPrivateFieldSet(this,_docStats,Object.freeze({streamTypes:Object.freeze(t.streamTypes),fontTypes:Object.freeze(t.fontTypes)}))}),a.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),a.on("FetchBuiltInCMap",t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(t):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),a.on("FetchStandardFontData",t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(t):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:a}){this.destroyed||this.loadingTask.onUnsupportedFeature?.(a)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(a){if(!Number.isInteger(a)||a<=0||a>this._numPages)return Promise.reject(new Error("Invalid page request."));const C=a-1,t=_classPrivateFieldGet(this,_pagePromises).get(C);if(t)return t;const O=this.messageHandler.sendWithPromise("GetPage",{pageIndex:C}).then(F=>{if(this.destroyed)throw new Error("Transport destroyed");const H=new PDFPageProxy(C,F,this,this._params.ownerDocument,this._params.pdfBug);return _classPrivateFieldGet(this,_pageCache).set(C,H),H});return _classPrivateFieldGet(this,_pagePromises).set(C,O),O}getPageIndex(a){return"object"!=typeof a||null===a||!Number.isInteger(a.num)||a.num<0||!Number.isInteger(a.gen)||a.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:a.num,gen:a.gen})}getAnnotations(a,C){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:a,intent:C})}saveDocument(){return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:this._fullReader?.filename??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||=this.messageHandler.sendWithPromise("GetFieldObjects",null)}hasJSActions(){return this._hasJSActionsPromise||=this.messageHandler.sendWithPromise("HasJSActions",null)}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(a){return"string"!=typeof a?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:a})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(a){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:a})}getStructTree(a){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:a})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(a=>new _optional_content_config.OptionalContentConfig(a))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return _classPrivateFieldGet(this,_metadataPromise)||_classPrivateFieldSet(this,_metadataPromise,this.messageHandler.sendWithPromise("GetMetadata",null).then(a=>({info:a[0],metadata:a[1]?new _metadata.Metadata(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null})))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(a=!1){var C=this;return _asyncToGenerator(function*(){if(yield C.messageHandler.sendWithPromise("Cleanup",null),!C.destroyed){for(const t of _classPrivateFieldGet(C,_pageCache).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);C.commonObjs.clear(),a||C.fontLoader.clear(),_classPrivateFieldSet(C,_metadataPromise,null),C._getFieldObjectsPromise=null,C._hasJSActionsPromise=null}})()}get loadingParams(){const a=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:a.disableAutoFetch,enableXfa:a.enableXfa})}}var _objs=new WeakMap,_ensureObj=new WeakSet;class PDFObjects{constructor(){_classPrivateMethodInitSpec(this,_ensureObj),_classPrivateFieldInitSpec(this,_objs,{writable:!0,value:Object.create(null)})}get(a,C=null){if(C){const O=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,a);return O.capability.promise.then(()=>C(O.data)),null}const t=_classPrivateFieldGet(this,_objs)[a];if(!t?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${a}.`);return t.data}has(a){return _classPrivateFieldGet(this,_objs)[a]?.capability.settled||!1}resolve(a,C=null){const t=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,a);t.data=C,t.capability.resolve()}clear(){_classPrivateFieldSet(this,_objs,Object.create(null))}}function _ensureObj2(j){return _classPrivateFieldGet(this,_objs)[j]||(_classPrivateFieldGet(this,_objs)[j]={capability:(0,_util.createPromiseCapability)(),data:null})}class RenderTask{constructor(a){this._internalRenderTask=a,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}exports.RenderTask=RenderTask;class InternalRenderTask{constructor({callback:a,params:C,objs:t,commonObjs:O,annotationCanvasMap:F,operatorList:H,pageIndex:k,canvasFactory:E,useRequestAnimationFrame:v=!1,pdfBug:I=!1,pageColors:U=null}){this.callback=a,this.params=C,this.objs=t,this.commonObjs=O,this.annotationCanvasMap=F,this.operatorListIdx=null,this.operatorList=H,this._pageIndex=k,this.canvasFactory=E,this._pdfBug=I,this.pageColors=U,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===v&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=C.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:a=!1,optionalContentConfig:C}){if(this.cancelled)return;if(this._canvas){if(_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:t,viewport:O,transform:F,imageLayer:H,background:k}=this.params;this.gfx=new _canvas.CanvasGraphics(t,this.commonObjs,this.objs,this.canvasFactory,H,C,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:F,viewport:O,transparency:a,background:k}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(a=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas),this.callback(a||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var a=this;return _asyncToGenerator(function*(){a.cancelled||(a.operatorListIdx=a.gfx.executeOperatorList(a.operatorList,a.operatorListIdx,a._continueBound,a.stepper),a.operatorListIdx===a.operatorList.argsArray.length&&(a.running=!1,a.operatorList.lastChunk&&(a.gfx.endDrawing(),a._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(a._canvas),a.callback())))})()}}var _canvasInUse={writable:!0,value:new WeakSet};const version="2.14.305";exports.version=version;const build="eaaa8b4ad";exports.build=build},(j,a,C)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.StatTimer=a.RenderingCancelledException=a.PixelsPerInch=a.PageViewport=a.PDFDateString=a.DOMStandardFontDataFactory=a.DOMSVGFactory=a.DOMCanvasFactory=a.DOMCMapReaderFactory=void 0,a.deprecated=function i(m){console.log("Deprecated API usage: "+m)},a.getFilenameFromUrl=function b(m){const h=m.indexOf("#"),l=m.indexOf("?"),_=Math.min(h>0?h:m.length,l>0?l:m.length);return m.substring(m.lastIndexOf("/",_)+1,_)},a.getPdfFilenameFromUrl=function w(m,h="document.pdf"){if("string"!=typeof m)return h;if(g(m))return(0,O.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),h;const _=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,y=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(m);let M=_.exec(y[1])||_.exec(y[2])||_.exec(y[3]);if(M&&(M=M[0],M.includes("%")))try{M=_.exec(decodeURIComponent(M))[0]}catch{}return M||h},a.getXfaPageViewport=function f(m,{scale:h=1,rotation:l=0}){const{width:_,height:y}=m.attributes.style,M=[0,0,parseInt(_),parseInt(y)];return new N({viewBox:M,scale:h,rotation:l})},a.isDataScheme=g,a.isPdfFile=function x(m){return"string"==typeof m&&/\.pdf$/i.test(m)},a.isValidFetchUrl=S,a.loadScript=function n(m,h=!1){return new Promise((l,_)=>{const y=document.createElement("script");y.src=m,y.onload=function(M){h&&y.remove(),l(M)},y.onerror=function(){_(new Error(`Cannot load script at: ${y.src}`))},(document.head||document.documentElement).appendChild(y)})};var t=C(6),O=C(1);class H{}function E(m){return v.apply(this,arguments)}function v(){return(v=_asyncToGenerator(function*(m,h=!1){if(S(m,document.baseURI)){const l=yield fetch(m);if(!l.ok)throw new Error(l.statusText);return h?new Uint8Array(yield l.arrayBuffer()):(0,O.stringToBytes)(yield l.text())}return new Promise((l,_)=>{const y=new XMLHttpRequest;y.open("GET",m,!0),h&&(y.responseType="arraybuffer"),y.onreadystatechange=()=>{if(y.readyState===XMLHttpRequest.DONE){if(200===y.status||0===y.status){let M;if(h&&y.response?M=new Uint8Array(y.response):!h&&y.responseText&&(M=(0,O.stringToBytes)(y.responseText)),M)return void l(M)}_(new Error(y.statusText))}},y.send(null)})})).apply(this,arguments)}_defineProperty(H,"CSS",96),_defineProperty(H,"PDF",72),_defineProperty(H,"PDF_TO_CSS_UNITS",H.CSS/H.PDF),a.PixelsPerInch=H,a.DOMCanvasFactory=class k extends t.BaseCanvasFactory{constructor({ownerDocument:h=globalThis.document}={}){super(),this._document=h}_createCanvas(h,l){const _=this._document.createElement("canvas");return _.width=h,_.height=l,_}},a.DOMCMapReaderFactory=class I extends t.BaseCMapReaderFactory{_fetchData(h,l){return E(h,this.isCompressed).then(_=>({cMapData:_,compressionType:l}))}},a.DOMStandardFontDataFactory=class U extends t.BaseStandardFontDataFactory{_fetchData(h){return E(h,!0)}},a.DOMSVGFactory=class G extends t.BaseSVGFactory{_createSVG(h){return document.createElementNS("http://www.w3.org/2000/svg",h)}};class N{constructor({viewBox:h,scale:l,rotation:_,offsetX:y=0,offsetY:M=0,dontFlip:q=!1}){this.viewBox=h,this.scale=l,this.rotation=_,this.offsetX=y,this.offsetY=M;const Q=(h[2]+h[0])/2,J=(h[3]+h[1])/2;let te,he,oe,R,s,e,r,o;switch((_%=360)<0&&(_+=360),_){case 180:te=-1,he=0,oe=0,R=1;break;case 90:te=0,he=1,oe=1,R=0;break;case 270:te=0,he=-1,oe=-1,R=0;break;case 0:te=1,he=0,oe=0,R=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}q&&(oe=-oe,R=-R),0===te?(s=Math.abs(J-h[1])*l+y,e=Math.abs(Q-h[0])*l+M,r=Math.abs(h[3]-h[1])*l,o=Math.abs(h[2]-h[0])*l):(s=Math.abs(Q-h[0])*l+y,e=Math.abs(J-h[1])*l+M,r=Math.abs(h[2]-h[0])*l,o=Math.abs(h[3]-h[1])*l),this.transform=[te*l,he*l,oe*l,R*l,s-te*l*Q-oe*l*J,e-he*l*Q-R*l*J],this.width=r,this.height=o}clone({scale:h=this.scale,rotation:l=this.rotation,offsetX:_=this.offsetX,offsetY:y=this.offsetY,dontFlip:M=!1}={}){return new N({viewBox:this.viewBox.slice(),scale:h,rotation:l,offsetX:_,offsetY:y,dontFlip:M})}convertToViewportPoint(h,l){return O.Util.applyTransform([h,l],this.transform)}convertToViewportRectangle(h){const l=O.Util.applyTransform([h[0],h[1]],this.transform),_=O.Util.applyTransform([h[2],h[3]],this.transform);return[l[0],l[1],_[0],_[1]]}convertToPdfPoint(h,l){return O.Util.applyInverseTransform([h,l],this.transform)}}function g(m){const h=m.length;let l=0;for(;l<h&&""===m[l].trim();)l++;return"data:"===m.substring(l,l+5).toLowerCase()}function S(m,h){try{const{protocol:l}=h?new URL(m,h):new URL(m);return"http:"===l||"https:"===l}catch{return!1}}let u;a.PageViewport=N,a.RenderingCancelledException=class W extends O.BaseException{constructor(h,l){super(h,"RenderingCancelledException"),this.type=l}},a.StatTimer=class A{constructor(){this.started=Object.create(null),this.times=[]}time(h){h in this.started&&(0,O.warn)(`Timer is already running for ${h}`),this.started[h]=Date.now()}timeEnd(h){h in this.started||(0,O.warn)(`Timer has not been started for ${h}`),this.times.push({name:h,start:this.started[h],end:Date.now()}),delete this.started[h]}toString(){const h=[];let l=0;for(const _ of this.times){const y=_.name;y.length>l&&(l=y.length)}for(const _ of this.times){const y=_.end-_.start;h.push(`${_.name.padEnd(l)} ${y}ms\n`)}return h.join("")}},a.PDFDateString=class P{static toDateObject(h){if(!h||"string"!=typeof h)return null;u||(u=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const l=u.exec(h);if(!l)return null;const _=parseInt(l[1],10);let y=parseInt(l[2],10);y=y>=1&&y<=12?y-1:0;let M=parseInt(l[3],10);M=M>=1&&M<=31?M:1;let q=parseInt(l[4],10);q=q>=0&&q<=23?q:0;let Q=parseInt(l[5],10);Q=Q>=0&&Q<=59?Q:0;let J=parseInt(l[6],10);J=J>=0&&J<=59?J:0;const te=l[7]||"Z";let he=parseInt(l[8],10);he=he>=0&&he<=23?he:0;let oe=parseInt(l[9],10)||0;return oe=oe>=0&&oe<=59?oe:0,"-"===te?(q+=he,Q+=oe):"+"===te&&(q-=he,Q-=oe),new Date(Date.UTC(_,y,M,q,Q,J))}}},(j,a,C)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BaseStandardFontDataFactory=a.BaseSVGFactory=a.BaseCanvasFactory=a.BaseCMapReaderFactory=void 0;var t=C(1);class O{constructor(){this.constructor===O&&(0,t.unreachable)("Cannot initialize BaseCanvasFactory.")}create(v,I){if(v<=0||I<=0)throw new Error("Invalid canvas size");const U=this._createCanvas(v,I);return{canvas:U,context:U.getContext("2d")}}reset(v,I,U){if(!v.canvas)throw new Error("Canvas is not specified");if(I<=0||U<=0)throw new Error("Invalid canvas size");v.canvas.width=I,v.canvas.height=U}destroy(v){if(!v.canvas)throw new Error("Canvas is not specified");v.canvas.width=0,v.canvas.height=0,v.canvas=null,v.context=null}_createCanvas(v,I){(0,t.unreachable)("Abstract method `_createCanvas` called.")}}a.BaseCanvasFactory=O;class F{constructor({baseUrl:v=null,isCompressed:I=!1}){this.constructor===F&&(0,t.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=v,this.isCompressed=I}fetch({name:v}){var I=this;return _asyncToGenerator(function*(){if(!I.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!v)throw new Error("CMap name must be specified.");const U=I.baseUrl+v+(I.isCompressed?".bcmap":"");return I._fetchData(U,I.isCompressed?t.CMapCompressionType.BINARY:t.CMapCompressionType.NONE).catch(N=>{throw new Error(`Unable to load ${I.isCompressed?"binary ":""}CMap at: ${U}`)})})()}_fetchData(v,I){(0,t.unreachable)("Abstract method `_fetchData` called.")}}a.BaseCMapReaderFactory=F;class H{constructor({baseUrl:v=null}){this.constructor===H&&(0,t.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=v}fetch({filename:v}){var I=this;return _asyncToGenerator(function*(){if(!I.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!v)throw new Error("Font filename must be specified.");const U=`${I.baseUrl}${v}`;return I._fetchData(U).catch(G=>{throw new Error(`Unable to load font data at: ${U}`)})})()}_fetchData(v){(0,t.unreachable)("Abstract method `_fetchData` called.")}}a.BaseStandardFontDataFactory=H;class k{constructor(){this.constructor===k&&(0,t.unreachable)("Cannot initialize BaseSVGFactory.")}create(v,I){if(v<=0||I<=0)throw new Error("Invalid SVG dimensions");const U=this._createSVG("svg:svg");return U.setAttribute("version","1.1"),U.setAttribute("width",`${v}px`),U.setAttribute("height",`${I}px`),U.setAttribute("preserveAspectRatio","none"),U.setAttribute("viewBox",`0 0 ${v} ${I}`),U}createElement(v){if("string"!=typeof v)throw new Error("Invalid SVG element type");return this._createSVG(v)}_createSVG(v){(0,t.unreachable)("Abstract method `_createSVG` called.")}}a.BaseSVGFactory=k},(j,a,C)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.FontLoader=a.FontFaceObject=void 0;var t=C(1);class O{constructor({docId:E,onUnsupportedFeature:v,ownerDocument:I=globalThis.document,styleElement:U=null}){this.constructor===O&&(0,t.unreachable)("Cannot initialize BaseFontLoader."),this.docId=E,this._onUnsupportedFeature=v,this._document=I,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(E){this.nativeFontFaces.push(E),this._document.fonts.add(E)}insertRule(E){let v=this.styleElement;v||(v=this.styleElement=this._document.createElement("style"),v.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(v));const I=v.sheet;I.insertRule(E,I.cssRules.length)}clear(){for(const E of this.nativeFontFaces)this._document.fonts.delete(E);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}bind(E){var v=this;return _asyncToGenerator(function*(){if(E.attached||E.missingFile)return;if(E.attached=!0,v.isFontLoadingAPISupported){const U=E.createNativeFontFace();if(U){v.addNativeFontFace(U);try{yield U.loaded}catch(G){throw v._onUnsupportedFeature({featureId:t.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,t.warn)(`Failed to load font '${U.family}': '${G}'.`),E.disableFontFace=!0,G}}return}const I=E.createFontFaceRule();if(I){if(v.insertRule(I),v.isSyncFontLoadingSupported)return;yield new Promise(U=>{const G=v._queueLoadingCallback(U);v._prepareFontLoadEvent([I],[E],G)})}})()}_queueLoadingCallback(E){(0,t.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){return(0,t.shadow)(this,"isFontLoadingAPISupported",!!this._document?.fonts)}get isSyncFontLoadingSupported(){(0,t.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,t.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(E,v,I){(0,t.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let F;a.FontLoader=F,a.FontLoader=F=class extends O{constructor(E){super(E),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let E=!1;return(typeof navigator>"u"||/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent)?.[1]>=14)&&(E=!0),(0,t.shadow)(this,"isSyncFontLoadingSupported",E)}_queueLoadingCallback(E){const I=this.loadingContext,U={id:"pdfjs-font-loading-"+I.nextRequestId++,done:!1,complete:function v(){for((0,t.assert)(!U.done,"completeRequest() cannot be called twice."),U.done=!0;I.requests.length>0&&I.requests[0].done;){const G=I.requests.shift();setTimeout(G.callback,0)}},callback:E};return I.requests.push(U),U}get _loadTestFont(){return(0,t.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(E,v,I){function U(_,y){return _.charCodeAt(y)<<24|_.charCodeAt(y+1)<<16|_.charCodeAt(y+2)<<8|255&_.charCodeAt(y+3)}function G(_,y,M,q){return _.substring(0,y)+q+_.substring(y+M)}let N,W;const g=this._document.createElement("canvas");g.width=1,g.height=1;const x=g.getContext("2d");let b=0;const A=`lt${Date.now()}${this.loadTestFontId++}`;let S=this._loadTestFont;S=G(S,976,A.length,A);const u=1482184792;let P=U(S,16);for(N=0,W=A.length-3;N<W;N+=4)P=P-u+U(A,N)|0;N<A.length&&(P=P-u+U(A+"XXX",N)|0),S=G(S,16,4,(0,t.string32)(P));const f=`url(data:font/opentype;base64,${btoa(S)});`;this.insertRule(`@font-face {font-family:"${A}";src:${f}}`);const h=[];for(const _ of v)h.push(_.loadedName);h.push(A);const l=this._document.createElement("div");l.style.visibility="hidden",l.style.width=l.style.height="10px",l.style.position="absolute",l.style.top=l.style.left="0px";for(const _ of h){const y=this._document.createElement("span");y.textContent="Hi",y.style.fontFamily=_,l.appendChild(y)}this._document.body.appendChild(l),function w(_,y){if(b++,b>30)return(0,t.warn)("Load test font never loaded."),void y();x.font="30px "+_,x.fillText(".",0,20),x.getImageData(0,0,1,1).data[3]>0?y():setTimeout(w.bind(null,_,y))}(A,()=>{l.remove(),I.complete()})}},a.FontFaceObject=class H{constructor(E,{isEvalSupported:v=!0,disableFontFace:I=!1,ignoreErrors:U=!1,onUnsupportedFeature:G,fontRegistry:N=null}){this.compiledGlyphs=Object.create(null);for(const W in E)this[W]=E[W];this.isEvalSupported=!1!==v,this.disableFontFace=!0===I,this.ignoreErrors=!0===U,this._onUnsupportedFeature=G,this.fontRegistry=N}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let E;if(this.cssFontInfo){const v={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(v.style=`oblique ${this.cssFontInfo.italicAngle}deg`),E=new FontFace(this.cssFontInfo.fontFamily,this.data,v)}else E=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),E}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const E=(0,t.bytesToString)(this.data),v=`url(data:${this.mimetype};base64,${btoa(E)});`;let I;if(this.cssFontInfo){let U=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(U+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),I=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${U}src:${v}}`}else I=`@font-face {font-family:"${this.loadedName}";src:${v}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,v),I}getPathGenerator(E,v){if(void 0!==this.compiledGlyphs[v])return this.compiledGlyphs[v];let I;try{I=E.get(this.loadedName+"_path_"+v)}catch(U){if(!this.ignoreErrors)throw U;return this._onUnsupportedFeature({featureId:t.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,t.warn)(`getPathGenerator - ignoring character: "${U}".`),this.compiledGlyphs[v]=function(G,N){}}if(this.isEvalSupported&&t.FeatureTest.isEvalSupported){const U=[];for(const G of I){const N=void 0!==G.args?G.args.join(","):"";U.push("c.",G.cmd,"(",N,");\n")}return this.compiledGlyphs[v]=new Function("c","size",U.join(""))}return this.compiledGlyphs[v]=function(U,G){for(const N of I)"scale"===N.cmd&&(N.args=[G,-G]),U[N.cmd].apply(U,N.args)}}}},(j,a,C)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AnnotationStorage=void 0;var t=C(9),O=C(1);a.AnnotationStorage=class F{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}getValue(k,E){const v=this._storage.get(k);return void 0===v?E:Object.assign(E,v)}getRawValue(k){return this._storage.get(k)}setValue(k,E){const v=this._storage.get(k);let I=!1;if(void 0!==v)for(const[U,G]of Object.entries(E))v[U]!==G&&(I=!0,v[U]=G);else I=!0,this._storage.set(k,E);I&&this._setModified()}getAll(){return this._storage.size>0?(0,O.objectFromMap)(this._storage):null}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get serializable(){return this._storage.size>0?this._storage:null}get hash(){const k=new t.MurmurHash3_64;for(const[E,v]of this._storage)k.update(`${E}:${JSON.stringify(v)}`);return k.hexdigest()}}},(j,a,C)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.MurmurHash3_64=void 0;var t=C(1);const O=3285377520,F=4294901760,H=65535;a.MurmurHash3_64=class k{constructor(v){this.h1=v?4294967295&v:O,this.h2=v?4294967295&v:O}update(v){let I,U;if("string"==typeof v){I=new Uint8Array(2*v.length),U=0;for(let u=0,P=v.length;u<P;u++){const f=v.charCodeAt(u);f<=255?I[U++]=f:(I[U++]=f>>>8,I[U++]=255&f)}}else{if(!(0,t.isArrayBuffer)(v))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");I=v.slice(),U=I.byteLength}const G=U>>2,N=U-4*G,W=new Uint32Array(I.buffer,0,G);let g=0,x=0,b=this.h1,w=this.h2;const A=3432918353,S=461845907,n=A&H,i=S&H;for(let u=0;u<G;u++)1&u?(g=W[u],g=g*A&F|g*n&H,g=g<<15|g>>>17,g=g*S&F|g*i&H,b^=g,b=b<<13|b>>>19,b=5*b+3864292196):(x=W[u],x=x*A&F|x*n&H,x=x<<15|x>>>17,x=x*S&F|x*i&H,w^=x,w=w<<13|w>>>19,w=5*w+3864292196);switch(g=0,N){case 3:g^=I[4*G+2]<<16;case 2:g^=I[4*G+1]<<8;case 1:g^=I[4*G],g=g*A&F|g*n&H,g=g<<15|g>>>17,g=g*S&F|g*i&H,1&G?b^=g:w^=g}this.h1=b,this.h2=w}hexdigest(){let v=this.h1,I=this.h2;v^=I>>>1,v=3981806797*v&F|36045*v&H,I=4283543511*I&F|(2950163797*(I<<16|v>>>16)&F)>>>16,v^=I>>>1,v=444984403*v&F|60499*v&H,I=3301882366*I&F|(3120437893*(I<<16|v>>>16)&F)>>>16,v^=I>>>1;const U=(v>>>0).toString(16),G=(I>>>0).toString(16);return U.padStart(8,"0")+G.padStart(8,"0")}}},(j,a,C)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CanvasGraphics=void 0;var t=C(1),O=C(11),F=C(12),H=C(3),k=C(5);const I=4096,g=16;function w(R){if(R._transformStack&&(R._transformStack=[]),!R.mozCurrentTransform){R._originalSave=R.save,R._originalRestore=R.restore,R._originalRotate=R.rotate,R._originalScale=R.scale,R._originalTranslate=R.translate,R._originalTransform=R.transform,R._originalSetTransform=R.setTransform,R._originalResetTransform=R.resetTransform,R._transformMatrix=R._transformMatrix||[1,0,0,1,0,0],R._transformStack=[];try{const s=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(R),"lineWidth");R._setLineWidth=s.set,R._getLineWidth=s.get,Object.defineProperty(R,"lineWidth",{set:function(r){this._setLineWidth(1.000001*r)},get:function(){return this._getLineWidth()}})}catch{}Object.defineProperty(R,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(R,"mozCurrentTransformInverse",{get:function(){const[e,r,o,d,p,c]=this._transformMatrix,L=e*d-r*o,X=r*o-e*d;return[d/L,r/X,o/X,e/L,(d*p-o*c)/X,(r*p-e*c)/L]}}),R.save=function(){const e=this._transformMatrix;this._transformStack.push(e),this._transformMatrix=e.slice(0,6),this._originalSave()},R.restore=function(){0===this._transformStack.length&&(0,t.warn)("Tried to restore a ctx when the stack was already empty.");const e=this._transformStack.pop();e&&(this._transformMatrix=e,this._originalRestore())},R.translate=function(e,r){const o=this._transformMatrix;o[4]=o[0]*e+o[2]*r+o[4],o[5]=o[1]*e+o[3]*r+o[5],this._originalTranslate(e,r)},R.scale=function(e,r){const o=this._transformMatrix;o[0]*=e,o[1]*=e,o[2]*=r,o[3]*=r,this._originalScale(e,r)},R.transform=function(e,r,o,d,p,c){const L=this._transformMatrix;this._transformMatrix=[L[0]*e+L[2]*r,L[1]*e+L[3]*r,L[0]*o+L[2]*d,L[1]*o+L[3]*d,L[0]*p+L[2]*c+L[4],L[1]*p+L[3]*c+L[5]],R._originalTransform(e,r,o,d,p,c)},R.setTransform=function(e,r,o,d,p,c){this._transformMatrix=[e,r,o,d,p,c],R._originalSetTransform(e,r,o,d,p,c)},R.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],R._originalResetTransform()},R.rotate=function(e){const r=Math.cos(e),o=Math.sin(e),d=this._transformMatrix;this._transformMatrix=[d[0]*r+d[2]*o,d[1]*r+d[3]*o,d[0]*-o+d[2]*r,d[1]*-o+d[3]*r,d[4],d[5]],this._originalRotate(e)}}}class A{constructor(s){this.canvasFactory=s,this.cache=Object.create(null)}getCanvas(s,e,r,o){let d;return void 0!==this.cache[s]?(d=this.cache[s],this.canvasFactory.reset(d,e,r),d.context.setTransform(1,0,0,1,0,0)):(d=this.canvasFactory.create(e,r),this.cache[s]=d),o&&w(d.context),d}delete(s){delete this.cache[s]}clear(){for(const s in this.cache)this.canvasFactory.destroy(this.cache[s]),delete this.cache[s]}}function S(R,s,e,r,o,d,p,c,L,X){const[B,Y,$,Z,ee,ue]=R.mozCurrentTransform;if(0===Y&&0===$){const ae=Math.round(p*B+ee),Ce=Math.round(c*Z+ue),se=Math.abs(Math.round((p+L)*B+ee)-ae)||1,be=Math.abs(Math.round((c+X)*Z+ue)-Ce)||1;return R.setTransform(Math.sign(B),0,0,Math.sign(Z),ae,Ce),R.drawImage(s,e,r,o,d,0,0,se,be),R.setTransform(B,Y,$,Z,ee,ue),[se,be]}if(0===B&&0===Z){const ae=Math.round(c*$+ee),Ce=Math.round(p*Y+ue),se=Math.abs(Math.round((c+X)*$+ee)-ae)||1,be=Math.abs(Math.round((p+L)*Y+ue)-Ce)||1;return R.setTransform(0,Math.sign(Y),Math.sign($),0,ae,Ce),R.drawImage(s,e,r,o,d,0,0,be,se),R.setTransform(B,Y,$,Z,ee,ue),[be,se]}return R.drawImage(s,e,r,o,d,p,c,L,X),[Math.hypot(B,Y)*L,Math.hypot($,Z)*X]}class i{constructor(s,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=t.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=t.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=t.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,s,e])}clone(){const s=Object.create(this);return s.clipBox=this.clipBox.slice(),s}setCurrentPoint(s,e){this.x=s,this.y=e}updatePathMinMax(s,e,r){[e,r]=t.Util.applyTransform([e,r],s),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,r),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,r)}updateRectMinMax(s,e){const r=t.Util.applyTransform(e,s),o=t.Util.applyTransform(e.slice(2),s);this.minX=Math.min(this.minX,r[0],o[0]),this.minY=Math.min(this.minY,r[1],o[1]),this.maxX=Math.max(this.maxX,r[0],o[0]),this.maxY=Math.max(this.maxY,r[1],o[1])}updateScalingPathMinMax(s,e){t.Util.scaleMinMax(s,e),this.minX=Math.min(this.minX,e[0]),this.maxX=Math.max(this.maxX,e[1]),this.minY=Math.min(this.minY,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(s,e,r,o,d,p,c,L,X,B){const Y=t.Util.bezierBoundingBox(e,r,o,d,p,c,L,X);if(B)return B[0]=Math.min(B[0],Y[0],Y[2]),B[1]=Math.max(B[1],Y[0],Y[2]),B[2]=Math.min(B[2],Y[1],Y[3]),void(B[3]=Math.max(B[3],Y[1],Y[3]));this.updateRectMinMax(s,Y)}getPathBoundingBox(s=O.PathType.FILL,e=null){const r=[this.minX,this.minY,this.maxX,this.maxY];if(s===O.PathType.STROKE){e||(0,t.unreachable)("Stroke bounding box must include transform.");const o=t.Util.singularValueDecompose2dScale(e),d=o[0]*this.lineWidth/2,p=o[1]*this.lineWidth/2;r[0]-=d,r[1]-=p,r[2]+=d,r[3]+=p}return r}updateClipFromPath(){const s=t.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(s||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(s){this.clipBox=s,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(s=O.PathType.FILL,e=null){return t.Util.intersect(this.clipBox,this.getPathBoundingBox(s,e))}}function u(R,s,e=null){if(typeof ImageData<"u"&&s instanceof ImageData)return void R.putImageData(s,0,0);const r=s.height,o=s.width,d=r%g,p=(r-d)/g,c=0===d?p:p+1,L=R.createImageData(o,g);let B,X=0;const Y=s.data,$=L.data;let Z,ee,ue,_e,Ae,me,ae,we;if(e)switch(e.length){case 1:Ae=e[0],me=e[0],ae=e[0],we=e[0];break;case 4:Ae=e[0],me=e[1],ae=e[2],we=e[3]}if(s.kind===t.ImageKind.GRAYSCALE_1BPP){const Ce=Y.byteLength,pe=new Uint32Array($.buffer,0,$.byteLength>>2),se=pe.length,de=o+7>>3;let be=4294967295,ne=t.FeatureTest.isLittleEndian?4278190080:255;for(we&&255===we[0]&&0===we[255]&&([be,ne]=[ne,be]),Z=0;Z<c;Z++){for(ue=Z<p?g:d,B=0,ee=0;ee<ue;ee++){const T=Ce-X;let K=0;const le=T>de?o:8*T-7,ge=-8&le;let z=0,D=0;for(;K<ge;K+=8)D=Y[X++],pe[B++]=128&D?be:ne,pe[B++]=64&D?be:ne,pe[B++]=32&D?be:ne,pe[B++]=16&D?be:ne,pe[B++]=8&D?be:ne,pe[B++]=4&D?be:ne,pe[B++]=2&D?be:ne,pe[B++]=1&D?be:ne;for(;K<le;K++)0===z&&(D=Y[X++],z=128),pe[B++]=D&z?be:ne,z>>=1}for(;B<se;)pe[B++]=0;R.putImageData(L,0,Z*g)}}else if(s.kind===t.ImageKind.RGBA_32BPP){const Ce=!!(Ae||me||ae);for(ee=0,_e=o*g*4,Z=0;Z<p;Z++){if($.set(Y.subarray(X,X+_e)),X+=_e,Ce)for(let pe=0;pe<_e;pe+=4)Ae&&($[pe+0]=Ae[$[pe+0]]),me&&($[pe+1]=me[$[pe+1]]),ae&&($[pe+2]=ae[$[pe+2]]);R.putImageData(L,0,ee),ee+=g}if(Z<c){if(_e=o*d*4,$.set(Y.subarray(X,X+_e)),Ce)for(let pe=0;pe<_e;pe+=4)Ae&&($[pe+0]=Ae[$[pe+0]]),me&&($[pe+1]=me[$[pe+1]]),ae&&($[pe+2]=ae[$[pe+2]]);R.putImageData(L,0,ee)}}else{if(s.kind!==t.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${s.kind}`);{const Ce=!!(Ae||me||ae);for(ue=g,_e=o*ue,Z=0;Z<c;Z++){for(Z>=p&&(ue=d,_e=o*ue),B=0,ee=_e;ee--;)$[B++]=Y[X++],$[B++]=Y[X++],$[B++]=Y[X++],$[B++]=255;if(Ce)for(let pe=0;pe<B;pe+=4)Ae&&($[pe+0]=Ae[$[pe+0]]),me&&($[pe+1]=me[$[pe+1]]),ae&&($[pe+2]=ae[$[pe+2]]);R.putImageData(L,0,Z*g)}}}}function P(R,s){if(s.bitmap)return void R.drawImage(s.bitmap,0,0);const e=s.height,r=s.width,o=e%g,d=(e-o)/g,p=0===o?d:d+1,c=R.createImageData(r,g);let L=0;const X=s.data,B=c.data;for(let Y=0;Y<p;Y++){const $=Y<d?g:o;({srcPos:L}=(0,F.applyMaskImageData)({src:X,srcPos:L,dest:B,width:r,height:$})),R.putImageData(c,0,Y*g)}}function f(R,s){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let r=0,o=e.length;r<o;r++){const d=e[r];void 0!==R[d]&&(s[d]=R[d])}void 0!==R.setLineDash&&(s.setLineDash(R.getLineDash()),s.lineDashOffset=R.lineDashOffset)}function m(R,s){R.strokeStyle=R.fillStyle=s||"#000000",R.fillRule="nonzero",R.globalAlpha=1,R.lineWidth=1,R.lineCap="butt",R.lineJoin="miter",R.miterLimit=10,R.globalCompositeOperation="source-over",R.font="10px sans-serif",void 0!==R.setLineDash&&(R.setLineDash([]),R.lineDashOffset=0)}function h(R,s,e,r){const o=R.length;for(let d=3;d<o;d+=4){const p=R[d];if(0===p)R[d-3]=s,R[d-2]=e,R[d-1]=r;else if(p<255){const c=255-p;R[d-3]=R[d-3]*p+s*c>>8,R[d-2]=R[d-2]*p+e*c>>8,R[d-1]=R[d-1]*p+r*c>>8}}}function l(R,s,e){const r=R.length;for(let d=3;d<r;d+=4)s[d]=s[d]*(e?e[R[d]]:R[d])*.00392156862745098|0}function _(R,s,e){const r=R.length;for(let o=3;o<r;o+=4){const d=77*R[o-3]+152*R[o-2]+28*R[o-1];s[o]=e?s[o]*e[d>>8]>>8:s[o]*d>>16}}function q(R,s){const e=t.Util.singularValueDecompose2dScale(R);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const r=Math.fround((globalThis.devicePixelRatio||1)*k.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==s?s:e[0]<=r||e[1]<=r}const Q=["butt","round","square"],J=["miter","round","bevel"],te={},he={};class oe{constructor(s,e,r,o,d,p,c,L){this.ctx=s,this.current=new i(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=r,this.canvasFactory=o,this.imageLayer=d,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=p,this.cachedCanvases=new A(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=L?.background||null,this.foregroundColor=L?.foreground||null,s&&w(s),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(s,e=null){return"string"==typeof s?s.startsWith("g_")?this.commonObjs.get(s):this.objs.get(s):e}beginDrawing({transform:s,viewport:e,transparency:r=!1,background:o=null}){const d=this.ctx.canvas.width,p=this.ctx.canvas.height,c=o||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const L=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const X=this.backgroundColor=this.ctx.fillStyle;let B=!0,Y=c;if(this.ctx.fillStyle=c,Y=this.ctx.fillStyle,B="string"==typeof Y&&/^#[0-9A-Fa-f]{6}$/.test(Y),"#000000"===L&&"#ffffff"===X||L===X||!B)this.foregroundColor=this.backgroundColor=null;else{const $=parseInt(Y.slice(1),16),ee=($&&65280)>>8,ue=$&&255,_e=me=>(me/=255)<=.03928?me/12.92:((me+.055)/1.055)**2.4,Ae=Math.round(.2126*_e(($&&16711680)>>16)+.7152*_e(ee)+.0722*_e(ue));this.selectColor=(me,ae,we)=>{const Ce=.2126*_e(me)+.7152*_e(ae)+.0722*_e(we);return Math.round(Ce)===Ae?X:L}}}if(this.ctx.fillStyle=this.backgroundColor||c,this.ctx.fillRect(0,0,d,p),this.ctx.restore(),r){const L=this.cachedCanvases.getCanvas("transparent",d,p,!0);this.compositeCtx=this.ctx,this.transparentCanvas=L.canvas,this.ctx=L.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),m(this.ctx,this.foregroundColor),s&&(this.ctx.transform.apply(this.ctx,s),this.outputScaleX=s[0],this.outputScaleY=s[0]),this.ctx.transform.apply(this.ctx,e.transform),this.viewportScale=e.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(s,e,r,o){const d=s.argsArray,p=s.fnArray;let c=e||0;const L=d.length;if(L===c)return c;const X=L-c>10&&"function"==typeof r,B=X?Date.now()+15:0;let Y=0;const $=this.commonObjs,Z=this.objs;let ee;for(;;){if(void 0!==o&&c===o.nextBreakPoint)return o.breakIt(c,r),c;if(ee=p[c],ee!==t.OPS.dependency)this[ee].apply(this,d[c]);else for(const ue of d[c]){const _e=ue.startsWith("g_")?$:Z;if(!_e.has(ue))return _e.get(ue,r),c}if(c++,c===L)return c;if(X&&++Y>10){if(Date.now()>B)return r(),c;Y=0}}}endDrawing(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const s of this._cachedBitmapsMap.values()){for(const e of s.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);s.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(s,e){const r=s.width,o=s.height;let B,Y,d=Math.max(Math.hypot(e[0],e[1]),1),p=Math.max(Math.hypot(e[2],e[3]),1),c=r,L=o,X="prescale1";for(;d>2&&c>1||p>2&&L>1;){let $=c,Z=L;d>2&&c>1&&($=Math.ceil(c/2),d/=c/$),p>2&&L>1&&(Z=Math.ceil(L/2),p/=L/Z),B=this.cachedCanvases.getCanvas(X,$,Z,!1),Y=B.context,Y.clearRect(0,0,$,Z),Y.drawImage(s,0,0,c,L,0,0,$,Z),s=B.canvas,c=$,L=Z,X="prescale1"===X?"prescale2":"prescale1"}return{img:s,paintWidth:c,paintHeight:L}}_createMaskCanvas(s){const e=this.ctx,{width:r,height:o}=s,d=this.current.fillColor,p=this.current.patternFill,c=e.mozCurrentTransform;let L,X,B,Y;if((s.bitmap||s.data)&&s.count>1){const se=s.bitmap||s.data.buffer,de=c.slice(0,4);X=JSON.stringify(p?de:[de,d]),L=this._cachedBitmapsMap.get(se),L||(L=new Map,this._cachedBitmapsMap.set(se,L));const be=L.get(X);if(be&&!p)return{canvas:be,offsetX:Math.round(Math.min(c[0],c[2])+c[4]),offsetY:Math.round(Math.min(c[1],c[3])+c[5])};B=be}B||(Y=this.cachedCanvases.getCanvas("maskCanvas",r,o,!1),P(Y.context,s));let $=t.Util.transform(c,[1/r,0,0,-1/o,0,0]);$=t.Util.transform($,[1,0,0,1,0,-o]);const Z=t.Util.applyTransform([0,0],$),ee=t.Util.applyTransform([r,o],$),ue=t.Util.normalizeRect([Z[0],Z[1],ee[0],ee[1]]),_e=Math.round(ue[2]-ue[0])||1,Ae=Math.round(ue[3]-ue[1])||1,me=this.cachedCanvases.getCanvas("fillCanvas",_e,Ae,!0),ae=me.context,we=Math.min(Z[0],ee[0]),Ce=Math.min(Z[1],ee[1]);ae.translate(-we,-Ce),ae.transform.apply(ae,$),B||(B=this._scaleImage(Y.canvas,ae.mozCurrentTransformInverse),B=B.img,L&&p&&L.set(X,B)),ae.imageSmoothingEnabled=q(ae.mozCurrentTransform,s.interpolate),S(ae,B,0,0,B.width,B.height,0,0,r,o),ae.globalCompositeOperation="source-in";const pe=t.Util.transform(ae.mozCurrentTransformInverse,[1,0,0,1,-we,-Ce]);return ae.fillStyle=p?d.getPattern(e,this,pe,O.PathType.FILL):d,ae.fillRect(0,0,r,o),L&&!p&&(this.cachedCanvases.delete("fillCanvas"),L.set(X,me.canvas)),{canvas:me.canvas,offsetX:Math.round(we),offsetY:Math.round(Ce)}}setLineWidth(s){s!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=s,this.ctx.lineWidth=s}setLineCap(s){this.ctx.lineCap=Q[s]}setLineJoin(s){this.ctx.lineJoin=J[s]}setMiterLimit(s){this.ctx.miterLimit=s}setDash(s,e){const r=this.ctx;void 0!==r.setLineDash&&(r.setLineDash(s),r.lineDashOffset=e)}setRenderingIntent(s){}setFlatness(s){}setGState(s){for(let e=0,r=s.length;e<r;e++){const o=s[e],p=o[1];switch(o[0]){case"LW":this.setLineWidth(p);break;case"LC":this.setLineCap(p);break;case"LJ":this.setLineJoin(p);break;case"ML":this.setMiterLimit(p);break;case"D":this.setDash(p[0],p[1]);break;case"RI":this.setRenderingIntent(p);break;case"FL":this.setFlatness(p);break;case"Font":this.setFont(p[0],p[1]);break;case"CA":this.current.strokeAlpha=o[1];break;case"ca":this.current.fillAlpha=o[1],this.ctx.globalAlpha=o[1];break;case"BM":this.ctx.globalCompositeOperation=p;break;case"SMask":this.current.activeSMask=p?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=p}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const s=this.inSMaskMode;this.current.activeSMask&&!s?this.beginSMaskMode():!this.current.activeSMask&&s&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const o=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,this.ctx.canvas.width,this.ctx.canvas.height,!0);this.suspendedCtx=this.ctx,this.ctx=o.context;const d=this.ctx;d.setTransform.apply(d,this.suspendedCtx.mozCurrentTransform),f(this.suspendedCtx,d),function b(R,s){if(R._removeMirroring)throw new Error("Context is already forwarding operations.");R.__originalSave=R.save,R.__originalRestore=R.restore,R.__originalRotate=R.rotate,R.__originalScale=R.scale,R.__originalTranslate=R.translate,R.__originalTransform=R.transform,R.__originalSetTransform=R.setTransform,R.__originalResetTransform=R.resetTransform,R.__originalClip=R.clip,R.__originalMoveTo=R.moveTo,R.__originalLineTo=R.lineTo,R.__originalBezierCurveTo=R.bezierCurveTo,R.__originalRect=R.rect,R.__originalClosePath=R.closePath,R.__originalBeginPath=R.beginPath,R._removeMirroring=()=>{R.save=R.__originalSave,R.restore=R.__originalRestore,R.rotate=R.__originalRotate,R.scale=R.__originalScale,R.translate=R.__originalTranslate,R.transform=R.__originalTransform,R.setTransform=R.__originalSetTransform,R.resetTransform=R.__originalResetTransform,R.clip=R.__originalClip,R.moveTo=R.__originalMoveTo,R.lineTo=R.__originalLineTo,R.bezierCurveTo=R.__originalBezierCurveTo,R.rect=R.__originalRect,R.closePath=R.__originalClosePath,R.beginPath=R.__originalBeginPath,delete R._removeMirroring},R.save=function(){s.save(),this.__originalSave()},R.restore=function(){s.restore(),this.__originalRestore()},R.translate=function(r,o){s.translate(r,o),this.__originalTranslate(r,o)},R.scale=function(r,o){s.scale(r,o),this.__originalScale(r,o)},R.transform=function(r,o,d,p,c,L){s.transform(r,o,d,p,c,L),this.__originalTransform(r,o,d,p,c,L)},R.setTransform=function(r,o,d,p,c,L){s.setTransform(r,o,d,p,c,L),this.__originalSetTransform(r,o,d,p,c,L)},R.resetTransform=function(){s.resetTransform(),this.__originalResetTransform()},R.rotate=function(r){s.rotate(r),this.__originalRotate(r)},R.clip=function(r){s.clip(r),this.__originalClip(r)},R.moveTo=function(e,r){s.moveTo(e,r),this.__originalMoveTo(e,r)},R.lineTo=function(e,r){s.lineTo(e,r),this.__originalLineTo(e,r)},R.bezierCurveTo=function(e,r,o,d,p,c){s.bezierCurveTo(e,r,o,d,p,c),this.__originalBezierCurveTo(e,r,o,d,p,c)},R.rect=function(e,r,o,d){s.rect(e,r,o,d),this.__originalRect(e,r,o,d)},R.closePath=function(){s.closePath(),this.__originalClosePath()},R.beginPath=function(){s.beginPath(),this.__originalBeginPath()}}(d,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),f(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(s){this.current.activeSMask&&(s?(s[0]=Math.floor(s[0]),s[1]=Math.floor(s[1]),s[2]=Math.ceil(s[2]),s[3]=Math.ceil(s[3])):s=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],function M(R,s,e,r){const o=r[0],d=r[1],p=r[2]-o,c=r[3]-d;0===p||0===c||(function y(R,s,e,r,o,d,p,c,L,X,B){const Y=!!d,$=Y?d[0]:0,Z=Y?d[1]:0,ee=Y?d[2]:0;let ue;ue="Luminosity"===o?_:l;const Ae=Math.min(r,Math.ceil(1048576/e));for(let me=0;me<r;me+=Ae){const ae=Math.min(Ae,r-me),we=R.getImageData(c-X,me+(L-B),e,ae),Ce=s.getImageData(c,me+L,e,ae);Y&&h(we.data,$,Z,ee),ue(we.data,Ce.data,p),s.putImageData(Ce,c,me+L)}}(s.context,e,p,c,s.subtype,s.backdrop,s.transferMap,o,d,s.offsetX,s.offsetY),R.save(),R.globalAlpha=1,R.globalCompositeOperation="source-over",R.setTransform(1,0,0,1,0,0),R.drawImage(e.canvas,0,0),R.restore())}(this.suspendedCtx,this.current.activeSMask,this.ctx,s),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}save(){this.inSMaskMode?(f(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const s=this.current;this.stateStack.push(s),this.current=s.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),f(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(s,e,r,o,d,p){this.ctx.transform(s,e,r,o,d,p),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(s,e,r){const o=this.ctx,d=this.current;let L,X,p=d.x,c=d.y;const B=o.mozCurrentTransform,Y=0===B[0]&&0===B[3]||0===B[1]&&0===B[2],$=Y?r.slice(0):null;for(let Z=0,ee=0,ue=s.length;Z<ue;Z++)switch(0|s[Z]){case t.OPS.rectangle:p=e[ee++],c=e[ee++];const _e=e[ee++],Ae=e[ee++],me=p+_e,ae=c+Ae;o.moveTo(p,c),0===_e||0===Ae?o.lineTo(me,ae):(o.lineTo(me,c),o.lineTo(me,ae),o.lineTo(p,ae)),Y||d.updateRectMinMax(B,[p,c,me,ae]),o.closePath();break;case t.OPS.moveTo:p=e[ee++],c=e[ee++],o.moveTo(p,c),Y||d.updatePathMinMax(B,p,c);break;case t.OPS.lineTo:p=e[ee++],c=e[ee++],o.lineTo(p,c),Y||d.updatePathMinMax(B,p,c);break;case t.OPS.curveTo:L=p,X=c,p=e[ee+4],c=e[ee+5],o.bezierCurveTo(e[ee],e[ee+1],e[ee+2],e[ee+3],p,c),d.updateCurvePathMinMax(B,L,X,e[ee],e[ee+1],e[ee+2],e[ee+3],p,c,$),ee+=6;break;case t.OPS.curveTo2:L=p,X=c,o.bezierCurveTo(p,c,e[ee],e[ee+1],e[ee+2],e[ee+3]),d.updateCurvePathMinMax(B,L,X,p,c,e[ee],e[ee+1],e[ee+2],e[ee+3],$),p=e[ee+2],c=e[ee+3],ee+=4;break;case t.OPS.curveTo3:L=p,X=c,p=e[ee+2],c=e[ee+3],o.bezierCurveTo(e[ee],e[ee+1],p,c,p,c),d.updateCurvePathMinMax(B,L,X,e[ee],e[ee+1],p,c,p,c,$),ee+=4;break;case t.OPS.closePath:o.closePath()}Y&&d.updateScalingPathMinMax(B,$),d.setCurrentPoint(p,c)}closePath(){this.ctx.closePath()}stroke(s){s=!(typeof s<"u")||s;const e=this.ctx,r=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof r&&r?.getPattern?(e.save(),e.strokeStyle=r.getPattern(e,this,e.mozCurrentTransformInverse,O.PathType.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),s&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(s){s=!(typeof s<"u")||s;const e=this.ctx,r=this.current.fillColor;let d=!1;this.current.patternFill&&(e.save(),e.fillStyle=r.getPattern(e,this,e.mozCurrentTransformInverse,O.PathType.FILL),d=!0);const p=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==p&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),d&&e.restore(),s&&this.consumePath(p)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=te}eoClip(){this.pendingClip=he}beginText(){this.current.textMatrix=t.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const s=this.pendingTextPaths,e=this.ctx;if(void 0!==s){e.save(),e.beginPath();for(let r=0;r<s.length;r++){const o=s[r];e.setTransform.apply(e,o.transform),e.translate(o.x,o.y),o.addToPath(e,o.fontSize)}e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}else e.beginPath()}setCharSpacing(s){this.current.charSpacing=s}setWordSpacing(s){this.current.wordSpacing=s}setHScale(s){this.current.textHScale=s/100}setLeading(s){this.current.leading=-s}setFont(s,e){const r=this.commonObjs.get(s),o=this.current;if(!r)throw new Error(`Can't find font for ${s}`);if(o.fontMatrix=r.fontMatrix||t.FONT_IDENTITY_MATRIX,(0===o.fontMatrix[0]||0===o.fontMatrix[3])&&(0,t.warn)("Invalid font matrix for font "+s),e<0?(e=-e,o.fontDirection=-1):o.fontDirection=1,this.current.font=r,this.current.fontSize=e,r.isType3Font)return;let p="normal";r.black?p="900":r.bold&&(p="bold");const c=r.italic?"italic":"normal",L=`"${r.loadedName||"sans-serif"}", ${r.fallbackName}`;let X=e;e<16?X=16:e>100&&(X=100),this.current.fontSizeScale=e/X,this.ctx.font=`${c} ${p} ${X}px ${L}`}setTextRenderingMode(s){this.current.textRenderingMode=s}setTextRise(s){this.current.textRise=s}moveText(s,e){this.current.x=this.current.lineX+=s,this.current.y=this.current.lineY+=e}setLeadingMoveText(s,e){this.setLeading(-e),this.moveText(s,e)}setTextMatrix(s,e,r,o,d,p){this.current.textMatrix=[s,e,r,o,d,p],this.current.textMatrixScale=Math.hypot(s,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(s,e,r,o){const d=this.ctx,p=this.current,c=p.font,L=p.textRenderingMode,X=p.fontSize/p.fontSizeScale,B=L&t.TextRenderingMode.FILL_STROKE_MASK,Y=!!(L&t.TextRenderingMode.ADD_TO_PATH_FLAG),$=p.patternFill&&!c.missingFile;let Z;(c.disableFontFace||Y||$)&&(Z=c.getPathGenerator(this.commonObjs,s)),c.disableFontFace||$?(d.save(),d.translate(e,r),d.beginPath(),Z(d,X),o&&d.setTransform.apply(d,o),(B===t.TextRenderingMode.FILL||B===t.TextRenderingMode.FILL_STROKE)&&d.fill(),(B===t.TextRenderingMode.STROKE||B===t.TextRenderingMode.FILL_STROKE)&&d.stroke(),d.restore()):((B===t.TextRenderingMode.FILL||B===t.TextRenderingMode.FILL_STROKE)&&d.fillText(s,e,r),(B===t.TextRenderingMode.STROKE||B===t.TextRenderingMode.FILL_STROKE)&&d.strokeText(s,e,r)),Y&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:d.mozCurrentTransform,x:e,y:r,fontSize:X,addToPath:Z})}get isFontSubpixelAAEnabled(){const{context:s}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10,!1);s.scale(1.5,1),s.fillText("I",0,10);const e=s.getImageData(0,0,10,10).data;let r=!1;for(let o=3;o<e.length;o+=4)if(e[o]>0&&e[o]<255){r=!0;break}return(0,t.shadow)(this,"isFontSubpixelAAEnabled",r)}showText(s){const e=this.current,r=e.font;if(r.isType3Font)return this.showType3Text(s);const o=e.fontSize;if(0===o)return;const d=this.ctx,p=e.fontSizeScale,c=e.charSpacing,L=e.wordSpacing,X=e.fontDirection,B=e.textHScale*X,Y=s.length,$=r.vertical,Z=$?1:-1,ee=r.defaultVMetrics,ue=o*e.fontMatrix[0],_e=e.textRenderingMode===t.TextRenderingMode.FILL&&!r.disableFontFace&&!e.patternFill;let Ae;if(d.save(),d.transform.apply(d,e.textMatrix),d.translate(e.x,e.y+e.textRise),d.scale(B,X>0?-1:1),e.patternFill){d.save();const pe=e.fillColor.getPattern(d,this,d.mozCurrentTransformInverse,O.PathType.FILL);Ae=d.mozCurrentTransform,d.restore(),d.fillStyle=pe}let me=e.lineWidth;const ae=e.textMatrixScale;if(0===ae||0===me){const pe=e.textRenderingMode&t.TextRenderingMode.FILL_STROKE_MASK;(pe===t.TextRenderingMode.STROKE||pe===t.TextRenderingMode.FILL_STROKE)&&(me=this.getSinglePixelWidth())}else me/=ae;1!==p&&(d.scale(p,p),me/=p),d.lineWidth=me;let Ce,we=0;for(Ce=0;Ce<Y;++Ce){const pe=s[Ce];if("number"==typeof pe){we+=Z*pe*o/1e3;continue}let se=!1;const de=(pe.isSpace?L:0)+c,be=pe.fontChar,ne=pe.accent;let T,K,ge,le=pe.width;if($){const z=pe.vmetric||ee,D=-(pe.vmetric?z[1]:.5*le)*ue;le=z?-z[0]:le,T=D/p,K=(we+z[2]*ue)/p}else T=we/p,K=0;if(r.remeasure&&le>0){const z=1e3*d.measureText(be).width/o*p;if(le<z&&this.isFontSubpixelAAEnabled){const D=le/z;se=!0,d.save(),d.scale(D,1),T/=D}else le!==z&&(T+=(le-z)/2e3*o/p)}this.contentVisible&&(pe.isInFont||r.missingFile)&&(_e&&!ne?d.fillText(be,T,K):(this.paintChar(be,T,K,Ae),ne&&this.paintChar(ne.fontChar,T+o*ne.offset.x/p,K-o*ne.offset.y/p,Ae))),ge=$?le*ue-de*X:le*ue+de*X,we+=ge,se&&d.restore()}$?e.y-=we:e.x+=we*B,d.restore(),this.compose()}showType3Text(s){const e=this.ctx,r=this.current,o=r.font,d=r.fontSize,p=r.fontDirection,c=o.vertical?1:-1,L=r.charSpacing,X=r.wordSpacing,B=r.textHScale*p,Y=r.fontMatrix||t.FONT_IDENTITY_MATRIX,$=s.length;let ee,ue,_e,Ae;if(r.textRenderingMode!==t.TextRenderingMode.INVISIBLE&&0!==d){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,e.save(),e.transform.apply(e,r.textMatrix),e.translate(r.x,r.y),e.scale(B,p),ee=0;ee<$;++ee){if(ue=s[ee],"number"==typeof ue){Ae=c*ue*d/1e3,this.ctx.translate(Ae,0),r.x+=Ae*B;continue}const me=(ue.isSpace?X:0)+L,ae=o.charProcOperatorList[ue.operatorListId];ae?(this.contentVisible&&(this.processingType3=ue,this.save(),e.scale(d,d),e.transform.apply(e,Y),this.executeOperatorList(ae),this.restore()),_e=t.Util.applyTransform([ue.width,0],Y)[0]*d+me,e.translate(_e,0),r.x+=_e*B):(0,t.warn)(`Type3 character "${ue.operatorListId}" is not available.`)}e.restore(),this.processingType3=null}}setCharWidth(s,e){}setCharWidthAndBounds(s,e,r,o,d,p){this.ctx.rect(r,o,d-r,p-o),this.ctx.clip(),this.endPath()}getColorN_Pattern(s){let e;if("TilingPattern"===s[0]){const r=s[1],o=this.baseTransform||this.ctx.mozCurrentTransform.slice();e=new O.TilingPattern(s,r,this.ctx,{createCanvasGraphics:p=>new oe(p,this.commonObjs,this.objs,this.canvasFactory)},o)}else e=this._getPattern(s[1],s[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(s,e,r){const o=this.selectColor?.(s,e,r)||t.Util.makeHexColor(s,e,r);this.ctx.strokeStyle=o,this.current.strokeColor=o}setFillRGBColor(s,e,r){const o=this.selectColor?.(s,e,r)||t.Util.makeHexColor(s,e,r);this.ctx.fillStyle=o,this.current.fillColor=o,this.current.patternFill=!1}_getPattern(s,e=null){let r;return this.cachedPatterns.has(s)?r=this.cachedPatterns.get(s):(r=(0,O.getShadingPattern)(this.objs.get(s)),this.cachedPatterns.set(s,r)),e&&(r.matrix=e),r}shadingFill(s){if(!this.contentVisible)return;const e=this.ctx;this.save();const r=this._getPattern(s);e.fillStyle=r.getPattern(e,this,e.mozCurrentTransformInverse,O.PathType.SHADING);const o=e.mozCurrentTransformInverse;if(o){const d=e.canvas,p=d.width,c=d.height,L=t.Util.applyTransform([0,0],o),X=t.Util.applyTransform([0,c],o),B=t.Util.applyTransform([p,0],o),Y=t.Util.applyTransform([p,c],o),$=Math.min(L[0],X[0],B[0],Y[0]),Z=Math.min(L[1],X[1],B[1],Y[1]),ee=Math.max(L[0],X[0],B[0],Y[0]),ue=Math.max(L[1],X[1],B[1],Y[1]);this.ctx.fillRect($,Z,ee-$,ue-Z)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,t.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,t.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(s,e){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(s)&&6===s.length&&this.transform.apply(this,s),this.baseTransform=this.ctx.mozCurrentTransform,e)&&(this.ctx.rect(e[0],e[1],e[2]-e[0],e[3]-e[1]),this.current.updateRectMinMax(this.ctx.mozCurrentTransform,e),this.clip(),this.endPath())}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(s){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;s.isolated||(0,t.info)("TODO: Support non-isolated groups."),s.knockout&&(0,t.warn)("Knockout groups not supported.");const r=e.mozCurrentTransform;if(s.matrix&&e.transform.apply(e,s.matrix),!s.bbox)throw new Error("Bounding box is required.");let o=t.Util.getAxialAlignedBoundingBox(s.bbox,e.mozCurrentTransform);o=t.Util.intersect(o,[0,0,e.canvas.width,e.canvas.height])||[0,0,0,0];const p=Math.floor(o[0]),c=Math.floor(o[1]);let L=Math.max(Math.ceil(o[2])-p,1),X=Math.max(Math.ceil(o[3])-c,1),B=1,Y=1;L>I&&(B=L/I,L=I),X>I&&(Y=X/I,X=I),this.current.startNewPathAndClipBox([0,0,L,X]);let $="groupAt"+this.groupLevel;s.smask&&($+="_smask_"+this.smaskCounter++%2);const Z=this.cachedCanvases.getCanvas($,L,X,!0),ee=Z.context;ee.scale(1/B,1/Y),ee.translate(-p,-c),ee.transform.apply(ee,r),s.smask?this.smaskStack.push({canvas:Z.canvas,context:ee,offsetX:p,offsetY:c,scaleX:B,scaleY:Y,subtype:s.smask.subtype,backdrop:s.smask.backdrop,transferMap:s.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(p,c),e.scale(B,Y),e.save()),f(e,ee),this.ctx=ee,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(s){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,s.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const o=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,o);const d=t.Util.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],o);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(d)}}beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}endAnnotations(){this.restore()}beginAnnotation(s,e,r,o,d){if(this.save(),Array.isArray(e)&&4===e.length){const p=e[2]-e[0],c=e[3]-e[1];if(d&&this.annotationCanvasMap){(r=r.slice())[4]-=e[0],r[5]-=e[1],(e=e.slice())[0]=e[1]=0,e[2]=p,e[3]=c;const[L,X]=t.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),{viewportScale:B}=this,Y=Math.ceil(p*this.outputScaleX*B),$=Math.ceil(c*this.outputScaleY*B);this.annotationCanvas=this.canvasFactory.create(Y,$);const{canvas:Z,context:ee}=this.annotationCanvas,ue=`var(--zoom-factor) * ${k.PixelsPerInch.PDF_TO_CSS_UNITS}`;Z.style.width=`calc(${p}px * ${ue})`,Z.style.height=`calc(${c}px * ${ue})`,this.annotationCanvasMap.set(s,Z),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ee,this.ctx.setTransform(L,0,0,-X,0,c*X),w(this.ctx),m(this.ctx,this.foregroundColor)}else m(this.ctx,this.foregroundColor),this.ctx.rect(e[0],e[1],p,c),this.ctx.clip(),this.endPath()}this.current=new i(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,r),this.transform.apply(this,o)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas),this.restore()}paintImageMaskXObject(s){if(!this.contentVisible)return;const e=s.count;(s=this.getObject(s.data,s)).count=e;const r=this.ctx,o=this.processingType3;if(o&&(void 0===o.compiled&&(o.compiled=function n(R){const{width:s,height:e}=R;if(s>1e3||e>1e3)return null;const o=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),d=s+1;let c,L,X,p=new Uint8Array(d*(e+1));const B=s+7&-8;let Y=new Uint8Array(B*e),$=0;for(const ae of R.data){let we=128;for(;we>0;)Y[$++]=ae&we?0:255,we>>=1}let Z=0;for($=0,0!==Y[$]&&(p[0]=1,++Z),L=1;L<s;L++)Y[$]!==Y[$+1]&&(p[L]=Y[$]?2:1,++Z),$++;for(0!==Y[$]&&(p[L]=2,++Z),c=1;c<e;c++){$=c*B,X=c*d,Y[$-B]!==Y[$]&&(p[X]=Y[$]?1:8,++Z);let ae=(Y[$]?4:0)+(Y[$-B]?8:0);for(L=1;L<s;L++)ae=(ae>>2)+(Y[$+1]?4:0)+(Y[$-B+1]?8:0),o[ae]&&(p[X+L]=o[ae],++Z),$++;if(Y[$-B]!==Y[$]&&(p[X+L]=Y[$]?2:4,++Z),Z>1e3)return null}for($=B*(e-1),X=c*d,0!==Y[$]&&(p[X]=8,++Z),L=1;L<s;L++)Y[$]!==Y[$+1]&&(p[X+L]=Y[$]?4:8,++Z),$++;if(0!==Y[$]&&(p[X+L]=4,++Z),Z>1e3)return null;const ee=new Int32Array([0,d,-1,0,-d,0,0,0,1]);let ue,_e,Ae;for(H.isNodeJS?_e=[]:ue=new Path2D,c=0;Z&&c<=e;c++){let ae=c*d;const we=ae+s;for(;ae<we&&!p[ae];)ae++;if(ae===we)continue;ue?ue.moveTo(ae%d,c):Ae=[ae%d,c];const Ce=ae;let pe=p[ae];do{const se=ee[pe];do{ae+=se}while(!p[ae]);const de=p[ae];5!==de&&10!==de?(pe=de,p[ae]=0):(pe=de&51*pe>>4,p[ae]&=pe>>2|pe<<2),ue?ue.lineTo(ae%d,ae/d|0):Ae.push(ae%d,ae/d|0),p[ae]||--Z}while(Ce!==ae);ue||_e.push(Ae),--c}return Y=null,p=null,function(ae){if(ae.save(),ae.scale(1/s,-1/e),ae.translate(0,-e),ue)ae.fill(ue);else{ae.beginPath();for(const we of _e){ae.moveTo(we[0],we[1]);for(let Ce=2,pe=we.length;Ce<pe;Ce+=2)ae.lineTo(we[Ce],we[Ce+1])}ae.fill()}ae.beginPath(),ae.restore()}}(s)),o.compiled))return void o.compiled(r);const d=this._createMaskCanvas(s),p=d.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(p,d.offsetX,d.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(s,e,r=0,o=0,d,p){if(!this.contentVisible)return;s=this.getObject(s.data,s);const c=this.ctx;c.save();const L=c.mozCurrentTransform;c.transform(e,r,o,d,0,0);const X=this._createMaskCanvas(s);c.setTransform(1,0,0,1,0,0);for(let B=0,Y=p.length;B<Y;B+=2){const $=t.Util.transform(L,[e,r,o,d,p[B],p[B+1]]),[Z,ee]=t.Util.applyTransform([0,0],$);c.drawImage(X.canvas,Z,ee)}c.restore(),this.compose()}paintImageMaskXObjectGroup(s){if(!this.contentVisible)return;const e=this.ctx,r=this.current.fillColor,o=this.current.patternFill;for(let d=0,p=s.length;d<p;d++){const c=s[d],L=c.width,X=c.height,B=this.cachedCanvases.getCanvas("maskCanvas",L,X,!1),Y=B.context;Y.save(),P(Y,c),Y.globalCompositeOperation="source-in",Y.fillStyle=o?r.getPattern(Y,this,e.mozCurrentTransformInverse,O.PathType.FILL):r,Y.fillRect(0,0,L,X),Y.restore(),e.save(),e.transform.apply(e,c.transform),e.scale(1,-1),S(e,B.canvas,0,0,L,X,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(s){if(!this.contentVisible)return;const e=this.getObject(s);e?this.paintInlineImageXObject(e):(0,t.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(s,e,r,o){if(!this.contentVisible)return;const d=this.getObject(s);if(!d)return void(0,t.warn)("Dependent image isn't ready yet");const p=d.width,c=d.height,L=[];for(let X=0,B=o.length;X<B;X+=2)L.push({transform:[e,0,0,r,o[X],o[X+1]],x:0,y:0,w:p,h:c});this.paintInlineImageXObjectGroup(d,L)}paintInlineImageXObject(s){if(!this.contentVisible)return;const e=s.width,r=s.height,o=this.ctx;let d;if(this.save(),o.scale(1/e,-1/r),"function"==typeof HTMLElement&&s instanceof HTMLElement||!s.data)d=s;else{const X=this.cachedCanvases.getCanvas("inlineImage",e,r,!1);u(X.context,s,this.current.transferMaps),d=X.canvas}const p=this._scaleImage(d,o.mozCurrentTransformInverse);o.imageSmoothingEnabled=q(o.mozCurrentTransform,s.interpolate);const[c,L]=S(o,p.img,0,0,p.paintWidth,p.paintHeight,0,-r,e,r);if(this.imageLayer){const X=this.getCanvasPosition(0,-r);this.imageLayer.appendImage({imgData:s,left:X[0],top:X[1],width:c,height:L})}this.compose(),this.restore()}paintInlineImageXObjectGroup(s,e){if(!this.contentVisible)return;const r=this.ctx,o=s.width,d=s.height,p=this.cachedCanvases.getCanvas("inlineImage",o,d,!1);u(p.context,s,this.current.transferMaps);for(let L=0,X=e.length;L<X;L++){const B=e[L];if(r.save(),r.transform.apply(r,B.transform),r.scale(1,-1),S(r,p.canvas,B.x,B.y,B.w,B.h,0,-1,1,1),this.imageLayer){const Y=this.getCanvasPosition(B.x,B.y);this.imageLayer.appendImage({imgData:s,left:Y[0],top:Y[1],width:o,height:d})}r.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(s){}markPointProps(s,e){}beginMarkedContent(s){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(s,e){this.markedContentStack.push("OC"===s?{visible:this.optionalContentConfig.isVisible(e)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(s){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const r=this.ctx;this.pendingClip&&(e||(this.pendingClip===he?r.clip("evenodd"):r.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),r.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const s=this.ctx.mozCurrentTransform;if(0===s[1]&&0===s[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(s[0]),Math.abs(s[3]));else{const e=Math.abs(s[0]*s[3]-s[2]*s[1]),r=Math.hypot(s[0],s[2]),o=Math.hypot(s[1],s[3]);this._cachedGetSinglePixelWidth=Math.max(r,o)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:s}=this.current,e=this.ctx.mozCurrentTransform;let r,o;if(0===e[1]&&0===e[2]){const d=Math.abs(e[0]),p=Math.abs(e[3]);if(0===s)r=1/d,o=1/p;else{const c=d*s,L=p*s;r=c<1?1/c:1,o=L<1?1/L:1}}else{const d=Math.abs(e[0]*e[3]-e[2]*e[1]),p=Math.hypot(e[0],e[1]),c=Math.hypot(e[2],e[3]);if(0===s)r=c/d,o=p/d;else{const L=s*d;r=c>L?c/L:1,o=p>L?p/L:1}}this._cachedScaleForStroking=[r,o]}return this._cachedScaleForStroking}rescaleAndStroke(s){const{ctx:e}=this,{lineWidth:r}=this.current,[o,d]=this.getScaleForStroking();if(e.lineWidth=r||1,1===o&&1===d)return void e.stroke();let p,c,L;s&&(p=e.mozCurrentTransform.slice(),c=e.getLineDash().slice(),L=e.lineDashOffset),e.scale(o,d);const X=Math.max(o,d);e.setLineDash(e.getLineDash().map(B=>B/X)),e.lineDashOffset/=X,e.stroke(),s&&(e.setTransform(...p),e.setLineDash(c),e.lineDashOffset=L)}getCanvasPosition(s,e){const r=this.ctx.mozCurrentTransform;return[r[0]*s+r[2]*e+r[4],r[1]*s+r[3]*e+r[5]]}isContentVisible(){for(let s=this.markedContentStack.length-1;s>=0;s--)if(!this.markedContentStack[s].visible)return!1;return!0}}a.CanvasGraphics=oe;for(const R in t.OPS)void 0!==oe.prototype[R]&&(oe.prototype[t.OPS[R]]=oe.prototype[R])},(j,a,C)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TilingPattern=a.PathType=void 0,a.getShadingPattern=function N(x){switch(x[0]){case"RadialAxial":return new E(x);case"Mesh":return new U(x);case"Dummy":return new G}throw new Error(`Unknown IR type: ${x[0]}`)};var t=C(1),O=C(3);const F={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function H(x,b){if(!b||O.isNodeJS)return;const w=b[2]-b[0],A=b[3]-b[1],S=new Path2D;S.rect(b[0],b[1],w,A),x.clip(S)}a.PathType=F;class k{constructor(){this.constructor===k&&(0,t.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,t.unreachable)("Abstract method `getPattern` called.")}}class E extends k{constructor(b){super(),this._type=b[1],this._bbox=b[2],this._colorStops=b[3],this._p0=b[4],this._p1=b[5],this._r0=b[6],this._r1=b[7],this.matrix=null}_createGradient(b){let w;"axial"===this._type?w=b.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(w=b.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const A of this._colorStops)w.addColorStop(A[0],A[1]);return w}getPattern(b,w,A,S){let n;if(S===F.STROKE||S===F.FILL){const i=w.current.getClippedPathBoundingBox(S,b.mozCurrentTransform)||[0,0,0,0],u=Math.ceil(i[2]-i[0])||1,P=Math.ceil(i[3]-i[1])||1,f=w.cachedCanvases.getCanvas("pattern",u,P,!0),m=f.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-i[0],-i[1]),A=t.Util.transform(A,[1,0,0,1,i[0],i[1]]),m.transform.apply(m,w.baseTransform),this.matrix&&m.transform.apply(m,this.matrix),H(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),n=b.createPattern(f.canvas,"no-repeat");const h=new DOMMatrix(A);try{n.setTransform(h)}catch(l){(0,t.warn)(`RadialAxialShadingPattern.getPattern: "${l?.message}".`)}}else H(b,this._bbox),n=this._createGradient(b);return n}}function v(x,b,w,A,S,n,i,u){const P=b.coords,f=b.colors,m=x.data,h=4*x.width;let l;P[w+1]>P[A+1]&&(l=w,w=A,A=l,l=n,n=i,i=l),P[A+1]>P[S+1]&&(l=A,A=S,S=l,l=i,i=u,u=l),P[w+1]>P[A+1]&&(l=w,w=A,A=l,l=n,n=i,i=l);const _=(P[w]+b.offsetX)*b.scaleX,y=(P[w+1]+b.offsetY)*b.scaleY,M=(P[A]+b.offsetX)*b.scaleX,q=(P[A+1]+b.offsetY)*b.scaleY,Q=(P[S]+b.offsetX)*b.scaleX,J=(P[S+1]+b.offsetY)*b.scaleY;if(y>=J)return;const te=f[n],he=f[n+1],oe=f[n+2],R=f[i],s=f[i+1],e=f[i+2],r=f[u],o=f[u+1],d=f[u+2],p=Math.round(y),c=Math.round(J);let L,X,B,Y,$,Z,ee,ue;for(let _e=p;_e<=c;_e++){if(_e<q){let Ce;Ce=_e<y?0:(y-_e)/(y-q),L=_-(_-M)*Ce,X=te-(te-R)*Ce,B=he-(he-s)*Ce,Y=oe-(oe-e)*Ce}else{let Ce;Ce=_e>J?1:q===J?0:(q-_e)/(q-J),L=M-(M-Q)*Ce,X=R-(R-r)*Ce,B=s-(s-o)*Ce,Y=e-(e-d)*Ce}let Ae;Ae=_e<y?0:_e>J?1:(y-_e)/(y-J),$=_-(_-Q)*Ae,Z=te-(te-r)*Ae,ee=he-(he-o)*Ae,ue=oe-(oe-d)*Ae;const me=Math.round(Math.min(L,$)),ae=Math.round(Math.max(L,$));let we=h*_e+4*me;for(let Ce=me;Ce<=ae;Ce++)Ae=(L-Ce)/(L-$),Ae<0?Ae=0:Ae>1&&(Ae=1),m[we++]=X-(X-Z)*Ae|0,m[we++]=B-(B-ee)*Ae|0,m[we++]=Y-(Y-ue)*Ae|0,m[we++]=255}}function I(x,b,w){const A=b.coords,S=b.colors;let n,i;switch(b.type){case"lattice":const u=b.verticesPerRow,P=Math.floor(A.length/u)-1,f=u-1;for(n=0;n<P;n++){let m=n*u;for(let h=0;h<f;h++,m++)v(x,w,A[m],A[m+1],A[m+u],S[m],S[m+1],S[m+u]),v(x,w,A[m+u+1],A[m+1],A[m+u],S[m+u+1],S[m+1],S[m+u])}break;case"triangles":for(n=0,i=A.length;n<i;n+=3)v(x,w,A[n],A[n+1],A[n+2],S[n],S[n+1],S[n+2]);break;default:throw new Error("illegal figure")}}class U extends k{constructor(b){super(),this._coords=b[2],this._colors=b[3],this._figures=b[4],this._bounds=b[5],this._bbox=b[7],this._background=b[8],this.matrix=null}_createMeshCanvas(b,w,A){const u=Math.floor(this._bounds[0]),P=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,m=Math.ceil(this._bounds[3])-P,h=Math.min(Math.ceil(Math.abs(f*b[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(m*b[1]*1.1)),3e3),_=f/h,y=m/l,M={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-P,scaleX:1/_,scaleY:1/y},J=A.getCanvas("mesh",h+4,l+4,!1),te=J.context,he=te.createImageData(h,l);if(w){const R=he.data;for(let s=0,e=R.length;s<e;s+=4)R[s]=w[0],R[s+1]=w[1],R[s+2]=w[2],R[s+3]=255}for(const R of this._figures)I(he,R,M);return te.putImageData(he,2,2),{canvas:J.canvas,offsetX:u-2*_,offsetY:P-2*y,scaleX:_,scaleY:y}}getPattern(b,w,A,S){let n;if(H(b,this._bbox),S===F.SHADING)n=t.Util.singularValueDecompose2dScale(b.mozCurrentTransform);else if(n=t.Util.singularValueDecompose2dScale(w.baseTransform),this.matrix){const u=t.Util.singularValueDecompose2dScale(this.matrix);n=[n[0]*u[0],n[1]*u[1]]}const i=this._createMeshCanvas(n,S===F.SHADING?null:this._background,w.cachedCanvases);return S!==F.SHADING&&(b.setTransform.apply(b,w.baseTransform),this.matrix&&b.transform.apply(b,this.matrix)),b.translate(i.offsetX,i.offsetY),b.scale(i.scaleX,i.scaleY),b.createPattern(i.canvas,"no-repeat")}}class G extends k{getPattern(){return"hotpink"}}class g{static get MAX_PATTERN_SIZE(){return(0,t.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(b,w,A,S,n){this.operatorList=b[2],this.matrix=b[3]||[1,0,0,1,0,0],this.bbox=b[4],this.xstep=b[5],this.ystep=b[6],this.paintType=b[7],this.tilingType=b[8],this.color=w,this.ctx=A,this.canvasGraphicsFactory=S,this.baseTransform=n}createPatternCanvas(b){const w=this.operatorList,A=this.bbox,S=this.xstep,n=this.ystep,i=this.paintType,P=this.color,f=this.canvasGraphicsFactory;(0,t.info)("TilingType: "+this.tilingType);const m=A[0],h=A[1],l=A[2],_=A[3],y=t.Util.singularValueDecompose2dScale(this.matrix),M=t.Util.singularValueDecompose2dScale(this.baseTransform),q=[y[0]*M[0],y[1]*M[1]],Q=this.getSizeAndScale(S,this.ctx.canvas.width,q[0]),J=this.getSizeAndScale(n,this.ctx.canvas.height,q[1]),te=b.cachedCanvases.getCanvas("pattern",Q.size,J.size,!0),he=te.context,oe=f.createCanvasGraphics(he);oe.groupLevel=b.groupLevel,this.setFillAndStrokeStyleToContext(oe,i,P);let R=m,s=h,e=l,r=_;return m<0&&(R=0,e+=Math.abs(m)),h<0&&(s=0,r+=Math.abs(h)),he.translate(-Q.scale*R,-J.scale*s),oe.transform(Q.scale,0,0,J.scale,0,0),he.save(),this.clipBbox(oe,R,s,e,r),oe.baseTransform=oe.ctx.mozCurrentTransform.slice(),oe.executeOperatorList(w),oe.endDrawing(),{canvas:te.canvas,scaleX:Q.scale,scaleY:J.scale,offsetX:R,offsetY:s}}getSizeAndScale(b,w,A){b=Math.abs(b);const S=Math.max(g.MAX_PATTERN_SIZE,w);let n=Math.ceil(b*A);return n>=S?n=S:A=n/b,{scale:A,size:n}}clipBbox(b,w,A,S,n){b.ctx.rect(w,A,S-w,n-A),b.current.updateRectMinMax(b.ctx.mozCurrentTransform,[w,A,S,n]),b.clip(),b.endPath()}setFillAndStrokeStyleToContext(b,w,A){const S=b.ctx,n=b.current;switch(w){case 1:const i=this.ctx;S.fillStyle=i.fillStyle,S.strokeStyle=i.strokeStyle,n.fillColor=i.fillStyle,n.strokeColor=i.strokeStyle;break;case 2:const u=t.Util.makeHexColor(A[0],A[1],A[2]);S.fillStyle=u,S.strokeStyle=u,n.fillColor=u,n.strokeColor=u;break;default:throw new t.FormatError(`Unsupported paint type: ${w}`)}}getPattern(b,w,A,S){let n=A;S!==F.SHADING&&(n=t.Util.transform(n,w.baseTransform),this.matrix&&(n=t.Util.transform(n,this.matrix)));const i=this.createPatternCanvas(w);let u=new DOMMatrix(n);u=u.translate(i.offsetX,i.offsetY),u=u.scale(1/i.scaleX,1/i.scaleY);const P=b.createPattern(i.canvas,"repeat");try{P.setTransform(u)}catch(f){(0,t.warn)(`TilingPattern.getPattern: "${f?.message}".`)}return P}}a.TilingPattern=g},(j,a,C)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.applyMaskImageData=function O({src:F,srcPos:H=0,dest:k,destPos:E=0,width:v,height:I,inverseDecode:U=!1}){const G=t.FeatureTest.isLittleEndian?4278190080:255,[N,W]=U?[0,G]:[G,0],g=v>>3,x=7&v,b=F.length;k=new Uint32Array(k.buffer);for(let w=0;w<I;w++){for(const S=H+g;H<S;H++){const n=H<b?F[H]:255;k[E++]=128&n?W:N,k[E++]=64&n?W:N,k[E++]=32&n?W:N,k[E++]=16&n?W:N,k[E++]=8&n?W:N,k[E++]=4&n?W:N,k[E++]=2&n?W:N,k[E++]=1&n?W:N}if(0===x)continue;const A=H<b?F[H++]:255;for(let S=0;S<x;S++)k[E++]=A&1<<7-S?W:N}return{srcPos:H,destPos:E}};var t=C(1)},(j,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.GlobalWorkerOptions=void 0;const C=Object.create(null);a.GlobalWorkerOptions=C,C.workerPort=void 0===C.workerPort?null:C.workerPort,C.workerSrc=void 0===C.workerSrc?"":C.workerSrc},(j,a,C)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.MessageHandler=void 0;var t=C(1);function H(E){switch(E instanceof Error||"object"==typeof E&&null!==E||(0,t.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),E.name){case"AbortException":return new t.AbortException(E.message);case"MissingPDFException":return new t.MissingPDFException(E.message);case"PasswordException":return new t.PasswordException(E.message,E.code);case"UnexpectedResponseException":return new t.UnexpectedResponseException(E.message,E.status);case"UnknownErrorException":return new t.UnknownErrorException(E.message,E.details);default:return new t.UnknownErrorException(E.message,E.toString())}}a.MessageHandler=class k{constructor(v,I,U){this.sourceName=v,this.targetName=I,this.comObj=U,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=G=>{const N=G.data;if(N.targetName!==this.sourceName)return;if(N.stream)return void this._processStreamMessage(N);if(N.callback){const g=N.callbackId,x=this.callbackCapabilities[g];if(!x)throw new Error(`Cannot resolve callback ${g}`);if(delete this.callbackCapabilities[g],1===N.callback)x.resolve(N.data);else{if(2!==N.callback)throw new Error("Unexpected callback case");x.reject(H(N.reason))}return}const W=this.actionHandler[N.action];if(!W)throw new Error(`Unknown action from worker: ${N.action}`);if(N.callbackId){const g=this.sourceName,x=N.sourceName;new Promise(function(b){b(W(N.data))}).then(function(b){U.postMessage({sourceName:g,targetName:x,callback:1,callbackId:N.callbackId,data:b})},function(b){U.postMessage({sourceName:g,targetName:x,callback:2,callbackId:N.callbackId,reason:H(b)})})}else N.streamId?this._createStreamSink(N):W(N.data)},U.addEventListener("message",this._onComObjOnMessage)}on(v,I){const U=this.actionHandler;if(U[v])throw new Error(`There is already an actionName called "${v}"`);U[v]=I}send(v,I,U){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:v,data:I},U)}sendWithPromise(v,I,U){const G=this.callbackId++,N=(0,t.createPromiseCapability)();this.callbackCapabilities[G]=N;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:v,callbackId:G,data:I},U)}catch(W){N.reject(W)}return N.promise}sendWithStream(v,I,U,G){const N=this.streamId++,W=this.sourceName,g=this.targetName,x=this.comObj;return new ReadableStream({start:b=>{const w=(0,t.createPromiseCapability)();return this.streamControllers[N]={controller:b,startCall:w,pullCall:null,cancelCall:null,isClosed:!1},x.postMessage({sourceName:W,targetName:g,action:v,streamId:N,data:I,desiredSize:b.desiredSize},G),w.promise},pull:b=>{const w=(0,t.createPromiseCapability)();return this.streamControllers[N].pullCall=w,x.postMessage({sourceName:W,targetName:g,stream:6,streamId:N,desiredSize:b.desiredSize}),w.promise},cancel:b=>{(0,t.assert)(b instanceof Error,"cancel must have a valid reason");const w=(0,t.createPromiseCapability)();return this.streamControllers[N].cancelCall=w,this.streamControllers[N].isClosed=!0,x.postMessage({sourceName:W,targetName:g,stream:1,streamId:N,reason:H(b)}),w.promise}},U)}_createStreamSink(v){const I=v.streamId,U=this.sourceName,G=v.sourceName,N=this.comObj,W=this,g=this.actionHandler[v.action],x={enqueue(b,w=1,A){if(this.isCancelled)return;const S=this.desiredSize;this.desiredSize-=w,S>0&&this.desiredSize<=0&&(this.sinkCapability=(0,t.createPromiseCapability)(),this.ready=this.sinkCapability.promise),N.postMessage({sourceName:U,targetName:G,stream:4,streamId:I,chunk:b},A)},close(){this.isCancelled||(this.isCancelled=!0,N.postMessage({sourceName:U,targetName:G,stream:3,streamId:I}),delete W.streamSinks[I])},error(b){(0,t.assert)(b instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,N.postMessage({sourceName:U,targetName:G,stream:5,streamId:I,reason:H(b)}))},sinkCapability:(0,t.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:v.desiredSize,ready:null};x.sinkCapability.resolve(),x.ready=x.sinkCapability.promise,this.streamSinks[I]=x,new Promise(function(b){b(g(v.data,x))}).then(function(){N.postMessage({sourceName:U,targetName:G,stream:8,streamId:I,success:!0})},function(b){N.postMessage({sourceName:U,targetName:G,stream:8,streamId:I,reason:H(b)})})}_processStreamMessage(v){const I=v.streamId,U=this.sourceName,G=v.sourceName,N=this.comObj,W=this.streamControllers[I],g=this.streamSinks[I];switch(v.stream){case 8:v.success?W.startCall.resolve():W.startCall.reject(H(v.reason));break;case 7:v.success?W.pullCall.resolve():W.pullCall.reject(H(v.reason));break;case 6:if(!g){N.postMessage({sourceName:U,targetName:G,stream:7,streamId:I,success:!0});break}g.desiredSize<=0&&v.desiredSize>0&&g.sinkCapability.resolve(),g.desiredSize=v.desiredSize,new Promise(function(x){x(g.onPull&&g.onPull())}).then(function(){N.postMessage({sourceName:U,targetName:G,stream:7,streamId:I,success:!0})},function(x){N.postMessage({sourceName:U,targetName:G,stream:7,streamId:I,reason:H(x)})});break;case 4:if((0,t.assert)(W,"enqueue should have stream controller"),W.isClosed)break;W.controller.enqueue(v.chunk);break;case 3:if((0,t.assert)(W,"close should have stream controller"),W.isClosed)break;W.isClosed=!0,W.controller.close(),this._deleteStreamController(W,I);break;case 5:(0,t.assert)(W,"error should have stream controller"),W.controller.error(H(v.reason)),this._deleteStreamController(W,I);break;case 2:v.success?W.cancelCall.resolve():W.cancelCall.reject(H(v.reason)),this._deleteStreamController(W,I);break;case 1:if(!g)break;new Promise(function(x){x(g.onCancel&&g.onCancel(H(v.reason)))}).then(function(){N.postMessage({sourceName:U,targetName:G,stream:2,streamId:I,success:!0})},function(x){N.postMessage({sourceName:U,targetName:G,stream:2,streamId:I,reason:H(x)})}),g.sinkCapability.reject(H(v.reason)),g.isCancelled=!0,delete this.streamSinks[I];break;default:throw new Error("Unexpected stream case")}}_deleteStreamController(v,I){var U=this;return _asyncToGenerator(function*(){yield Promise.allSettled([v.startCall&&v.startCall.promise,v.pullCall&&v.pullCall.promise,v.cancelCall&&v.cancelCall.promise]),delete U.streamControllers[I]})()}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(j,a,C)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Metadata=void 0;var t=C(1),O=new WeakMap,F=new WeakMap;a.Metadata=class H{constructor({parsedData:E,rawData:v}){_classPrivateFieldInitSpec(this,O,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,F,{writable:!0,value:void 0}),_classPrivateFieldSet(this,O,E),_classPrivateFieldSet(this,F,v)}getRaw(){return _classPrivateFieldGet(this,F)}get(E){return _classPrivateFieldGet(this,O).get(E)??null}getAll(){return(0,t.objectFromMap)(_classPrivateFieldGet(this,O))}has(E){return _classPrivateFieldGet(this,O).has(E)}}},(j,a,C)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OptionalContentConfig=void 0;var t=C(1);class O{constructor(k,E){this.visible=!0,this.name=k,this.intent=E}}a.OptionalContentConfig=class F{constructor(k){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,null!==k){this.name=k.name,this.creator=k.creator,this._order=k.order;for(const E of k.groups)this._groups.set(E.id,new O(E.name,E.intent));if("OFF"===k.baseState)for(const E of this._groups)E.visible=!1;for(const E of k.on)this._groups.get(E).visible=!0;for(const E of k.off)this._groups.get(E).visible=!1}}_evaluateVisibilityExpression(k){const E=k.length;if(E<2)return!0;const v=k[0];for(let I=1;I<E;I++){const U=k[I];let G;if(Array.isArray(U))G=this._evaluateVisibilityExpression(U);else{if(!this._groups.has(U))return(0,t.warn)(`Optional content group not found: ${U}`),!0;G=this._groups.get(U).visible}switch(v){case"And":if(!G)return!1;break;case"Or":if(G)return!0;break;case"Not":return!G;default:return!0}}return"And"===v}isVisible(k){if(0===this._groups.size)return!0;if(!k)return(0,t.warn)("Optional content group not defined."),!0;if("OCG"===k.type)return this._groups.has(k.id)?this._groups.get(k.id).visible:((0,t.warn)(`Optional content group not found: ${k.id}`),!0);if("OCMD"===k.type){if(k.expression)return this._evaluateVisibilityExpression(k.expression);if(!k.policy||"AnyOn"===k.policy){for(const E of k.ids){if(!this._groups.has(E))return(0,t.warn)(`Optional content group not found: ${E}`),!0;if(this._groups.get(E).visible)return!0}return!1}if("AllOn"===k.policy){for(const E of k.ids){if(!this._groups.has(E))return(0,t.warn)(`Optional content group not found: ${E}`),!0;if(!this._groups.get(E).visible)return!1}return!0}if("AnyOff"===k.policy){for(const E of k.ids){if(!this._groups.has(E))return(0,t.warn)(`Optional content group not found: ${E}`),!0;if(!this._groups.get(E).visible)return!0}return!1}if("AllOff"===k.policy){for(const E of k.ids){if(!this._groups.has(E))return(0,t.warn)(`Optional content group not found: ${E}`),!0;if(this._groups.get(E).visible)return!1}return!0}return(0,t.warn)(`Unknown optional content policy ${k.policy}.`),!0}return(0,t.warn)(`Unknown group type ${k.type}.`),!0}setVisibility(k,E=!0){this._groups.has(k)?this._groups.get(k).visible=!!E:(0,t.warn)(`Optional content group not found: ${k}`)}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size>0?(0,t.objectFromMap)(this._groups):null}getGroup(k){return this._groups.get(k)||null}}},(j,a,C)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFDataTransportStream=void 0;var t=C(1),O=C(5);a.PDFDataTransportStream=class F{constructor(v,I){(0,t.assert)(I,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=v.progressiveDone||!1,this._contentDispositionFilename=v.contentDispositionFilename||null;const U=v.initialData;if(U?.length>0){const G=new Uint8Array(U).buffer;this._queuedChunks.push(G)}this._pdfDataRangeTransport=I,this._isStreamingSupported=!v.disableStream,this._isRangeSupported=!v.disableRange,this._contentLength=v.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((G,N)=>{this._onReceiveData({begin:G,chunk:N})}),this._pdfDataRangeTransport.addProgressListener((G,N)=>{this._onProgress({loaded:G,total:N})}),this._pdfDataRangeTransport.addProgressiveReadListener(G=>{this._onReceiveData({chunk:G})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(v){const I=new Uint8Array(v.chunk).buffer;if(void 0===v.begin)this._fullRequestReader?this._fullRequestReader._enqueue(I):this._queuedChunks.push(I);else{const U=this._rangeReaders.some(function(G){return G._begin===v.begin&&(G._enqueue(I),!0)});(0,t.assert)(U,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(v){if(void 0===v.total){const I=this._rangeReaders[0];I?.onProgress&&I.onProgress({loaded:v.loaded})}else{const I=this._fullRequestReader;I?.onProgress&&I.onProgress({loaded:v.loaded,total:v.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(v){const I=this._rangeReaders.indexOf(v);I>=0&&this._rangeReaders.splice(I,1)}getFullReader(){(0,t.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const v=this._queuedChunks;return this._queuedChunks=null,new H(this,v,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(v,I){if(I<=this._progressiveDataLength)return null;const U=new k(this,v,I);return this._pdfDataRangeTransport.requestDataRange(v,I),this._rangeReaders.push(U),U}cancelAllRequests(v){this._fullRequestReader&&this._fullRequestReader.cancel(v);for(const I of this._rangeReaders.slice(0))I.cancel(v);this._pdfDataRangeTransport.abort()}};class H{constructor(v,I,U=!1,G=null){this._stream=v,this._done=U||!1,this._filename=(0,O.isPdfFile)(G)?G:null,this._queuedChunks=I||[],this._loaded=0;for(const N of this._queuedChunks)this._loaded+=N.byteLength;this._requests=[],this._headersReady=Promise.resolve(),v._fullRequestReader=this,this.onProgress=null}_enqueue(v){this._done||(this._requests.length>0?this._requests.shift().resolve({value:v,done:!1}):this._queuedChunks.push(v),this._loaded+=v.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var v=this;return _asyncToGenerator(function*(){if(v._queuedChunks.length>0)return{value:v._queuedChunks.shift(),done:!1};if(v._done)return{value:void 0,done:!0};const I=(0,t.createPromiseCapability)();return v._requests.push(I),I.promise})()}cancel(v){this._done=!0;for(const I of this._requests)I.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class k{constructor(v,I,U){this._stream=v,this._begin=I,this._end=U,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(v){if(!this._done){if(0===this._requests.length)this._queuedChunk=v;else{this._requests.shift().resolve({value:v,done:!1});for(const U of this._requests)U.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var v=this;return _asyncToGenerator(function*(){if(v._queuedChunk){const U=v._queuedChunk;return v._queuedChunk=null,{value:U,done:!1}}if(v._done)return{value:void 0,done:!0};const I=(0,t.createPromiseCapability)();return v._requests.push(I),I.promise})()}cancel(v){this._done=!0;for(const I of this._requests)I.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(j,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.XfaText=void 0;class C{static textContent(O){const F=[],H={items:F,styles:Object.create(null)};return function k(E){if(!E)return;let v=null;const I=E.name;if("#text"===I)v=E.value;else{if(!C.shouldBuildText(I))return;E?.attributes?.textContent?v=E.attributes.textContent:E.value&&(v=E.value)}if(null!==v&&F.push({str:v}),E.children)for(const U of E.children)k(U)}(O),H}static shouldBuildText(O){return!("textarea"===O||"input"===O||"option"===O||"select"===O)}}a.XfaText=C},(j,a,C)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NodeStandardFontDataFactory=a.NodeCanvasFactory=a.NodeCMapReaderFactory=void 0;var t=C(6);const O=function(E){return new Promise((v,I)=>{__webpack_require__(2339).readFile(E,(G,N)=>{!G&&N?v(new Uint8Array(N)):I(new Error(G))})})};a.NodeCanvasFactory=class F extends t.BaseCanvasFactory{_createCanvas(v,I){return __webpack_require__(837).createCanvas(v,I)}},a.NodeCMapReaderFactory=class H extends t.BaseCMapReaderFactory{_fetchData(v,I){return O(v).then(U=>({cMapData:U,compressionType:I}))}},a.NodeStandardFontDataFactory=class k extends t.BaseStandardFontDataFactory{_fetchData(v){return O(v)}}},(j,a,C)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AnnotationLayer=void 0;var t=C(1),O=C(5),F=C(8),H=C(21),k=C(22);const E=1e3,v=new WeakSet;function I(s){return{width:s[2]-s[0],height:s[3]-s[1]}}class U{static create(e){switch(e.data.annotationType){case t.AnnotationType.LINK:return new N(e);case t.AnnotationType.TEXT:return new W(e);case t.AnnotationType.WIDGET:switch(e.data.fieldType){case"Tx":return new x(e);case"Btn":return e.data.radioButton?new w(e):e.data.checkBox?new b(e):new A(e);case"Ch":return new S(e)}return new g(e);case t.AnnotationType.POPUP:return new n(e);case t.AnnotationType.FREETEXT:return new u(e);case t.AnnotationType.LINE:return new P(e);case t.AnnotationType.SQUARE:return new f(e);case t.AnnotationType.CIRCLE:return new m(e);case t.AnnotationType.POLYLINE:return new h(e);case t.AnnotationType.CARET:return new _(e);case t.AnnotationType.INK:return new y(e);case t.AnnotationType.POLYGON:return new l(e);case t.AnnotationType.HIGHLIGHT:return new M(e);case t.AnnotationType.UNDERLINE:return new q(e);case t.AnnotationType.SQUIGGLY:return new Q(e);case t.AnnotationType.STRIKEOUT:return new J(e);case t.AnnotationType.STAMP:return new te(e);case t.AnnotationType.FILEATTACHMENT:return new he(e);default:return new G(e)}}}class G{constructor(e,{isRenderable:r=!1,ignoreBorder:o=!1,createQuadrilaterals:d=!1}={}){this.isRenderable=r,this.data=e.data,this.layer=e.layer,this.page=e.page,this.viewport=e.viewport,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this._mouseState=e.mouseState,r&&(this.container=this._createContainer(o)),d&&(this.quadrilaterals=this._createQuadrilaterals(o))}_createContainer(e=!1){const r=this.data,o=this.page,d=this.viewport,p=document.createElement("section");let{width:c,height:L}=I(r.rect);p.setAttribute("data-annotation-id",r.id);const X=t.Util.normalizeRect([r.rect[0],o.view[3]-r.rect[1]+o.view[1],r.rect[2],o.view[3]-r.rect[3]+o.view[1]]);if(r.hasOwnCanvas){const B=d.transform.slice(),[Y,$]=t.Util.singularValueDecompose2dScale(B);c=Math.ceil(c*Y),L=Math.ceil(L*$),X[0]*=Y,X[1]*=$;for(let Z=0;Z<4;Z++)B[Z]=Math.sign(B[Z]);p.style.transform=`matrix(${B.join(",")})`}else p.style.transform=`matrix(${d.transform.join(",")})`;if(p.style.transformOrigin=`${-X[0]}px ${-X[1]}px`,!e&&r.borderStyle.width>0){p.style.borderWidth=`${r.borderStyle.width}px`,r.borderStyle.style!==t.AnnotationBorderStyleType.UNDERLINE&&(c-=2*r.borderStyle.width,L-=2*r.borderStyle.width);const B=r.borderStyle.horizontalCornerRadius,Y=r.borderStyle.verticalCornerRadius;switch((B>0||Y>0)&&(p.style.borderRadius=`${B}px / ${Y}px`),r.borderStyle.style){case t.AnnotationBorderStyleType.SOLID:p.style.borderStyle="solid";break;case t.AnnotationBorderStyleType.DASHED:p.style.borderStyle="dashed";break;case t.AnnotationBorderStyleType.BEVELED:(0,t.warn)("Unimplemented border style: beveled");break;case t.AnnotationBorderStyleType.INSET:(0,t.warn)("Unimplemented border style: inset");break;case t.AnnotationBorderStyleType.UNDERLINE:p.style.borderBottomStyle="solid"}r.borderColor||r.color?p.style.borderColor=t.Util.makeHexColor(0|r.color[0],0|r.color[1],0|r.color[2]):p.style.borderWidth=0}return p.style.left=`${X[0]}px`,p.style.top=`${X[1]}px`,r.hasOwnCanvas?p.style.width=p.style.height="auto":(p.style.width=`${c}px`,p.style.height=`${L}px`),p}get _commonActions(){const e=(r,o,d)=>{const p=d.detail[r];d.target.style[o]=H.ColorConverters[`${p[0]}_HTML`](p.slice(1))};return(0,t.shadow)(this,"_commonActions",{display:r=>{const o=r.detail.display%2==1;r.target.style.visibility=o?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:o,print:0===r.detail.display||3===r.detail.display})},print:r=>{this.annotationStorage.setValue(this.data.id,{print:r.detail.print})},hidden:r=>{r.target.style.visibility=r.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:r.detail.hidden})},focus:r=>{setTimeout(()=>r.target.focus({preventScroll:!1}),0)},userName:r=>{r.target.title=r.detail.userName},readonly:r=>{r.detail.readonly?r.target.setAttribute("readonly",""):r.target.removeAttribute("readonly")},required:r=>{r.detail.required?r.target.setAttribute("required",""):r.target.removeAttribute("required")},bgColor:r=>{e("bgColor","backgroundColor",r)},fillColor:r=>{e("fillColor","backgroundColor",r)},fgColor:r=>{e("fgColor","color",r)},textColor:r=>{e("textColor","color",r)},borderColor:r=>{e("borderColor","borderColor",r)},strokeColor:r=>{e("strokeColor","borderColor",r)}})}_dispatchEventFromSandbox(e,r){const o=this._commonActions;for(const d of Object.keys(r.detail)){const p=e[d]||o[d];p&&p(r)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const r=this.annotationStorage.getRawValue(this.data.id);if(!r)return;const o=this._commonActions;for(const[d,p]of Object.entries(r)){const c=o[d];c&&(c({detail:p,target:e}),delete r[d])}}_createQuadrilaterals(e=!1){if(!this.data.quadPoints)return null;const r=[],o=this.data.rect;for(const d of this.data.quadPoints)this.data.rect=[d[2].x,d[2].y,d[1].x,d[1].y],r.push(this._createContainer(e));return this.data.rect=o,r}_createPopup(e,r){let o=this.container;this.quadrilaterals&&(e=e||this.quadrilaterals,o=this.quadrilaterals[0]),e||((e=document.createElement("div")).style.height=o.style.height,e.style.width=o.style.width,o.appendChild(e));const p=new i({container:o,trigger:e,color:r.color,titleObj:r.titleObj,modificationDate:r.modificationDate,contentsObj:r.contentsObj,richText:r.richText,hideWrapper:!0}).render();p.style.left=o.style.width,o.appendChild(p)}_renderQuadrilaterals(e){for(const r of this.quadrilaterals)r.className=e;return this.quadrilaterals}render(){(0,t.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,r=null){const o=[];if(this._fieldObjects){const d=this._fieldObjects[e];if(d)for(const{page:p,id:c,exportValues:L}of d){if(-1===p||c===r)continue;const X="string"==typeof L?L:null,B=document.getElementById(c);!B||v.has(B)?o.push({id:c,exportValue:X,domElement:B}):(0,t.warn)(`_getElementsByName - element not allowed: ${c}`)}return o}for(const d of document.getElementsByName(e)){const{id:p,exportValue:c}=d;p!==r&&v.has(d)&&o.push({id:p,exportValue:c,domElement:d})}return o}static get platform(){const e=typeof navigator<"u"?navigator.platform:"";return(0,t.shadow)(this,"platform",{isWin:e.includes("Win"),isMac:e.includes("Mac")})}}class N extends G{constructor(e,r=null){super(e,{isRenderable:!!(e.data.url||e.data.dest||e.data.action||e.data.isTooltipOnly||e.data.resetForm||e.data.actions&&(e.data.actions.Action||e.data.actions["Mouse Up"]||e.data.actions["Mouse Down"])),ignoreBorder:!!r?.ignoreBorder,createQuadrilaterals:!0})}render(){const{data:e,linkService:r}=this,o=document.createElement("a");if(e.url)r.addLinkAttributes(o,e.url,e.newWindow);else if(e.action)this._bindNamedAction(o,e.action);else if(e.dest)this._bindLink(o,e.dest);else{let d=!1;e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(d=!0,this._bindJSAction(o,e)),e.resetForm?this._bindResetFormAction(o,e.resetForm):d||this._bindLink(o,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((d,p)=>{const c=0===p?o:o.cloneNode();return d.appendChild(c),d}):(this.container.className="linkAnnotation",this.container.appendChild(o),this.container)}_bindLink(e,r){e.href=this.linkService.getDestinationHash(r),e.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||""===r)&&(e.className="internalLink")}_bindNamedAction(e,r){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(r),!1),e.className="internalLink"}_bindJSAction(e,r){e.href=this.linkService.getAnchorUrl("");const o=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const d of Object.keys(r.actions)){const p=o.get(d);p&&(e[p]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:d}}),!1))}e.onclick||(e.onclick=()=>!1),e.className="internalLink"}_bindResetFormAction(e,r){const o=e.onclick;if(o||(e.href=this.linkService.getAnchorUrl("")),e.className="internalLink",!this._fieldObjects)return(0,t.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(o||(e.onclick=()=>!1));e.onclick=()=>{o&&o();const{fields:d,refs:p,include:c}=r,L=[];if(0!==d.length||0!==p.length){const Y=new Set(p);for(const $ of d){const Z=this._fieldObjects[$]||[];for(const{id:ee}of Z)Y.add(ee)}for(const $ of Object.values(this._fieldObjects))for(const Z of $)Y.has(Z.id)===c&&L.push(Z)}else for(const Y of Object.values(this._fieldObjects))L.push(...Y);const X=this.annotationStorage,B=[];for(const Y of L){const{id:$}=Y;switch(B.push($),Y.type){case"text":case"combobox":case"listbox":X.setValue($,{value:Y.defaultValue||""});break;case"checkbox":case"radiobutton":X.setValue($,{value:Y.defaultValue===Y.exportValues});break;default:continue}const Z=document.getElementById($);!Z||!v.has(Z)||Z.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:B,name:"ResetForm"}}),!1}}}class W extends G{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str)})}render(){this.container.className="textAnnotation";const e=document.createElement("img");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.alt="[{{type}} Annotation]",e.dataset.l10nId="text_annotation_type",e.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(e,this.data),this.container.appendChild(e),this.container}}class g extends G{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(e){const{isWin:r,isMac:o}=G.platform;return r&&e.ctrlKey||o&&e.metaKey}_setEventListener(e,r,o,d){r.includes("mouse")?e.addEventListener(r,p=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:o,value:d(p),shift:p.shiftKey,modifier:this._getKeyModifier(p)}})}):e.addEventListener(r,p=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:o,value:d(p)}})})}_setEventListeners(e,r,o){for(const[d,p]of r)("Action"===p||this.data.actions?.[p])&&this._setEventListener(e,d,p,o)}_setBackgroundColor(e){const r=this.data.backgroundColor||null;e.style.backgroundColor=null===r?"transparent":t.Util.makeHexColor(r[0],r[1],r[2])}}class x extends g{constructor(e){super(e,{isRenderable:e.renderForms||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,r,o,d){const p=this.annotationStorage;for(const c of this._getElementsByName(e.name,e.id))c.domElement&&(c.domElement[r]=o),p.setValue(c.id,{[d]:o})}render(){const e=this.annotationStorage,r=this.data.id;this.container.className="textWidgetAnnotation";let o=null;if(this.renderForms){const d=e.getValue(r,{value:this.data.fieldValue}),p=d.formattedValue||d.value||"",c={userValue:null,formattedValue:null,valueOnFocus:""};this.data.multiLine?(o=document.createElement("textarea"),o.textContent=p):(o=document.createElement("input"),o.type="text",o.setAttribute("value",p)),v.add(o),o.disabled=this.data.readOnly,o.name=this.data.fieldName,o.tabIndex=E,c.userValue=p,o.setAttribute("id",r),o.addEventListener("input",X=>{e.setValue(r,{value:X.target.value}),this.setPropertyOnSiblings(o,"value",X.target.value,"value")}),o.addEventListener("resetform",X=>{o.value=c.userValue=this.data.defaultFieldValue??"",c.formattedValue=null});let L=X=>{const{formattedValue:B}=c;null!=B&&(X.target.value=B),X.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){o.addEventListener("focus",B=>{c.userValue&&(B.target.value=c.userValue),c.valueOnFocus=B.target.value}),o.addEventListener("updatefromsandbox",B=>{this._dispatchEventFromSandbox({value($){c.userValue=$.detail.value??"",e.setValue(r,{value:c.userValue.toString()}),$.target.value=c.userValue},formattedValue($){const{formattedValue:Z}=$.detail;c.formattedValue=Z,null!=Z&&$.target!==document.activeElement&&($.target.value=Z),e.setValue(r,{formattedValue:Z})},selRange($){$.target.setSelectionRange(...$.detail.selRange)}},B)}),o.addEventListener("keydown",B=>{let Y=-1;if("Escape"===B.key?Y=0:"Enter"===B.key?Y=2:"Tab"===B.key&&(Y=3),-1===Y)return;const{value:$}=B.target;c.valueOnFocus!==$&&(c.userValue=$,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:$,willCommit:!0,commitKey:Y,selStart:B.target.selectionStart,selEnd:B.target.selectionEnd}}))});const X=L;L=null,o.addEventListener("blur",B=>{const{value:Y}=B.target;c.userValue=Y,this._mouseState.isDown&&c.valueOnFocus!==Y&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:Y,willCommit:!0,commitKey:1,selStart:B.target.selectionStart,selEnd:B.target.selectionEnd}}),X(B)}),this.data.actions?.Keystroke&&o.addEventListener("beforeinput",B=>{const{data:Y,target:$}=B,{value:Z,selectionStart:ee,selectionEnd:ue}=$;let _e=ee,Ae=ue;switch(B.inputType){case"deleteWordBackward":{const me=Z.substring(0,ee).match(/\w*[^\w]*$/);me&&(_e-=me[0].length);break}case"deleteWordForward":{const me=Z.substring(ee).match(/^[^\w]*\w*/);me&&(Ae+=me[0].length);break}case"deleteContentBackward":ee===ue&&(_e-=1);break;case"deleteContentForward":ee===ue&&(Ae+=1)}B.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:Z,change:Y||"",willCommit:!1,selStart:_e,selEnd:Ae}})}),this._setEventListeners(o,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],B=>B.target.value)}if(L&&o.addEventListener("blur",L),null!==this.data.maxLen&&(o.maxLength=this.data.maxLen),this.data.comb){const B=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;o.classList.add("comb"),o.style.letterSpacing=`calc(${B}px - 1ch)`}}else o=document.createElement("div"),o.textContent=this.data.fieldValue,o.style.verticalAlign="middle",o.style.display="table-cell";return this._setTextStyle(o),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.appendChild(o),this.container}_setTextStyle(e){const{fontSize:o,fontColor:d}=this.data.defaultAppearanceData,p=e.style;o&&(p.fontSize=`${o}px`),p.color=t.Util.makeHexColor(d[0],d[1],d[2]),null!==this.data.textAlignment&&(p.textAlign=["left","center","right"][this.data.textAlignment])}}class b extends g{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,r=this.data,o=r.id;let d=e.getValue(o,{value:r.exportValue===r.fieldValue}).value;"string"==typeof d&&(d="Off"!==d,e.setValue(o,{value:d})),this.container.className="buttonWidgetAnnotation checkBox";const p=document.createElement("input");return v.add(p),p.disabled=r.readOnly,p.type="checkbox",p.name=r.fieldName,d&&p.setAttribute("checked",!0),p.setAttribute("id",o),p.setAttribute("exportValue",r.exportValue),p.tabIndex=E,p.addEventListener("change",c=>{const{name:L,checked:X}=c.target;for(const B of this._getElementsByName(L,o)){const Y=X&&B.exportValue===r.exportValue;B.domElement&&(B.domElement.checked=Y),e.setValue(B.id,{value:Y})}e.setValue(o,{value:X})}),p.addEventListener("resetform",c=>{c.target.checked=(r.defaultFieldValue||"Off")===r.exportValue}),this.enableScripting&&this.hasJSActions&&(p.addEventListener("updatefromsandbox",c=>{this._dispatchEventFromSandbox({value(X){X.target.checked="Off"!==X.detail.value,e.setValue(o,{value:X.target.checked})}},c)}),this._setEventListeners(p,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(p),this._setDefaultPropertiesFromJS(p),this.container.appendChild(p),this.container}}class w extends g{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const e=this.annotationStorage,r=this.data,o=r.id;let d=e.getValue(o,{value:r.fieldValue===r.buttonValue}).value;"string"==typeof d&&(d=d!==r.buttonValue,e.setValue(o,{value:d}));const p=document.createElement("input");if(v.add(p),p.disabled=r.readOnly,p.type="radio",p.name=r.fieldName,d&&p.setAttribute("checked",!0),p.setAttribute("id",o),p.tabIndex=E,p.addEventListener("change",c=>{const{name:L,checked:X}=c.target;for(const B of this._getElementsByName(L,o))e.setValue(B.id,{value:!1});e.setValue(o,{value:X})}),p.addEventListener("resetform",c=>{const L=r.defaultFieldValue;c.target.checked=null!=L&&L===r.buttonValue}),this.enableScripting&&this.hasJSActions){const c=r.buttonValue;p.addEventListener("updatefromsandbox",L=>{this._dispatchEventFromSandbox({value:B=>{const Y=c===B.detail.value;for(const $ of this._getElementsByName(B.target.name)){const Z=Y&&$.id===o;$.domElement&&($.domElement.checked=Z),e.setValue($.id,{value:Z})}}},L)}),this._setEventListeners(p,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],L=>L.target.checked)}return this._setBackgroundColor(p),this._setDefaultPropertiesFromJS(p),this.container.appendChild(p),this.container}}class A extends N{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();return e.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(e.title=this.data.alternativeText),this._setDefaultPropertiesFromJS(e),e}}class S extends g{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const e=this.annotationStorage,r=this.data.id,o=e.getValue(r,{value:this.data.fieldValue});let{fontSize:d}=this.data.defaultAppearanceData;d||(d=9);const p=`calc(${d}px * var(--zoom-factor))`,c=document.createElement("select");v.add(c),c.disabled=this.data.readOnly,c.name=this.data.fieldName,c.setAttribute("id",r),c.tabIndex=E,c.style.fontSize=`${d}px`,this.data.combo||(c.size=this.data.options.length,this.data.multiSelect&&(c.multiple=!0)),c.addEventListener("resetform",B=>{const Y=this.data.defaultFieldValue;for(const $ of c.options)$.selected=$.value===Y});for(const B of this.data.options){const Y=document.createElement("option");Y.textContent=B.displayValue,Y.value=B.exportValue,this.data.combo&&(Y.style.fontSize=p),o.value.includes(B.exportValue)&&Y.setAttribute("selected",!0),c.appendChild(Y)}const L=(B,Y)=>{const $=Y?"value":"textContent",Z=B.target.options;return B.target.multiple?Array.prototype.filter.call(Z,ee=>ee.selected).map(ee=>ee[$]):-1===Z.selectedIndex?null:Z[Z.selectedIndex][$]},X=B=>Array.prototype.map.call(B.target.options,$=>({displayValue:$.textContent,exportValue:$.value}));return this.enableScripting&&this.hasJSActions?(c.addEventListener("updatefromsandbox",B=>{this._dispatchEventFromSandbox({value($){const Z=$.detail.value,ee=new Set(Array.isArray(Z)?Z:[Z]);for(const ue of c.options)ue.selected=ee.has(ue.value);e.setValue(r,{value:L($,!0)})},multipleSelection($){c.multiple=!0},remove($){const Z=c.options,ee=$.detail.remove;Z[ee].selected=!1,c.remove(ee),Z.length>0&&-1===Array.prototype.findIndex.call(Z,_e=>_e.selected)&&(Z[0].selected=!0),e.setValue(r,{value:L($,!0),items:X($)})},clear($){for(;0!==c.length;)c.remove(0);e.setValue(r,{value:null,items:[]})},insert($){const{index:Z,displayValue:ee,exportValue:ue}=$.detail.insert,_e=document.createElement("option");_e.textContent=ee,_e.value=ue,c.insertBefore(_e,c.children[Z]),e.setValue(r,{value:L($,!0),items:X($)})},items($){const{items:Z}=$.detail;for(;0!==c.length;)c.remove(0);for(const ee of Z){const{displayValue:ue,exportValue:_e}=ee,Ae=document.createElement("option");Ae.textContent=ue,Ae.value=_e,c.appendChild(Ae)}c.options.length>0&&(c.options[0].selected=!0),e.setValue(r,{value:L($,!0),items:X($)})},indices($){const Z=new Set($.detail.indices);for(const ee of $.target.options)ee.selected=Z.has(ee.index);e.setValue(r,{value:L($,!0)})},editable($){$.target.disabled=!$.detail.editable}},B)}),c.addEventListener("input",B=>{const Y=L(B,!0),$=L(B,!1);e.setValue(r,{value:Y}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:$,changeEx:Y,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],B=>B.target.checked)):c.addEventListener("input",function(B){e.setValue(r,{value:L(B,!0)})}),this._setBackgroundColor(c),this._setDefaultPropertiesFromJS(c),this.container.appendChild(c),this.container}}class n extends G{constructor(e){super(e,{isRenderable:!!(e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str)})}render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const o=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(0===o.length)return this.container;const d=new i({container:this.container,trigger:Array.from(o),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),p=this.page,c=t.Util.normalizeRect([this.data.parentRect[0],p.view[3]-this.data.parentRect[1]+p.view[1],this.data.parentRect[2],p.view[3]-this.data.parentRect[3]+p.view[1]]),L=c[0]+this.data.parentRect[2]-this.data.parentRect[0],X=c[1];return this.container.style.transformOrigin=`${-L}px ${-X}px`,this.container.style.left=`${L}px`,this.container.style.top=`${X}px`,this.container.appendChild(d.render()),this.container}}class i{constructor(e){this.container=e.container,this.trigger=e.trigger,this.color=e.color,this.titleObj=e.titleObj,this.modificationDate=e.modificationDate,this.contentsObj=e.contentsObj,this.richText=e.richText,this.hideWrapper=e.hideWrapper||!1,this.pinned=!1}render(){const r=document.createElement("div");r.className="popupWrapper",this.hideElement=this.hideWrapper?r:this.container,this.hideElement.hidden=!0;const o=document.createElement("div");o.className="popup";const d=this.color;d&&(o.style.backgroundColor=t.Util.makeHexColor(0|.7*(255-d[0])+d[0],0|.7*(255-d[1])+d[1],0|.7*(255-d[2])+d[2]));const p=document.createElement("h1");p.dir=this.titleObj.dir,p.textContent=this.titleObj.str,o.appendChild(p);const c=O.PDFDateString.toDateObject(this.modificationDate);if(c){const L=document.createElement("span");L.className="popupDate",L.textContent="{{date}}, {{time}}",L.dataset.l10nId="annotation_date_string",L.dataset.l10nArgs=JSON.stringify({date:c.toLocaleDateString(),time:c.toLocaleTimeString()}),o.appendChild(L)}if(!this.richText?.str||this.contentsObj?.str&&this.contentsObj.str!==this.richText.str){const L=this._formatContents(this.contentsObj);o.appendChild(L)}else k.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:o}),o.lastChild.className="richText popupContent";Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const L of this.trigger)L.addEventListener("click",this._toggle.bind(this)),L.addEventListener("mouseover",this._show.bind(this,!1)),L.addEventListener("mouseout",this._hide.bind(this,!1));return o.addEventListener("click",this._hide.bind(this,!0)),r.appendChild(o),r}_formatContents({str:e,dir:r}){const o=document.createElement("p");o.className="popupContent",o.dir=r;const d=e.split(/(?:\r\n?|\n)/);for(let p=0,c=d.length;p<c;++p)o.appendChild(document.createTextNode(d[p])),p<c-1&&o.appendChild(document.createElement("br"));return o}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(e=!1){e&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}_hide(e=!0){e&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}class u extends G{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class P extends G{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const e=this.data,{width:r,height:o}=I(e.rect),d=this.svgFactory.create(r,o),p=this.svgFactory.createElement("svg:line");return p.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),p.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),p.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),p.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),p.setAttribute("stroke-width",e.borderStyle.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),d.appendChild(p),this.container.append(d),this._createPopup(p,e),this.container}}class f extends G{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const e=this.data,{width:r,height:o}=I(e.rect),d=this.svgFactory.create(r,o),p=e.borderStyle.width,c=this.svgFactory.createElement("svg:rect");return c.setAttribute("x",p/2),c.setAttribute("y",p/2),c.setAttribute("width",r-p),c.setAttribute("height",o-p),c.setAttribute("stroke-width",p||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),d.appendChild(c),this.container.append(d),this._createPopup(c,e),this.container}}class m extends G{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const e=this.data,{width:r,height:o}=I(e.rect),d=this.svgFactory.create(r,o),p=e.borderStyle.width,c=this.svgFactory.createElement("svg:ellipse");return c.setAttribute("cx",r/2),c.setAttribute("cy",o/2),c.setAttribute("rx",r/2-p/2),c.setAttribute("ry",o/2-p/2),c.setAttribute("stroke-width",p||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),d.appendChild(c),this.container.append(d),this._createPopup(c,e),this.container}}class h extends G{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const e=this.data,{width:r,height:o}=I(e.rect),d=this.svgFactory.create(r,o);let p=[];for(const L of e.vertices)p.push(L.x-e.rect[0]+","+(e.rect[3]-L.y));p=p.join(" ");const c=this.svgFactory.createElement(this.svgElementName);return c.setAttribute("points",p),c.setAttribute("stroke-width",e.borderStyle.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),d.appendChild(c),this.container.append(d),this._createPopup(c,e),this.container}}class l extends h{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class _ extends G{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class y extends G{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const e=this.data,{width:r,height:o}=I(e.rect),d=this.svgFactory.create(r,o);for(const p of e.inkLists){let c=[];for(const X of p)c.push(`${X.x-e.rect[0]},${e.rect[3]-X.y}`);c=c.join(" ");const L=this.svgFactory.createElement(this.svgElementName);L.setAttribute("points",c),L.setAttribute("stroke-width",e.borderStyle.width||1),L.setAttribute("stroke","transparent"),L.setAttribute("fill","transparent"),this._createPopup(L,e),d.appendChild(L)}return this.container.append(d),this.container}}class M extends G{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class q extends G{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class Q extends G{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class J extends G{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class te extends G{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class he extends G{constructor(e){super(e,{isRenderable:!0});const{filename:r,content:o}=this.data.file;this.filename=(0,O.getFilenameFromUrl)(r),this.content=o,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:r,content:o})}render(){this.container.className="fileAttachmentAnnotation";const e=document.createElement("div");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.titleObj?.str||this.data.contentsObj?.str||this.data.richText)&&this._createPopup(e,this.data),this.container.appendChild(e),this.container}_download(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class oe{static render(e){const r=[],o=[];for(const p of e.annotations){if(!p)continue;const{width:c,height:L}=I(p.rect);if(!(c<=0||L<=0)){if(p.annotationType===t.AnnotationType.POPUP){o.push(p);continue}r.push(p)}}o.length&&r.push(...o);const d=e.div;for(const p of r){const c=U.create({data:p,layer:d,page:e.page,viewport:e.viewport,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new O.DOMSVGFactory,annotationStorage:e.annotationStorage||new F.AnnotationStorage,enableScripting:e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,mouseState:e.mouseState||{isDown:!1}});if(c.isRenderable){const L=c.render();if(p.hidden&&(L.style.visibility="hidden"),Array.isArray(L))for(const X of L)d.appendChild(X);else c instanceof n?d.prepend(L):d.appendChild(L)}}_classStaticPrivateMethodGet(this,oe,R).call(this,d,e.annotationCanvasMap)}static update(e){const{page:r,viewport:o,annotations:d,annotationCanvasMap:p,div:c}=e,L=o.transform,X=`matrix(${L.join(",")})`;let B,Y;for(const $ of d){const Z=c.querySelectorAll(`[data-annotation-id="${$.id}"]`);if(Z)for(const ee of Z)if($.hasOwnCanvas){const ue=t.Util.normalizeRect([$.rect[0],r.view[3]-$.rect[1]+r.view[1],$.rect[2],r.view[3]-$.rect[3]+r.view[1]]);if(!Y){B=Math.abs(L[0]||L[1]);const me=L.slice();for(let ae=0;ae<4;ae++)me[ae]=Math.sign(me[ae]);Y=`matrix(${me.join(",")})`}const _e=ue[0]*B,Ae=ue[1]*B;ee.style.left=`${_e}px`,ee.style.top=`${Ae}px`,ee.style.transformOrigin=`${-_e}px ${-Ae}px`,ee.style.transform=Y}else ee.style.transform=X}_classStaticPrivateMethodGet(this,oe,R).call(this,c,p),c.hidden=!1}}function R(s,e){if(e){for(const[r,o]of e){const d=s.querySelector(`[data-annotation-id="${r}"]`);if(!d)continue;const{firstChild:p}=d;"CANVAS"===p.nodeName?d.replaceChild(o,p):d.insertBefore(o,p)}e.clear()}}a.AnnotationLayer=oe},(j,a)=>{function C(O){return Math.floor(255*Math.max(0,Math.min(1,O))).toString(16).padStart(2,"0")}Object.defineProperty(a,"__esModule",{value:!0}),a.ColorConverters=void 0,a.ColorConverters=class t{static CMYK_G([F,H,k,E]){return["G",1-Math.min(1,.3*F+.59*k+.11*H+E)]}static G_CMYK([F]){return["CMYK",0,0,0,1-F]}static G_RGB([F]){return["RGB",F,F,F]}static G_HTML([F]){const H=C(F);return`#${H}${H}${H}`}static RGB_G([F,H,k]){return["G",.3*F+.59*H+.11*k]}static RGB_HTML([F,H,k]){return`#${C(F)}${C(H)}${C(k)}`}static T_HTML(){return"#00000000"}static CMYK_RGB([F,H,k,E]){return["RGB",1-Math.min(1,F+E),1-Math.min(1,k+E),1-Math.min(1,H+E)]}static CMYK_HTML(F){return this.RGB_HTML(this.CMYK_RGB(F))}static RGB_CMYK([F,H,k]){const E=1-F,v=1-H,I=1-k;return["CMYK",E,v,I,Math.min(E,v,I)]}}},(j,a,C)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.XfaLayer=void 0;var t=C(18);a.XfaLayer=class O{static setupStorage(H,k,E,v,I){const U=v.getValue(k,{value:null});switch(E.name){case"textarea":if(null!==U.value&&(H.textContent=U.value),"print"===I)break;H.addEventListener("input",G=>{v.setValue(k,{value:G.target.value})});break;case"input":if("radio"===E.attributes.type||"checkbox"===E.attributes.type){if(U.value===E.attributes.xfaOn?H.setAttribute("checked",!0):U.value===E.attributes.xfaOff&&H.removeAttribute("checked"),"print"===I)break;H.addEventListener("change",G=>{v.setValue(k,{value:G.target.getAttribute(G.target.checked?"xfaOn":"xfaOff")})})}else{if(null!==U.value&&H.setAttribute("value",U.value),"print"===I)break;H.addEventListener("input",G=>{v.setValue(k,{value:G.target.value})})}break;case"select":if(null!==U.value)for(const G of E.children)G.attributes.value===U.value&&(G.attributes.selected=!0);H.addEventListener("input",G=>{const N=G.target.options;v.setValue(k,{value:-1===N.selectedIndex?"":N[N.selectedIndex].value})})}}static setAttributes({html:H,element:k,storage:E=null,intent:v,linkService:I}){const{attributes:U}=k,G=H instanceof HTMLAnchorElement;"radio"===U.type&&(U.name=`${U.name}-${v}`);for(const[N,W]of Object.entries(U))if(null!=W&&"dataId"!==N)if("style"!==N)if("textContent"===N)H.textContent=W;else if("class"===N)W.length&&H.setAttribute(N,W.join(" "));else{if(G&&("href"===N||"newWindow"===N))continue;H.setAttribute(N,W)}else Object.assign(H.style,W);G&&I.addLinkAttributes(H,U.href,U.newWindow),E&&U.dataId&&this.setupStorage(H,U.dataId,k,E)}static render(H){const k=H.annotationStorage,E=H.linkService,v=H.xfaHtml,I=H.intent||"display",U=document.createElement(v.name);v.attributes&&this.setAttributes({html:U,element:v,intent:I,linkService:E});const G=[[v,-1,U]],N=H.div;if(N.appendChild(U),H.viewport){const g=`matrix(${H.viewport.transform.join(",")})`;N.style.transform=g}"richText"!==I&&N.setAttribute("class","xfaLayer xfaFont");const W=[];for(;G.length>0;){const[g,x,b]=G[G.length-1];if(x+1===g.children.length){G.pop();continue}const w=g.children[++G[G.length-1][1]];if(null===w)continue;const{name:A}=w;if("#text"===A){const n=document.createTextNode(w.value);W.push(n),b.appendChild(n);continue}let S;if(S=w?.attributes?.xmlns?document.createElementNS(w.attributes.xmlns,A):document.createElement(A),b.appendChild(S),w.attributes&&this.setAttributes({html:S,element:w,storage:k,intent:I,linkService:E}),w.children&&w.children.length>0)G.push([w,-1,S]);else if(w.value){const n=document.createTextNode(w.value);t.XfaText.shouldBuildText(A)&&W.push(n),S.appendChild(n)}}for(const g of N.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:W}}static update(H){const k=`matrix(${H.viewport.transform.join(",")})`;H.div.style.transform=k,H.div.hidden=!1}}},(j,a,C)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.renderTextLayer=function b(w){const A=new x({textContent:w.textContent,textContentStream:w.textContentStream,container:w.container,viewport:w.viewport,textDivs:w.textDivs,textContentItemsStr:w.textContentItemsStr,enhanceTextSelection:w.enhanceTextSelection});return A._render(w.timeout),A};var t=C(1);const F=30,k=new Map,E=/^\s+$/g;function I(w,A,S,n){const i=document.createElement("span"),u=w._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==A.str,hasEOL:A.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:""!==A.str,hasEOL:A.hasEOL};w._textDivs.push(i);const P=t.Util.transform(w._viewport.transform,A.transform);let f=Math.atan2(P[1],P[0]);const m=S[A.fontName];m.vertical&&(f+=Math.PI/2);const h=Math.hypot(P[2],P[3]),l=h*function v(w,A){const S=k.get(w);if(S)return S;A.save(),A.font=`30px ${w}`;const n=A.measureText("");let i=n.fontBoundingBoxAscent,u=Math.abs(n.fontBoundingBoxDescent);if(i){A.restore();const f=i/(i+u);return k.set(w,f),f}A.strokeStyle="red",A.clearRect(0,0,F,F),A.strokeText("g",0,0);let P=A.getImageData(0,0,F,F).data;u=0;for(let f=P.length-1-3;f>=0;f-=4)if(P[f]>0){u=Math.ceil(f/4/F);break}A.clearRect(0,0,F,F),A.strokeText("A",0,F),P=A.getImageData(0,0,F,F).data,i=0;for(let f=0,m=P.length;f<m;f+=4)if(P[f]>0){i=F-Math.floor(f/4/F);break}if(A.restore(),i){const f=i/(i+u);return k.set(w,f),f}return k.set(w,.8),.8}(m.fontFamily,n);let _,y;0===f?(_=P[4],y=P[5]-l):(_=P[4]+l*Math.sin(f),y=P[5]-l*Math.cos(f)),i.style.left=`${_}px`,i.style.top=`${y}px`,i.style.fontSize=`${h}px`,i.style.fontFamily=m.fontFamily,i.setAttribute("role","presentation"),i.textContent=A.str,i.dir=A.dir,w._fontInspectorEnabled&&(i.dataset.fontName=A.fontName),0!==f&&(u.angle=f*(180/Math.PI));let M=!1;if(A.str.length>1||w._enhanceTextSelection&&E.test(A.str))M=!0;else if(" "!==A.str&&A.transform[0]!==A.transform[3]){const q=Math.abs(A.transform[0]),Q=Math.abs(A.transform[3]);q!==Q&&Math.max(q,Q)/Math.min(q,Q)>1.5&&(M=!0)}if(M&&(u.canvasWidth=m.vertical?A.height*w._viewport.scale:A.width*w._viewport.scale),w._textDivProperties.set(i,u),w._textContentStream&&w._layoutText(i),w._enhanceTextSelection&&u.hasText){let q=1,Q=0;0!==f&&(q=Math.cos(f),Q=Math.sin(f));const J=(m.vertical?A.height:A.width)*w._viewport.scale,te=h;let he,oe;0!==f?(he=[q,Q,-Q,q,_,y],oe=t.Util.getAxialAlignedBoundingBox([0,0,J,te],he)):oe=[_,y,_+J,y+te],w._bounds.push({left:oe[0],top:oe[1],right:oe[2],bottom:oe[3],div:i,size:[J,te],m:he})}}function U(w){if(w._canceled)return;const A=w._textDivs,S=w._capability,n=A.length;if(n>1e5)return w._renderingDone=!0,void S.resolve();if(!w._textContentStream)for(let i=0;i<n;i++)w._layoutText(A[i]);w._renderingDone=!0,S.resolve()}function G(w,A,S){let n=0;for(let i=0;i<S;i++){const u=w[A++];u>0&&(n=n?Math.min(u,n):u)}return n}function g(w,A){A.sort(function(i,u){return i.x1-u.x1||i.index-u.index});const n=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const i of A){let u=0;for(;u<n.length&&n[u].end<=i.y1;)u++;let P=n.length-1;for(;P>=0&&n[P].start>=i.y2;)P--;let f,m,h,l,_=-1/0;for(h=u;h<=P;h++){let q;f=n[h],m=f.boundary,q=m.x2>i.x1?m.index>i.index?m.x1New:i.x1:void 0===m.x2New?(m.x2+i.x1)/2:m.x2New,q>_&&(_=q)}for(i.x1New=_,h=u;h<=P;h++)f=n[h],m=f.boundary,void 0===m.x2New?m.x2>i.x1?m.index>i.index&&(m.x2New=m.x2):m.x2New=_:m.x2New>_&&(m.x2New=Math.max(_,m.x2));const y=[];let M=null;for(h=u;h<=P;h++){f=n[h],m=f.boundary;const q=m.x2>i.x2?m:i;M===q?y[y.length-1].end=f.end:(y.push({start:f.start,end:f.end,boundary:q}),M=q)}for(n[u].start<i.y1&&(y[0].start=i.y1,y.unshift({start:n[u].start,end:i.y1,boundary:n[u].boundary})),i.y2<n[P].end&&(y[y.length-1].end=i.y2,y.push({start:i.y2,end:n[P].end,boundary:n[P].boundary})),h=u;h<=P;h++){if(f=n[h],m=f.boundary,void 0!==m.x2New)continue;let q=!1;for(l=u-1;!q&&l>=0&&n[l].start>=m.y1;l--)q=n[l].boundary===m;for(l=P+1;!q&&l<n.length&&n[l].end<=m.y2;l++)q=n[l].boundary===m;for(l=0;!q&&l<y.length;l++)q=y[l].boundary===m;q||(m.x2New=_)}Array.prototype.splice.apply(n,[u,P-u+1].concat(y))}for(const i of n){const u=i.boundary;void 0===u.x2New&&(u.x2New=Math.max(w,u.x2))}}class x{constructor({textContent:A,textContentStream:S,container:n,viewport:i,textDivs:u,textContentItemsStr:P,enhanceTextSelection:f}){this._textContent=A,this._textContentStream=S,this._container=n,this._document=n.ownerDocument,this._viewport=i,this._textDivs=u||[],this._textContentItemsStr=P||[],this._enhanceTextSelection=!!f,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,t.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new t.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(A,S){for(let n=0,i=A.length;n<i;n++)if(void 0!==A[n].str)this._textContentItemsStr.push(A[n].str),I(this,A[n],S,this._layoutTextCtx);else if("beginMarkedContentProps"===A[n].type||"beginMarkedContent"===A[n].type){const u=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==A[n].id&&this._container.setAttribute("id",`${A[n].id}`),u.appendChild(this._container)}else"endMarkedContent"===A[n].type&&(this._container=this._container.parentNode)}_layoutText(A){const S=this._textDivProperties.get(A);let n="";if(0!==S.canvasWidth&&S.hasText){const{fontSize:i,fontFamily:u}=A.style;(i!==this._layoutTextLastFontSize||u!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${i} ${u}`,this._layoutTextLastFontSize=i,this._layoutTextLastFontFamily=u);const{width:P}=this._layoutTextCtx.measureText(A.textContent);if(P>0){const f=S.canvasWidth/P;this._enhanceTextSelection&&(S.scale=f),n=`scaleX(${f})`}}if(0!==S.angle&&(n=`rotate(${S.angle}deg) ${n}`),n.length>0&&(this._enhanceTextSelection&&(S.originalTransform=n),A.style.transform=n),S.hasText&&this._container.appendChild(A),S.hasEOL){const i=document.createElement("br");i.setAttribute("role","presentation"),this._container.appendChild(i)}}_render(A=0){const S=(0,t.createPromiseCapability)();let n=Object.create(null);const i=this._document.createElement("canvas");if(i.height=i.width=F,this._layoutTextCtx=i.getContext("2d",{alpha:!1}),this._textContent)this._processItems(this._textContent.items,this._textContent.styles),S.resolve();else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const u=()=>{this._reader.read().then(({value:P,done:f})=>{f?S.resolve():(Object.assign(n,P.styles),this._processItems(P.items,n),u())},S.reject)};this._reader=this._textContentStream.getReader(),u()}}S.promise.then(()=>{n=null,A?this._renderTimer=setTimeout(()=>{U(this),this._renderTimer=null},A):U(this)},this._capability.reject)}expandTextDivs(A=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(function N(w){const A=w._bounds,S=w._viewport,n=function W(w,A,S){const n=S.map(function(u,P){return{x1:u.left,y1:u.top,x2:u.right,y2:u.bottom,index:P,x1New:void 0,x2New:void 0}});g(w,n);const i=new Array(S.length);for(const u of n)i[u.index]={left:u.x1New,top:0,right:u.x2New,bottom:0};S.map(function(u,P){const f=i[P],m=n[P];m.x1=u.top,m.y1=w-f.right,m.x2=u.bottom,m.y2=w-f.left,m.index=P,m.x1New=void 0,m.x2New=void 0}),g(A,n);for(const u of n){const P=u.index;i[P].top=u.x1New,i[P].bottom=u.x2New}return i}(S.width,S.height,A);for(let i=0;i<n.length;i++){const u=A[i].div,P=w._textDivProperties.get(u);if(0===P.angle){P.paddingLeft=A[i].left-n[i].left,P.paddingTop=A[i].top-n[i].top,P.paddingRight=n[i].right-A[i].right,P.paddingBottom=n[i].bottom-A[i].bottom,w._textDivProperties.set(u,P);continue}const f=n[i],m=A[i],h=m.m,l=h[0],_=h[1],y=[[0,0],[0,m.size[1]],[m.size[0],0],m.size],M=new Float64Array(64);for(let Q=0,J=y.length;Q<J;Q++){const te=t.Util.applyTransform(y[Q],h);M[Q+0]=l&&(f.left-te[0])/l,M[Q+4]=_&&(f.top-te[1])/_,M[Q+8]=l&&(f.right-te[0])/l,M[Q+12]=_&&(f.bottom-te[1])/_,M[Q+16]=_&&(f.left-te[0])/-_,M[Q+20]=l&&(f.top-te[1])/l,M[Q+24]=_&&(f.right-te[0])/-_,M[Q+28]=l&&(f.bottom-te[1])/l,M[Q+32]=l&&(f.left-te[0])/-l,M[Q+36]=_&&(f.top-te[1])/-_,M[Q+40]=l&&(f.right-te[0])/-l,M[Q+44]=_&&(f.bottom-te[1])/-_,M[Q+48]=_&&(f.left-te[0])/_,M[Q+52]=l&&(f.top-te[1])/-l,M[Q+56]=_&&(f.right-te[0])/_,M[Q+60]=l&&(f.bottom-te[1])/-l}const q=1+Math.min(Math.abs(l),Math.abs(_));P.paddingLeft=G(M,32,16)/q,P.paddingTop=G(M,48,16)/q,P.paddingRight=G(M,0,16)/q,P.paddingBottom=G(M,16,16)/q,w._textDivProperties.set(u,P)}}(this),this._bounds=null);const S=[],n=[];for(let i=0,u=this._textDivs.length;i<u;i++){const P=this._textDivs[i],f=this._textDivProperties.get(P);f.hasText&&(A?(S.length=0,n.length=0,f.originalTransform&&S.push(f.originalTransform),f.paddingTop>0?(n.push(`${f.paddingTop}px`),S.push(`translateY(${-f.paddingTop}px)`)):n.push(0),n.push(f.paddingRight>0?f.paddingRight/f.scale+"px":0),n.push(f.paddingBottom>0?`${f.paddingBottom}px`:0),f.paddingLeft>0?(n.push(f.paddingLeft/f.scale+"px"),S.push(`translateX(${-f.paddingLeft/f.scale}px)`)):n.push(0),P.style.padding=n.join(" "),S.length&&(P.style.transform=S.join(" "))):(P.style.padding=null,P.style.transform=f.originalTransform))}}}},(j,a,C)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SVGGraphics=void 0;var t=C(1),O=C(5),F=C(3);let H=class{constructor(){(0,t.unreachable)("Not implemented: SVGGraphics")}};a.SVGGraphics=H;{let g=function(n){let i=[];const u=[];for(const P of n)"save"!==P.fn?"restore"===P.fn?i=u.pop():i.push(P):(i.push({fnId:92,fn:"group",items:[]}),u.push(i),i=i[i.length-1].items);return i},x=function(n){if(Number.isInteger(n))return n.toString();const i=n.toFixed(10);let u=i.length-1;if("0"!==i[u])return i;do{u--}while("0"===i[u]);return i.substring(0,"."===i[u]?u:u+1)},b=function(n){if(0===n[4]&&0===n[5]){if(0===n[1]&&0===n[2])return 1===n[0]&&1===n[3]?"":`scale(${x(n[0])} ${x(n[3])})`;if(n[0]===n[3]&&n[1]===-n[2]){const i=180*Math.acos(n[0])/Math.PI;return`rotate(${x(i)})`}}else if(1===n[0]&&0===n[1]&&0===n[2]&&1===n[3])return`translate(${x(n[4])} ${x(n[5])})`;return`matrix(${x(n[0])} ${x(n[1])} ${x(n[2])} ${x(n[3])} ${x(n[4])} ${x(n[5])})`};const k={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},E="http://www.w3.org/XML/1998/namespace",v="http://www.w3.org/1999/xlink",I=["butt","round","square"],U=["miter","round","bevel"],G=function(n,i="",u=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!u)return URL.createObjectURL(new Blob([n],{type:i}));const P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let f=`data:${i};base64,`;for(let m=0,h=n.length;m<h;m+=3){const l=255&n[m],_=255&n[m+1],y=255&n[m+2];f+=P[l>>2]+P[(3&l)<<4|_>>4]+P[m+1<h?(15&_)<<2|y>>6:64]+P[m+2<h?63&y:64]}return f},N=function(){const n=new Uint8Array([137,80,78,71,13,10,26,10]),u=new Int32Array(256);for(let y=0;y<256;y++){let M=y;for(let q=0;q<8;q++)M=1&M?3988292384^M>>1&2147483647:M>>1&2147483647;u[y]=M}function f(y,M,q,Q){let J=Q;const te=M.length;q[J]=te>>24&255,q[J+1]=te>>16&255,q[J+2]=te>>8&255,q[J+3]=255&te,J+=4,q[J]=255&y.charCodeAt(0),q[J+1]=255&y.charCodeAt(1),q[J+2]=255&y.charCodeAt(2),q[J+3]=255&y.charCodeAt(3),J+=4,q.set(M,J),J+=M.length;const he=function P(y,M,q){let Q=-1;for(let J=M;J<q;J++)Q=Q>>>8^u[255&(Q^y[J])];return-1^Q}(q,Q+4,J);q[J]=he>>24&255,q[J+1]=he>>16&255,q[J+2]=he>>8&255,q[J+3]=255&he}function l(y){let M=y.length;const q=65535,Q=Math.ceil(M/q),J=new Uint8Array(2+M+5*Q+4);let te=0;J[te++]=120,J[te++]=156;let he=0;for(;M>q;)J[te++]=0,J[te++]=255,J[te++]=255,J[te++]=0,J[te++]=0,J.set(y.subarray(he,he+q),te),te+=q,he+=q,M-=q;J[te++]=1,J[te++]=255&M,J[te++]=M>>8&255,J[te++]=255&~M,J[te++]=(65535&~M)>>8&255,J.set(y.subarray(he),te),te+=y.length-he;const oe=function m(y,M,q){let Q=1,J=0;for(let te=M;te<q;++te)Q=(Q+(255&y[te]))%65521,J=(J+Q)%65521;return J<<16|Q}(y,0,y.length);return J[te++]=oe>>24&255,J[te++]=oe>>16&255,J[te++]=oe>>8&255,J[te++]=255&oe,J}return function(M,q,Q){return function _(y,M,q,Q){const J=y.width,te=y.height;let he,oe,R;const s=y.data;switch(M){case t.ImageKind.GRAYSCALE_1BPP:oe=0,he=1,R=J+7>>3;break;case t.ImageKind.RGB_24BPP:oe=2,he=8,R=3*J;break;case t.ImageKind.RGBA_32BPP:oe=6,he=8,R=4*J;break;default:throw new Error("invalid format")}const e=new Uint8Array((1+R)*te);let r=0,o=0;for(let B=0;B<te;++B)e[r++]=0,e.set(s.subarray(o,o+R),r),o+=R,r+=R;if(M===t.ImageKind.GRAYSCALE_1BPP&&Q){r=0;for(let B=0;B<te;B++){r++;for(let Y=0;Y<R;Y++)e[r++]^=255}}const d=new Uint8Array([J>>24&255,J>>16&255,J>>8&255,255&J,te>>24&255,te>>16&255,te>>8&255,255&te,he,oe,0,0,0]),p=function h(y){if(!F.isNodeJS)return l(y);try{let M;M=parseInt(process.versions.node)>=8?y:Buffer.from(y);const q=__webpack_require__(372).deflateSync(M,{level:9});return q instanceof Uint8Array?q:new Uint8Array(q)}catch(M){(0,t.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+M)}return l(y)}(e),L=new Uint8Array(n.length+36+d.length+p.length);let X=0;return L.set(n,X),X+=n.length,f("IHDR",d,L,X),X+=12+d.length,f("IDATA",p,L,X),X+=12+p.length,f("IEND",new Uint8Array(0),L,X),G(L,"image/png",q)}(M,void 0===M.kind?t.ImageKind.GRAYSCALE_1BPP:M.kind,q,Q)}}();class W{constructor(){this.fontSizeScale=1,this.fontWeight=k.fontWeight,this.fontSize=0,this.textMatrix=t.IDENTITY_MATRIX,this.fontMatrix=t.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=t.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=k.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(i,u){this.x=i,this.y=u}}let w=0,A=0,S=0;a.SVGGraphics=H=class{constructor(n,i,u=!1){this.svgFactory=new O.DOMSVGFactory,this.current=new W,this.transformMatrix=t.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=n,this.objs=i,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!u,this._operatorIdMapping=[];for(const P in t.OPS)this._operatorIdMapping[t.OPS[P]]=P}save(){this.transformStack.push(this.transformMatrix);const n=this.current;this.extraStack.push(n),this.current=n.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(n){this.save(),this.executeOpTree(n),this.restore()}loadDependencies(n){const i=n.fnArray,u=n.argsArray;for(let P=0,f=i.length;P<f;P++)if(i[P]===t.OPS.dependency)for(const m of u[P]){const h=m.startsWith("g_")?this.commonObjs:this.objs,l=new Promise(_=>{h.get(m,_)});this.current.dependencies.push(l)}return Promise.all(this.current.dependencies)}transform(n,i,u,P,f,m){this.transformMatrix=t.Util.transform(this.transformMatrix,[n,i,u,P,f,m]),this.tgrp=null}getSVG(n,i){this.viewport=i;const u=this._initialize(i);return this.loadDependencies(n).then(()=>(this.transformMatrix=t.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(n)),u))}convertOpList(n){const i=this._operatorIdMapping,u=n.argsArray,P=n.fnArray,f=[];for(let m=0,h=P.length;m<h;m++){const l=P[m];f.push({fnId:l,fn:i[l],args:u[m]})}return g(f)}executeOpTree(n){for(const i of n){const u=i.fn,f=i.args;switch(0|i.fnId){case t.OPS.beginText:this.beginText();break;case t.OPS.dependency:break;case t.OPS.setLeading:this.setLeading(f);break;case t.OPS.setLeadingMoveText:this.setLeadingMoveText(f[0],f[1]);break;case t.OPS.setFont:this.setFont(f);break;case t.OPS.showText:case t.OPS.showSpacedText:this.showText(f[0]);break;case t.OPS.endText:this.endText();break;case t.OPS.moveText:this.moveText(f[0],f[1]);break;case t.OPS.setCharSpacing:this.setCharSpacing(f[0]);break;case t.OPS.setWordSpacing:this.setWordSpacing(f[0]);break;case t.OPS.setHScale:this.setHScale(f[0]);break;case t.OPS.setTextMatrix:this.setTextMatrix(f[0],f[1],f[2],f[3],f[4],f[5]);break;case t.OPS.setTextRise:this.setTextRise(f[0]);break;case t.OPS.setTextRenderingMode:this.setTextRenderingMode(f[0]);break;case t.OPS.setLineWidth:this.setLineWidth(f[0]);break;case t.OPS.setLineJoin:this.setLineJoin(f[0]);break;case t.OPS.setLineCap:this.setLineCap(f[0]);break;case t.OPS.setMiterLimit:this.setMiterLimit(f[0]);break;case t.OPS.setFillRGBColor:this.setFillRGBColor(f[0],f[1],f[2]);break;case t.OPS.setStrokeRGBColor:this.setStrokeRGBColor(f[0],f[1],f[2]);break;case t.OPS.setStrokeColorN:this.setStrokeColorN(f);break;case t.OPS.setFillColorN:this.setFillColorN(f);break;case t.OPS.shadingFill:this.shadingFill(f[0]);break;case t.OPS.setDash:this.setDash(f[0],f[1]);break;case t.OPS.setRenderingIntent:this.setRenderingIntent(f[0]);break;case t.OPS.setFlatness:this.setFlatness(f[0]);break;case t.OPS.setGState:this.setGState(f[0]);break;case t.OPS.fill:this.fill();break;case t.OPS.eoFill:this.eoFill();break;case t.OPS.stroke:this.stroke();break;case t.OPS.fillStroke:this.fillStroke();break;case t.OPS.eoFillStroke:this.eoFillStroke();break;case t.OPS.clip:this.clip("nonzero");break;case t.OPS.eoClip:this.clip("evenodd");break;case t.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case t.OPS.paintImageXObject:this.paintImageXObject(f[0]);break;case t.OPS.paintInlineImageXObject:this.paintInlineImageXObject(f[0]);break;case t.OPS.paintImageMaskXObject:this.paintImageMaskXObject(f[0]);break;case t.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(f[0],f[1]);break;case t.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case t.OPS.closePath:this.closePath();break;case t.OPS.closeStroke:this.closeStroke();break;case t.OPS.closeFillStroke:this.closeFillStroke();break;case t.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case t.OPS.nextLine:this.nextLine();break;case t.OPS.transform:this.transform(f[0],f[1],f[2],f[3],f[4],f[5]);break;case t.OPS.constructPath:this.constructPath(f[0],f[1]);break;case t.OPS.endPath:this.endPath();break;case 92:this.group(i.items);break;default:(0,t.warn)(`Unimplemented operator ${u}`)}}}setWordSpacing(n){this.current.wordSpacing=n}setCharSpacing(n){this.current.charSpacing=n}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(n,i,u,P,f,m){const h=this.current;h.textMatrix=h.lineMatrix=[n,i,u,P,f,m],h.textMatrixScale=Math.hypot(n,i),h.x=h.lineX=0,h.y=h.lineY=0,h.xcoords=[],h.ycoords=[],h.tspan=this.svgFactory.createElement("svg:tspan"),h.tspan.setAttributeNS(null,"font-family",h.fontFamily),h.tspan.setAttributeNS(null,"font-size",`${x(h.fontSize)}px`),h.tspan.setAttributeNS(null,"y",x(-h.y)),h.txtElement=this.svgFactory.createElement("svg:text"),h.txtElement.appendChild(h.tspan)}beginText(){const n=this.current;n.x=n.lineX=0,n.y=n.lineY=0,n.textMatrix=t.IDENTITY_MATRIX,n.lineMatrix=t.IDENTITY_MATRIX,n.textMatrixScale=1,n.tspan=this.svgFactory.createElement("svg:tspan"),n.txtElement=this.svgFactory.createElement("svg:text"),n.txtgrp=this.svgFactory.createElement("svg:g"),n.xcoords=[],n.ycoords=[]}moveText(n,i){const u=this.current;u.x=u.lineX+=n,u.y=u.lineY+=i,u.xcoords=[],u.ycoords=[],u.tspan=this.svgFactory.createElement("svg:tspan"),u.tspan.setAttributeNS(null,"font-family",u.fontFamily),u.tspan.setAttributeNS(null,"font-size",`${x(u.fontSize)}px`),u.tspan.setAttributeNS(null,"y",x(-u.y))}showText(n){const i=this.current,u=i.font,P=i.fontSize;if(0===P)return;const f=i.fontSizeScale,m=i.charSpacing,h=i.wordSpacing,l=i.fontDirection,_=i.textHScale*l,y=u.vertical,M=y?1:-1,q=u.defaultVMetrics,Q=P*i.fontMatrix[0];let J=0;for(const oe of n){if(null===oe){J+=l*h;continue}if("number"==typeof oe){J+=M*oe*P/1e3;continue}const R=(oe.isSpace?h:0)+m,s=oe.fontChar;let e,r,d,o=oe.width;if(y){let p;const c=oe.vmetric||q;p=oe.vmetric?c[1]:.5*o,p=-p*Q,o=c?-c[0]:o,e=p/f,r=(J+c[2]*Q)/f}else e=J/f,r=0;(oe.isInFont||u.missingFile)&&(i.xcoords.push(i.x+e),y&&i.ycoords.push(-i.y+r),i.tspan.textContent+=s),d=y?o*Q-R*l:o*Q+R*l,J+=d}i.tspan.setAttributeNS(null,"x",i.xcoords.map(x).join(" ")),i.tspan.setAttributeNS(null,"y",y?i.ycoords.map(x).join(" "):x(-i.y)),y?i.y-=J:i.x+=J*_,i.tspan.setAttributeNS(null,"font-family",i.fontFamily),i.tspan.setAttributeNS(null,"font-size",`${x(i.fontSize)}px`),i.fontStyle!==k.fontStyle&&i.tspan.setAttributeNS(null,"font-style",i.fontStyle),i.fontWeight!==k.fontWeight&&i.tspan.setAttributeNS(null,"font-weight",i.fontWeight);const te=i.textRenderingMode&t.TextRenderingMode.FILL_STROKE_MASK;te===t.TextRenderingMode.FILL||te===t.TextRenderingMode.FILL_STROKE?(i.fillColor!==k.fillColor&&i.tspan.setAttributeNS(null,"fill",i.fillColor),i.fillAlpha<1&&i.tspan.setAttributeNS(null,"fill-opacity",i.fillAlpha)):i.tspan.setAttributeNS(null,"fill",i.textRenderingMode===t.TextRenderingMode.ADD_TO_PATH?"transparent":"none"),(te===t.TextRenderingMode.STROKE||te===t.TextRenderingMode.FILL_STROKE)&&this._setStrokeAttributes(i.tspan,1/(i.textMatrixScale||1));let he=i.textMatrix;0!==i.textRise&&(he=he.slice(),he[5]+=i.textRise),i.txtElement.setAttributeNS(null,"transform",`${b(he)} scale(${x(_)}, -1)`),i.txtElement.setAttributeNS(E,"xml:space","preserve"),i.txtElement.appendChild(i.tspan),i.txtgrp.appendChild(i.txtElement),this._ensureTransformGroup().appendChild(i.txtElement)}setLeadingMoveText(n,i){this.setLeading(-i),this.moveText(n,i)}addFontStyle(n){if(!n.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const i=G(n.data,n.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${n.loadedName}"; src: url(${i}); }\n`}setFont(n){const i=this.current,u=this.commonObjs.get(n[0]);let P=n[1];i.font=u,this.embedFonts&&!u.missingFile&&!this.embeddedFonts[u.loadedName]&&(this.addFontStyle(u),this.embeddedFonts[u.loadedName]=u),i.fontMatrix=u.fontMatrix||t.FONT_IDENTITY_MATRIX;let f="normal";u.black?f="900":u.bold&&(f="bold");const m=u.italic?"italic":"normal";P<0?(P=-P,i.fontDirection=-1):i.fontDirection=1,i.fontSize=P,i.fontFamily=u.loadedName,i.fontWeight=f,i.fontStyle=m,i.tspan=this.svgFactory.createElement("svg:tspan"),i.tspan.setAttributeNS(null,"y",x(-i.y)),i.xcoords=[],i.ycoords=[]}endText(){const n=this.current;n.textRenderingMode&t.TextRenderingMode.ADD_TO_PATH_FLAG&&n.txtElement?.hasChildNodes()&&(n.element=n.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(n){n>0&&(this.current.lineWidth=n)}setLineCap(n){this.current.lineCap=I[n]}setLineJoin(n){this.current.lineJoin=U[n]}setMiterLimit(n){this.current.miterLimit=n}setStrokeAlpha(n){this.current.strokeAlpha=n}setStrokeRGBColor(n,i,u){this.current.strokeColor=t.Util.makeHexColor(n,i,u)}setFillAlpha(n){this.current.fillAlpha=n}setFillRGBColor(n,i,u){this.current.fillColor=t.Util.makeHexColor(n,i,u),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(n){this.current.strokeColor=this._makeColorN_Pattern(n)}setFillColorN(n){this.current.fillColor=this._makeColorN_Pattern(n)}shadingFill(n){const i=this.viewport.width,u=this.viewport.height,P=t.Util.inverseTransform(this.transformMatrix),f=t.Util.applyTransform([0,0],P),m=t.Util.applyTransform([0,u],P),h=t.Util.applyTransform([i,0],P),l=t.Util.applyTransform([i,u],P),_=Math.min(f[0],m[0],h[0],l[0]),y=Math.min(f[1],m[1],h[1],l[1]),M=Math.max(f[0],m[0],h[0],l[0]),q=Math.max(f[1],m[1],h[1],l[1]),Q=this.svgFactory.createElement("svg:rect");Q.setAttributeNS(null,"x",_),Q.setAttributeNS(null,"y",y),Q.setAttributeNS(null,"width",M-_),Q.setAttributeNS(null,"height",q-y),Q.setAttributeNS(null,"fill",this._makeShadingPattern(n)),this.current.fillAlpha<1&&Q.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(Q)}_makeColorN_Pattern(n){return"TilingPattern"===n[0]?this._makeTilingPattern(n):this._makeShadingPattern(n)}_makeTilingPattern(n){const i=n[1],u=n[2],P=n[3]||t.IDENTITY_MATRIX,[f,m,h,l]=n[4],_=n[5],y=n[6],M=n[7],q="shading"+S++,[Q,J,te,he]=t.Util.normalizeRect([...t.Util.applyTransform([f,m],P),...t.Util.applyTransform([h,l],P)]),[oe,R]=t.Util.singularValueDecompose2dScale(P),s=_*oe,e=y*R,r=this.svgFactory.createElement("svg:pattern");r.setAttributeNS(null,"id",q),r.setAttributeNS(null,"patternUnits","userSpaceOnUse"),r.setAttributeNS(null,"width",s),r.setAttributeNS(null,"height",e),r.setAttributeNS(null,"x",`${Q}`),r.setAttributeNS(null,"y",`${J}`);const o=this.svg,d=this.transformMatrix,p=this.current.fillColor,c=this.current.strokeColor,L=this.svgFactory.create(te-Q,he-J);if(this.svg=L,this.transformMatrix=P,2===M){const X=t.Util.makeHexColor(...i);this.current.fillColor=X,this.current.strokeColor=X}return this.executeOpTree(this.convertOpList(u)),this.svg=o,this.transformMatrix=d,this.current.fillColor=p,this.current.strokeColor=c,r.appendChild(L.childNodes[0]),this.defs.appendChild(r),`url(#${q})`}_makeShadingPattern(n){switch("string"==typeof n&&(n=this.objs.get(n)),n[0]){case"RadialAxial":const i="shading"+S++,u=n[3];let P;switch(n[1]){case"axial":const f=n[4],m=n[5];P=this.svgFactory.createElement("svg:linearGradient"),P.setAttributeNS(null,"id",i),P.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),P.setAttributeNS(null,"x1",f[0]),P.setAttributeNS(null,"y1",f[1]),P.setAttributeNS(null,"x2",m[0]),P.setAttributeNS(null,"y2",m[1]);break;case"radial":const h=n[4],l=n[5],_=n[6],y=n[7];P=this.svgFactory.createElement("svg:radialGradient"),P.setAttributeNS(null,"id",i),P.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),P.setAttributeNS(null,"cx",l[0]),P.setAttributeNS(null,"cy",l[1]),P.setAttributeNS(null,"r",y),P.setAttributeNS(null,"fx",h[0]),P.setAttributeNS(null,"fy",h[1]),P.setAttributeNS(null,"fr",_);break;default:throw new Error(`Unknown RadialAxial type: ${n[1]}`)}for(const f of u){const m=this.svgFactory.createElement("svg:stop");m.setAttributeNS(null,"offset",f[0]),m.setAttributeNS(null,"stop-color",f[1]),P.appendChild(m)}return this.defs.appendChild(P),`url(#${i})`;case"Mesh":return(0,t.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${n[0]}`)}}setDash(n,i){this.current.dashArray=n,this.current.dashPhase=i}constructPath(n,i){const u=this.current;let P=u.x,f=u.y,m=[],h=0;for(const l of n)switch(0|l){case t.OPS.rectangle:P=i[h++],f=i[h++];const M=P+i[h++],q=f+i[h++];m.push("M",x(P),x(f),"L",x(M),x(f),"L",x(M),x(q),"L",x(P),x(q),"Z");break;case t.OPS.moveTo:P=i[h++],f=i[h++],m.push("M",x(P),x(f));break;case t.OPS.lineTo:P=i[h++],f=i[h++],m.push("L",x(P),x(f));break;case t.OPS.curveTo:P=i[h+4],f=i[h+5],m.push("C",x(i[h]),x(i[h+1]),x(i[h+2]),x(i[h+3]),x(P),x(f)),h+=6;break;case t.OPS.curveTo2:m.push("C",x(P),x(f),x(i[h]),x(i[h+1]),x(i[h+2]),x(i[h+3])),P=i[h+2],f=i[h+3],h+=4;break;case t.OPS.curveTo3:P=i[h+2],f=i[h+3],m.push("C",x(i[h]),x(i[h+1]),x(P),x(f),x(P),x(f)),h+=4;break;case t.OPS.closePath:m.push("Z")}m=m.join(" "),u.path&&n.length>0&&n[0]!==t.OPS.rectangle&&n[0]!==t.OPS.moveTo?m=u.path.getAttributeNS(null,"d")+m:(u.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(u.path)),u.path.setAttributeNS(null,"d",m),u.path.setAttributeNS(null,"fill","none"),u.element=u.path,u.setCurrentPoint(P,f)}endPath(){const n=this.current;if(n.path=null,!this.pendingClip)return;if(!n.element)return void(this.pendingClip=null);const i="clippath"+w++,u=this.svgFactory.createElement("svg:clipPath");u.setAttributeNS(null,"id",i),u.setAttributeNS(null,"transform",b(this.transformMatrix));const P=n.element.cloneNode(!0);if(P.setAttributeNS(null,"clip-rule","evenodd"===this.pendingClip?"evenodd":"nonzero"),this.pendingClip=null,u.appendChild(P),this.defs.appendChild(u),n.activeClipUrl){n.clipGroup=null;for(const f of this.extraStack)f.clipGroup=null;u.setAttributeNS(null,"clip-path",n.activeClipUrl)}n.activeClipUrl=`url(#${i})`,this.tgrp=null}clip(n){this.pendingClip=n}closePath(){const n=this.current;if(n.path){const i=`${n.path.getAttributeNS(null,"d")}Z`;n.path.setAttributeNS(null,"d",i)}}setLeading(n){this.current.leading=-n}setTextRise(n){this.current.textRise=n}setTextRenderingMode(n){this.current.textRenderingMode=n}setHScale(n){this.current.textHScale=n/100}setRenderingIntent(n){}setFlatness(n){}setGState(n){for(const[i,u]of n)switch(i){case"LW":this.setLineWidth(u);break;case"LC":this.setLineCap(u);break;case"LJ":this.setLineJoin(u);break;case"ML":this.setMiterLimit(u);break;case"D":this.setDash(u[0],u[1]);break;case"RI":this.setRenderingIntent(u);break;case"FL":this.setFlatness(u);break;case"Font":this.setFont(u);break;case"CA":this.setStrokeAlpha(u);break;case"ca":this.setFillAlpha(u);break;default:(0,t.warn)(`Unimplemented graphic state operator ${i}`)}}fill(){const n=this.current;n.element&&(n.element.setAttributeNS(null,"fill",n.fillColor),n.element.setAttributeNS(null,"fill-opacity",n.fillAlpha),this.endPath())}stroke(){const n=this.current;n.element&&(this._setStrokeAttributes(n.element),n.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(n,i=1){const u=this.current;let P=u.dashArray;1!==i&&P.length>0&&(P=P.map(function(f){return i*f})),n.setAttributeNS(null,"stroke",u.strokeColor),n.setAttributeNS(null,"stroke-opacity",u.strokeAlpha),n.setAttributeNS(null,"stroke-miterlimit",x(u.miterLimit)),n.setAttributeNS(null,"stroke-linecap",u.lineCap),n.setAttributeNS(null,"stroke-linejoin",u.lineJoin),n.setAttributeNS(null,"stroke-width",x(i*u.lineWidth)+"px"),n.setAttributeNS(null,"stroke-dasharray",P.map(x).join(" ")),n.setAttributeNS(null,"stroke-dashoffset",x(i*u.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const n=this.svgFactory.createElement("svg:rect");n.setAttributeNS(null,"x","0"),n.setAttributeNS(null,"y","0"),n.setAttributeNS(null,"width","1px"),n.setAttributeNS(null,"height","1px"),n.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(n)}paintImageXObject(n){const i=n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n);i?this.paintInlineImageXObject(i):(0,t.warn)(`Dependent image with object ID ${n} is not ready yet`)}paintInlineImageXObject(n,i){const u=n.width,P=n.height,f=N(n,this.forceDataSchema,!!i),m=this.svgFactory.createElement("svg:rect");m.setAttributeNS(null,"x","0"),m.setAttributeNS(null,"y","0"),m.setAttributeNS(null,"width",x(u)),m.setAttributeNS(null,"height",x(P)),this.current.element=m,this.clip("nonzero");const h=this.svgFactory.createElement("svg:image");h.setAttributeNS(v,"xlink:href",f),h.setAttributeNS(null,"x","0"),h.setAttributeNS(null,"y",x(-P)),h.setAttributeNS(null,"width",x(u)+"px"),h.setAttributeNS(null,"height",x(P)+"px"),h.setAttributeNS(null,"transform",`scale(${x(1/u)} ${x(-1/P)})`),i?i.appendChild(h):this._ensureTransformGroup().appendChild(h)}paintImageMaskXObject(n){const i=this.current,u=n.width,P=n.height,f=i.fillColor;i.maskId="mask"+A++;const m=this.svgFactory.createElement("svg:mask");m.setAttributeNS(null,"id",i.maskId);const h=this.svgFactory.createElement("svg:rect");h.setAttributeNS(null,"x","0"),h.setAttributeNS(null,"y","0"),h.setAttributeNS(null,"width",x(u)),h.setAttributeNS(null,"height",x(P)),h.setAttributeNS(null,"fill",f),h.setAttributeNS(null,"mask",`url(#${i.maskId})`),this.defs.appendChild(m),this._ensureTransformGroup().appendChild(h),this.paintInlineImageXObject(n,m)}paintFormXObjectBegin(n,i){if(Array.isArray(n)&&6===n.length&&this.transform(n[0],n[1],n[2],n[3],n[4],n[5]),i){const u=i[2]-i[0],P=i[3]-i[1],f=this.svgFactory.createElement("svg:rect");f.setAttributeNS(null,"x",i[0]),f.setAttributeNS(null,"y",i[1]),f.setAttributeNS(null,"width",x(u)),f.setAttributeNS(null,"height",x(P)),this.current.element=f,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(n){const i=this.svgFactory.create(n.width,n.height),u=this.svgFactory.createElement("svg:defs");i.appendChild(u),this.defs=u;const P=this.svgFactory.createElement("svg:g");return P.setAttributeNS(null,"transform",b(n.transform)),i.appendChild(P),this.svg=P,i}_ensureClipGroup(){if(!this.current.clipGroup){const n=this.svgFactory.createElement("svg:g");n.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(n),this.current.clipGroup=n}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",b(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},(j,a,C)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFNodeStream=void 0;var t=C(1),O=C(26);const F=__webpack_require__(2339),H=__webpack_require__(4828),k=__webpack_require__(7915),E=__webpack_require__(5598),v=/^file:\/\/\/[a-zA-Z]:\//;a.PDFNodeStream=class U{constructor(S){this.source=S,this.url=function I(A){const S=E.parse(A);return"file:"===S.protocol||S.host?S:/^[a-z]:[/\\]/i.test(A)?E.parse(`file:///${A}`):(S.host||(S.protocol="file:"),S)}(S.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&S.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,t.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new b(this):new g(this),this._fullRequestReader}getRangeReader(S,n){if(n<=this._progressiveDataLength)return null;const i=this.isFsUrl?new w(this,S,n):new x(this,S,n);return this._rangeRequestReaders.push(i),i}cancelAllRequests(S){this._fullRequestReader&&this._fullRequestReader.cancel(S);for(const n of this._rangeRequestReaders.slice(0))n.cancel(S)}};class G{constructor(S){this._url=S.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=S.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=(0,t.createPromiseCapability)(),this._headersCapability=(0,t.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var S=this;return _asyncToGenerator(function*(){if(yield S._readCapability.promise,S._done)return{value:void 0,done:!0};if(S._storedError)throw S._storedError;const n=S._readableStream.read();return null===n?(S._readCapability=(0,t.createPromiseCapability)(),S.read()):(S._loaded+=n.length,S.onProgress&&S.onProgress({loaded:S._loaded,total:S._contentLength}),{value:new Uint8Array(n).buffer,done:!1})})()}cancel(S){this._readableStream?this._readableStream.destroy(S):this._error(S)}_error(S){this._storedError=S,this._readCapability.resolve()}_setReadableStream(S){this._readableStream=S,S.on("readable",()=>{this._readCapability.resolve()}),S.on("end",()=>{S.destroy(),this._done=!0,this._readCapability.resolve()}),S.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new t.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class N{constructor(S){this._url=S.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,t.createPromiseCapability)(),this._isStreamingSupported=!S.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){var S=this;return _asyncToGenerator(function*(){if(yield S._readCapability.promise,S._done)return{value:void 0,done:!0};if(S._storedError)throw S._storedError;const n=S._readableStream.read();return null===n?(S._readCapability=(0,t.createPromiseCapability)(),S.read()):(S._loaded+=n.length,S.onProgress&&S.onProgress({loaded:S._loaded}),{value:new Uint8Array(n).buffer,done:!1})})()}cancel(S){this._readableStream?this._readableStream.destroy(S):this._error(S)}_error(S){this._storedError=S,this._readCapability.resolve()}_setReadableStream(S){this._readableStream=S,S.on("readable",()=>{this._readCapability.resolve()}),S.on("end",()=>{S.destroy(),this._done=!0,this._readCapability.resolve()}),S.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function W(A,S){return{protocol:A.protocol,auth:A.auth,host:A.hostname,port:A.port,path:A.path,method:"GET",headers:S}}class g extends G{constructor(S){super(S);const n=i=>{if(404===i.statusCode){const m=new t.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=m,void this._headersCapability.reject(m)}this._headersCapability.resolve(),this._setReadableStream(i);const u=m=>this._readableStream.headers[m.toLowerCase()],{allowRangeRequests:P,suggestedLength:f}=(0,O.validateRangeRequestCapabilities)({getResponseHeader:u,isHttp:S.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=P,this._contentLength=f||this._contentLength,this._filename=(0,O.extractFilenameFromHeader)(u)};this._request=null,this._request="http:"===this._url.protocol?H.request(W(this._url,S.httpHeaders),n):k.request(W(this._url,S.httpHeaders),n),this._request.on("error",i=>{this._storedError=i,this._headersCapability.reject(i)}),this._request.end()}}class x extends N{constructor(S,n,i){super(S),this._httpHeaders={};for(const P in S.httpHeaders){const f=S.httpHeaders[P];typeof f>"u"||(this._httpHeaders[P]=f)}this._httpHeaders.Range=`bytes=${n}-${i-1}`;const u=P=>{if(404!==P.statusCode)this._setReadableStream(P);else{const f=new t.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=f}};this._request=null,this._request="http:"===this._url.protocol?H.request(W(this._url,this._httpHeaders),u):k.request(W(this._url,this._httpHeaders),u),this._request.on("error",P=>{this._storedError=P}),this._request.end()}}class b extends G{constructor(S){super(S);let n=decodeURIComponent(this._url.path);v.test(this._url.href)&&(n=n.replace(/^\//,"")),F.lstat(n,(i,u)=>{if(i)return"ENOENT"===i.code&&(i=new t.MissingPDFException(`Missing PDF "${n}".`)),this._storedError=i,void this._headersCapability.reject(i);this._contentLength=u.size,this._setReadableStream(F.createReadStream(n)),this._headersCapability.resolve()})}}class w extends N{constructor(S,n,i){super(S);let u=decodeURIComponent(this._url.path);v.test(this._url.href)&&(u=u.replace(/^\//,"")),this._setReadableStream(F.createReadStream(u,{start:n,end:i-1}))}}},(j,a,C)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createResponseStatusError=function E(I,U){return 404===I||0===I&&U.startsWith("file:")?new t.MissingPDFException('Missing PDF "'+U+'".'):new t.UnexpectedResponseException(`Unexpected server response (${I}) while retrieving PDF "${U}".`,I)},a.extractFilenameFromHeader=function k(I){const U=I("Content-Disposition");if(U){let G=(0,O.getFilenameFromContentDispositionHeader)(U);if(G.includes("%"))try{G=decodeURIComponent(G)}catch{}if((0,F.isPdfFile)(G))return G}return null},a.validateRangeRequestCapabilities=function H({getResponseHeader:I,isHttp:U,rangeChunkSize:G,disableRange:N}){const W={allowRangeRequests:!1,suggestedLength:void 0},g=parseInt(I("Content-Length"),10);return!Number.isInteger(g)||(W.suggestedLength=g,g<=2*G)||N||!U||"bytes"!==I("Accept-Ranges")||"identity"!==(I("Content-Encoding")||"identity")||(W.allowRangeRequests=!0),W},a.validateResponseStatus=function v(I){return 200===I||206===I};var t=C(1),O=C(27),F=C(5)},(j,a,C)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getFilenameFromContentDispositionHeader=function O(F){let H=!0,k=E("filename\\*","i").exec(F);if(k){k=k[1];let g=G(k);return g=unescape(g),g=N(g),g=W(g),I(g)}if(k=function U(g){const x=[];let b;const w=E("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(b=w.exec(g));){let[,S,n,i]=b;if(S=parseInt(S,10),S in x){if(0===S)break}else x[S]=[n,i]}const A=[];for(let S=0;S<x.length&&S in x;++S){let[n,i]=x[S];i=G(i),n&&(i=unescape(i),0===S&&(i=N(i))),A.push(i)}return A.join("")}(F),k)return I(W(k));if(k=E("filename","i").exec(F),k){k=k[1];let g=G(k);return g=W(g),I(g)}function E(g,x){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',x)}function v(g,x){if(g){if(!/^[\x00-\xFF]+$/.test(x))return x;try{const b=new TextDecoder(g,{fatal:!0}),w=(0,t.stringToBytes)(x);x=b.decode(w),H=!1}catch{}}return x}function I(g){return H&&/[\x80-\xff]/.test(g)&&(g=v("utf-8",g),H&&(g=v("iso-8859-1",g))),g}function G(g){if(g.startsWith('"')){const x=g.slice(1).split('\\"');for(let b=0;b<x.length;++b){const w=x[b].indexOf('"');-1!==w&&(x[b]=x[b].slice(0,w),x.length=b+1),x[b]=x[b].replace(/\\(.)/g,"$1")}g=x.join('"')}return g}function N(g){const x=g.indexOf("'");return-1===x?g:v(g.slice(0,x),g.slice(x+1).replace(/^[^']*'/,""))}function W(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(x,b,w,A){if("q"===w||"Q"===w)return v(b,A=(A=A.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,function(S,n){return String.fromCharCode(parseInt(n,16))}));try{A=atob(A)}catch{}return v(b,A)})}return""};var t=C(1)},(j,a,C)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFNetworkStream=void 0;var t=C(1),O=C(26);class E{constructor(N,W={}){this.url=N,this.isHttp=/^https?:/i.test(N),this.httpHeaders=this.isHttp&&W.httpHeaders||Object.create(null),this.withCredentials=W.withCredentials||!1,this.getXhr=W.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(N,W,g){const x={begin:N,end:W};for(const b in g)x[b]=g[b];return this.request(x)}requestFull(N){return this.request(N)}request(N){const W=this.getXhr(),g=this.currXhrId++,x=this.pendingRequests[g]={xhr:W};W.open("GET",this.url),W.withCredentials=this.withCredentials;for(const b in this.httpHeaders){const w=this.httpHeaders[b];typeof w>"u"||W.setRequestHeader(b,w)}return this.isHttp&&"begin"in N&&"end"in N?(W.setRequestHeader("Range",`bytes=${N.begin}-${N.end-1}`),x.expectedStatus=206):x.expectedStatus=200,W.responseType="arraybuffer",N.onError&&(W.onerror=function(b){N.onError(W.status)}),W.onreadystatechange=this.onStateChange.bind(this,g),W.onprogress=this.onProgress.bind(this,g),x.onHeadersReceived=N.onHeadersReceived,x.onDone=N.onDone,x.onError=N.onError,x.onProgress=N.onProgress,W.send(null),g}onProgress(N,W){const g=this.pendingRequests[N];g&&g.onProgress?.(W)}onStateChange(N,W){const g=this.pendingRequests[N];if(!g)return;const x=g.xhr;if(x.readyState>=2&&g.onHeadersReceived&&(g.onHeadersReceived(),delete g.onHeadersReceived),4!==x.readyState||!(N in this.pendingRequests))return;if(delete this.pendingRequests[N],0===x.status&&this.isHttp)return void g.onError?.(x.status);const b=x.status||200;if((200!==b||206!==g.expectedStatus)&&b!==g.expectedStatus)return void g.onError?.(x.status);const A=function k(G){const N=G.response;return"string"!=typeof N?N:(0,t.stringToBytes)(N).buffer}(x);if(206===b){const S=x.getResponseHeader("Content-Range"),n=/bytes (\d+)-(\d+)\/(\d+)/.exec(S);g.onDone({begin:parseInt(n[1],10),chunk:A})}else A?g.onDone({begin:0,chunk:A}):g.onError?.(x.status)}getRequestXhr(N){return this.pendingRequests[N].xhr}isPendingRequest(N){return N in this.pendingRequests}abortRequest(N){const W=this.pendingRequests[N].xhr;delete this.pendingRequests[N],W.abort()}}a.PDFNetworkStream=class v{constructor(N){this._source=N,this._manager=new E(N.url,{httpHeaders:N.httpHeaders,withCredentials:N.withCredentials}),this._rangeChunkSize=N.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(N){const W=this._rangeRequestReaders.indexOf(N);W>=0&&this._rangeRequestReaders.splice(W,1)}getFullReader(){return(0,t.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new I(this._manager,this._source),this._fullRequestReader}getRangeReader(N,W){const g=new U(this._manager,N,W);return g.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(g),g}cancelAllRequests(N){this._fullRequestReader?.cancel(N);for(const W of this._rangeRequestReaders.slice(0))W.cancel(N)}};class I{constructor(N,W){this._manager=N;const g={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=W.url,this._fullRequestId=N.requestFull(g),this._headersReceivedCapability=(0,t.createPromiseCapability)(),this._disableRange=W.disableRange||!1,this._contentLength=W.length,this._rangeChunkSize=W.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const N=this._fullRequestId,W=this._manager.getRequestXhr(N),g=w=>W.getResponseHeader(w),{allowRangeRequests:x,suggestedLength:b}=(0,O.validateRangeRequestCapabilities)({getResponseHeader:g,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});x&&(this._isRangeSupported=!0),this._contentLength=b||this._contentLength,this._filename=(0,O.extractFilenameFromHeader)(g),this._isRangeSupported&&this._manager.abortRequest(N),this._headersReceivedCapability.resolve()}_onDone(N){if(N&&(this._requests.length>0?this._requests.shift().resolve({value:N.chunk,done:!1}):this._cachedChunks.push(N.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const W of this._requests)W.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(N){this._storedError=(0,O.createResponseStatusError)(N,this._url),this._headersReceivedCapability.reject(this._storedError);for(const W of this._requests)W.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(N){this.onProgress?.({loaded:N.loaded,total:N.lengthComputable?N.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){var N=this;return _asyncToGenerator(function*(){if(N._storedError)throw N._storedError;if(N._cachedChunks.length>0)return{value:N._cachedChunks.shift(),done:!1};if(N._done)return{value:void 0,done:!0};const W=(0,t.createPromiseCapability)();return N._requests.push(W),W.promise})()}cancel(N){this._done=!0,this._headersReceivedCapability.reject(N);for(const W of this._requests)W.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class U{constructor(N,W,g){this._manager=N;const x={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=N.url,this._requestId=N.requestRange(W,g,x),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(N){const W=N.chunk;this._requests.length>0?this._requests.shift().resolve({value:W,done:!1}):this._queuedChunk=W,this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(N){this._storedError=(0,O.createResponseStatusError)(N,this._url);for(const W of this._requests)W.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(N){this.isStreamingSupported||this.onProgress?.({loaded:N.loaded})}get isStreamingSupported(){return!1}read(){var N=this;return _asyncToGenerator(function*(){if(N._storedError)throw N._storedError;if(null!==N._queuedChunk){const g=N._queuedChunk;return N._queuedChunk=null,{value:g,done:!1}}if(N._done)return{value:void 0,done:!0};const W=(0,t.createPromiseCapability)();return N._requests.push(W),W.promise})()}cancel(N){this._done=!0;for(const W of this._requests)W.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(j,a,C)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFFetchStream=void 0;var t=C(1),O=C(26);function F(I,U,G){return{method:"GET",headers:I,signal:G?.signal,mode:"cors",credentials:U?"include":"same-origin",redirect:"follow"}}function H(I){const U=new Headers;for(const G in I){const N=I[G];typeof N>"u"||U.append(G,N)}return U}a.PDFFetchStream=class k{constructor(U){this.source=U,this.isHttp=/^https?:/i.test(U.url),this.httpHeaders=this.isHttp&&U.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,t.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new E(this),this._fullRequestReader}getRangeReader(U,G){if(G<=this._progressiveDataLength)return null;const N=new v(this,U,G);return this._rangeRequestReaders.push(N),N}cancelAllRequests(U){this._fullRequestReader&&this._fullRequestReader.cancel(U);for(const G of this._rangeRequestReaders.slice(0))G.cancel(U)}};class E{constructor(U){this._stream=U,this._reader=null,this._loaded=0,this._filename=null;const G=U.source;this._withCredentials=G.withCredentials||!1,this._contentLength=G.length,this._headersCapability=(0,t.createPromiseCapability)(),this._disableRange=G.disableRange||!1,this._rangeChunkSize=G.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController<"u"&&(this._abortController=new AbortController),this._isStreamingSupported=!G.disableStream,this._isRangeSupported=!G.disableRange,this._headers=H(this._stream.httpHeaders);const N=G.url;fetch(N,F(this._headers,this._withCredentials,this._abortController)).then(W=>{if(!(0,O.validateResponseStatus)(W.status))throw(0,O.createResponseStatusError)(W.status,N);this._reader=W.body.getReader(),this._headersCapability.resolve();const g=w=>W.headers.get(w),{allowRangeRequests:x,suggestedLength:b}=(0,O.validateRangeRequestCapabilities)({getResponseHeader:g,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=x,this._contentLength=b||this._contentLength,this._filename=(0,O.extractFilenameFromHeader)(g),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new t.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var U=this;return _asyncToGenerator(function*(){yield U._headersCapability.promise;const{value:G,done:N}=yield U._reader.read();return N?{value:G,done:N}:(U._loaded+=G.byteLength,U.onProgress&&U.onProgress({loaded:U._loaded,total:U._contentLength}),{value:new Uint8Array(G).buffer,done:!1})})()}cancel(U){this._reader&&this._reader.cancel(U),this._abortController&&this._abortController.abort()}}class v{constructor(U,G,N){this._stream=U,this._reader=null,this._loaded=0;const W=U.source;this._withCredentials=W.withCredentials||!1,this._readCapability=(0,t.createPromiseCapability)(),this._isStreamingSupported=!W.disableStream,typeof AbortController<"u"&&(this._abortController=new AbortController),this._headers=H(this._stream.httpHeaders),this._headers.append("Range",`bytes=${G}-${N-1}`);const g=W.url;fetch(g,F(this._headers,this._withCredentials,this._abortController)).then(x=>{if(!(0,O.validateResponseStatus)(x.status))throw(0,O.createResponseStatusError)(x.status,g);this._readCapability.resolve(),this._reader=x.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var U=this;return _asyncToGenerator(function*(){yield U._readCapability.promise;const{value:G,done:N}=yield U._reader.read();return N?{value:G,done:N}:(U._loaded+=G.byteLength,U.onProgress&&U.onProgress({loaded:U._loaded}),{value:new Uint8Array(G).buffer,done:!1})})()}cancel(U){this._reader&&this._reader.cancel(U),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(j){var a=__webpack_module_cache__[j];if(void 0!==a)return a.exports;var C=__webpack_module_cache__[j]={exports:{}};return __webpack_modules__[j](C,C.exports,__w_pdfjs_require__),C.exports}var __nested_webpack_exports__={};return(()=>{var j=__nested_webpack_exports__;Object.defineProperty(j,"__esModule",{value:!0}),Object.defineProperty(j,"AnnotationLayer",{enumerable:!0,get:function(){return O.AnnotationLayer}}),Object.defineProperty(j,"AnnotationMode",{enumerable:!0,get:function(){return a.AnnotationMode}}),Object.defineProperty(j,"CMapCompressionType",{enumerable:!0,get:function(){return a.CMapCompressionType}}),Object.defineProperty(j,"GlobalWorkerOptions",{enumerable:!0,get:function(){return F.GlobalWorkerOptions}}),Object.defineProperty(j,"InvalidPDFException",{enumerable:!0,get:function(){return a.InvalidPDFException}}),Object.defineProperty(j,"LoopbackPort",{enumerable:!0,get:function(){return C.LoopbackPort}}),Object.defineProperty(j,"MissingPDFException",{enumerable:!0,get:function(){return a.MissingPDFException}}),Object.defineProperty(j,"OPS",{enumerable:!0,get:function(){return a.OPS}}),Object.defineProperty(j,"PDFDataRangeTransport",{enumerable:!0,get:function(){return C.PDFDataRangeTransport}}),Object.defineProperty(j,"PDFDateString",{enumerable:!0,get:function(){return t.PDFDateString}}),Object.defineProperty(j,"PDFWorker",{enumerable:!0,get:function(){return C.PDFWorker}}),Object.defineProperty(j,"PasswordResponses",{enumerable:!0,get:function(){return a.PasswordResponses}}),Object.defineProperty(j,"PermissionFlag",{enumerable:!0,get:function(){return a.PermissionFlag}}),Object.defineProperty(j,"PixelsPerInch",{enumerable:!0,get:function(){return t.PixelsPerInch}}),Object.defineProperty(j,"RenderingCancelledException",{enumerable:!0,get:function(){return t.RenderingCancelledException}}),Object.defineProperty(j,"SVGGraphics",{enumerable:!0,get:function(){return E.SVGGraphics}}),Object.defineProperty(j,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return a.UNSUPPORTED_FEATURES}}),Object.defineProperty(j,"UnexpectedResponseException",{enumerable:!0,get:function(){return a.UnexpectedResponseException}}),Object.defineProperty(j,"Util",{enumerable:!0,get:function(){return a.Util}}),Object.defineProperty(j,"VerbosityLevel",{enumerable:!0,get:function(){return a.VerbosityLevel}}),Object.defineProperty(j,"XfaLayer",{enumerable:!0,get:function(){return v.XfaLayer}}),Object.defineProperty(j,"build",{enumerable:!0,get:function(){return C.build}}),Object.defineProperty(j,"createPromiseCapability",{enumerable:!0,get:function(){return a.createPromiseCapability}}),Object.defineProperty(j,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return a.createValidAbsoluteUrl}}),Object.defineProperty(j,"getDocument",{enumerable:!0,get:function(){return C.getDocument}}),Object.defineProperty(j,"getFilenameFromUrl",{enumerable:!0,get:function(){return t.getFilenameFromUrl}}),Object.defineProperty(j,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return t.getPdfFilenameFromUrl}}),Object.defineProperty(j,"getXfaPageViewport",{enumerable:!0,get:function(){return t.getXfaPageViewport}}),Object.defineProperty(j,"isPdfFile",{enumerable:!0,get:function(){return t.isPdfFile}}),Object.defineProperty(j,"loadScript",{enumerable:!0,get:function(){return t.loadScript}}),Object.defineProperty(j,"renderTextLayer",{enumerable:!0,get:function(){return k.renderTextLayer}}),Object.defineProperty(j,"shadow",{enumerable:!0,get:function(){return a.shadow}}),Object.defineProperty(j,"version",{enumerable:!0,get:function(){return C.version}});var a=__w_pdfjs_require__(1),C=__w_pdfjs_require__(4),t=__w_pdfjs_require__(5),O=__w_pdfjs_require__(20),F=__w_pdfjs_require__(13),H=__w_pdfjs_require__(3),k=__w_pdfjs_require__(23),E=__w_pdfjs_require__(24),v=__w_pdfjs_require__(22);if(H.isNodeJS){const{PDFNodeStream:G}=__w_pdfjs_require__(25);(0,C.setPDFNetworkStreamFactory)(N=>new G(N))}else{const{PDFNetworkStream:G}=__w_pdfjs_require__(28),{PDFFetchStream:N}=__w_pdfjs_require__(29);(0,C.setPDFNetworkStreamFactory)(W=>(0,t.isValidFetchUrl)(W.url)?new N(W):new G(W))}})(),__nested_webpack_exports__})(),module.exports=C()},8365:function(j,a,C){var G,t=C(5661).default,O=C(1860).default,F=C(9159).default,H=C(5764).default,k=C(4467).default,E=C(468).default,v=C(7156).default;G=()=>(()=>{"use strict";var I=[,(W,g,x)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.DefaultXfaLayerFactory=g.DefaultTextLayerFactory=g.DefaultStructTreeLayerFactory=g.DefaultAnnotationLayerFactory=void 0;var b=x(2),w=x(4),A=x(5),S=x(7),n=x(8),i=x(9);g.DefaultAnnotationLayerFactory=class u{createAnnotationLayerBuilder(l,_,y=null,M="",q=!0,Q=w.NullL10n,J=!1,te=null,he=null,oe=null,R=null){return new b.AnnotationLayerBuilder({pageDiv:l,pdfPage:_,imageResourcesPath:M,renderForms:q,linkService:new A.SimpleLinkService,l10n:Q,annotationStorage:y,enableScripting:J,hasJSActionsPromise:te,fieldObjectsPromise:oe,mouseState:he,annotationCanvasMap:R})}},g.DefaultStructTreeLayerFactory=class P{createStructTreeLayerBuilder(l){return new S.StructTreeLayerBuilder({pdfPage:l})}},g.DefaultTextLayerFactory=class f{createTextLayerBuilder(l,_,y,M=!1,q,Q){return new n.TextLayerBuilder({textLayerDiv:l,pageIndex:_,viewport:y,enhanceTextSelection:M,eventBus:q,highlighter:Q})}},g.DefaultXfaLayerFactory=class m{createXfaLayerBuilder(l,_,y=null,M=null){return new i.XfaLayerBuilder({pageDiv:l,pdfPage:_,annotationStorage:y,linkService:new A.SimpleLinkService,xfaHtml:M})}}},(W,g,x)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.AnnotationLayerBuilder=void 0;var b=x(3),w=x(4);g.AnnotationLayerBuilder=class A{constructor({pageDiv:n,pdfPage:i,linkService:u,downloadManager:P,annotationStorage:f=null,imageResourcesPath:m="",renderForms:h=!0,l10n:l=w.NullL10n,enableScripting:_=!1,hasJSActionsPromise:y=null,fieldObjectsPromise:M=null,mouseState:q=null,annotationCanvasMap:Q=null}){this.pageDiv=n,this.pdfPage=i,this.linkService=u,this.downloadManager=P,this.imageResourcesPath=m,this.renderForms=h,this.l10n=l,this.annotationStorage=f,this.enableScripting=_,this._hasJSActionsPromise=y,this._fieldObjectsPromise=M,this._mouseState=q,this._annotationCanvasMap=Q,this.div=null,this._cancelled=!1}render(n,i="display"){var u=this;return v(function*(){const[P,f=!1,m=null]=yield Promise.all([u.pdfPage.getAnnotations({intent:i}),u._hasJSActionsPromise,u._fieldObjectsPromise]);if(u._cancelled||0===P.length)return;const h={viewport:n.clone({dontFlip:!0}),div:u.div,annotations:P,page:u.pdfPage,imageResourcesPath:u.imageResourcesPath,renderForms:u.renderForms,linkService:u.linkService,downloadManager:u.downloadManager,annotationStorage:u.annotationStorage,enableScripting:u.enableScripting,hasJSActions:f,fieldObjects:m,mouseState:u._mouseState,annotationCanvasMap:u._annotationCanvasMap};u.div?b.AnnotationLayer.update(h):(u.div=document.createElement("div"),u.div.className="annotationLayer",u.pageDiv.appendChild(u.div),h.div=u.div,b.AnnotationLayer.render(h),u.l10n.translate(u.div))})()}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},W=>{let g;g=typeof window<"u"&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:C(7668),W.exports=g},(W,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.NullL10n=void 0,g.fixupLangCode=function A(i){return w[i?.toLowerCase()]||i},g.getL10nFallback=b;const x={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xd7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xd7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loading\u2026",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts."};function b(i,u){switch(i){case"find_match_count":i=`find_match_count[${1===u.total?"one":"other"}]`;break;case"find_match_count_limit":i=`find_match_count_limit[${1===u.limit?"one":"other"}]`}return x[i]||""}const w={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};g.NullL10n={getLanguage:()=>v(function*(){return"en-us"})(),getDirection:()=>v(function*(){return"ltr"})(),get:(i,u=null,P=b(i,u))=>v(function*(){return function S(i,u){return u?i.replace(/\{\{\s*(\w+)\s*\}\}/g,(P,f)=>f in u?u[f]:"{{"+f+"}}"):i}(P,u)})(),translate:i=>v(function*(){})()}},(W,g,x)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.SimpleLinkService=g.PDFLinkService=g.LinkTarget=void 0;var b=x(6);const A={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function S(h,{url:l,target:_,rel:y,enabled:M=!0}={}){if(!l||"string"!=typeof l)throw new Error('A valid "url" parameter must provided.');const q=(0,b.removeNullCharacters)(l);M?h.href=h.title=q:(h.href="",h.title=`Disabled: ${q}`,h.onclick=()=>!1);let Q="";switch(_){case A.NONE:break;case A.SELF:Q="_self";break;case A.BLANK:Q="_blank";break;case A.PARENT:Q="_parent";break;case A.TOP:Q="_top"}h.target=Q,h.rel="string"==typeof y?y:"noopener noreferrer nofollow"}g.LinkTarget=A;var n=new WeakMap,i=new WeakSet;class u{constructor({eventBus:l,externalLinkTarget:_=null,externalLinkRel:y=null,ignoreDestinationZoom:M=!1}={}){O(this,i),F(this,n,{writable:!0,value:new Map}),this.eventBus=l,this.externalLinkTarget=_,this.externalLinkRel=y,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=M,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(l,_=null){this.baseUrl=_,this.pdfDocument=l,E(this,n).clear()}setViewer(l){this.pdfViewer=l}setHistory(l){this.pdfHistory=l}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(l){this.pdfViewer.currentPageNumber=l}get rotation(){return this.pdfViewer.pagesRotation}set rotation(l){this.pdfViewer.pagesRotation=l}goToDestination(l){var _=this;return v(function*(){if(!_.pdfDocument)return;let y,M;"string"==typeof l?(y=l,M=yield _.pdfDocument.getDestination(l)):(y=null,M=yield l),Array.isArray(M)?k(_,i,P).call(_,l,y,M):console.error(`PDFLinkService.goToDestination: "${M}" is not a valid destination array, for dest="${l}".`)})()}goToPage(l){if(!this.pdfDocument)return;const _="string"==typeof l&&this.pdfViewer.pageLabelToPageNumber(l)||0|l;Number.isInteger(_)&&_>0&&_<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(_)),this.pdfViewer.scrollPageIntoView({pageNumber:_})):console.error(`PDFLinkService.goToPage: "${l}" is not a valid page.`)}addLinkAttributes(l,_,y=!1){S(l,{url:_,target:y?A.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(l){if("string"==typeof l){if(l.length>0)return this.getAnchorUrl("#"+escape(l))}else if(Array.isArray(l)){const _=JSON.stringify(l);if(_.length>0)return this.getAnchorUrl("#"+escape(_))}return this.getAnchorUrl("")}getAnchorUrl(l){return(this.baseUrl||"")+l}setHash(l){if(!this.pdfDocument)return;let _,y;if(l.includes("=")){const M=(0,b.parseQueryString)(l);if(M.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:M.get("search").replace(/"/g,""),phraseSearch:"true"===M.get("phrase")}),M.has("page")&&(_=0|M.get("page")||1),M.has("zoom")){const q=M.get("zoom").split(","),Q=q[0],J=parseFloat(Q);Q.includes("Fit")?"Fit"===Q||"FitB"===Q?y=[null,{name:Q}]:"FitH"===Q||"FitBH"===Q||"FitV"===Q||"FitBV"===Q?y=[null,{name:Q},q.length>1?0|q[1]:null]:"FitR"===Q?5!==q.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):y=[null,{name:Q},0|q[1],0|q[2],0|q[3],0|q[4]]:console.error(`PDFLinkService.setHash: "${Q}" is not a valid zoom value.`):y=[null,{name:"XYZ"},q.length>1?0|q[1]:null,q.length>2?0|q[2]:null,J?J/100:Q]}y?this.pdfViewer.scrollPageIntoView({pageNumber:_||this.page,destArray:y,allowNegativeOffset:!0}):_&&(this.page=_),M.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:M.get("pagemode")}),M.has("nameddest")&&this.goToDestination(M.get("nameddest"))}else{y=unescape(l);try{y=JSON.parse(y),Array.isArray(y)||(y=y.toString())}catch{}if("string"==typeof y||H(u,u,f).call(u,y))return void this.goToDestination(y);console.error(`PDFLinkService.setHash: "${unescape(l)}" is not a valid destination.`)}}executeNamedAction(l){switch(l){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:l})}cachePageRef(l,_){if(!_)return;const y=0===_.gen?`${_.num}R`:`${_.num}R${_.gen}`;E(this,n).set(y,l)}_cachedPageNumber(l){if(!l)return null;const _=0===l.gen?`${l.num}R`:`${l.num}R${l.gen}`;return E(this,n).get(_)||null}isPageVisible(l){return this.pdfViewer.isPageVisible(l)}isPageCached(l){return this.pdfViewer.isPageCached(l)}}function P(h,l=null,_){const y=_[0];let M;if("object"==typeof y&&null!==y){if(M=this._cachedPageNumber(y),!M)return void this.pdfDocument.getPageIndex(y).then(q=>{this.cachePageRef(q+1,y),k(this,i,P).call(this,h,l,_)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${y}" is not a valid page reference, for dest="${h}".`)})}else{if(!Number.isInteger(y))return void console.error(`PDFLinkService.#goToDestinationHelper: "${y}" is not a valid destination reference, for dest="${h}".`);M=y+1}!M||M<1||M>this.pagesCount?console.error(`PDFLinkService.#goToDestinationHelper: "${M}" is not a valid page number, for dest="${h}".`):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:l,explicitDest:_,pageNumber:M})),this.pdfViewer.scrollPageIntoView({pageNumber:M,destArray:_,ignoreDestinationZoom:this._ignoreDestinationZoom}))}function f(h){if(!Array.isArray(h))return!1;const l=h.length;if(l<2)return!1;const _=h[0];if(!("object"==typeof _&&Number.isInteger(_.num)&&Number.isInteger(_.gen)||Number.isInteger(_)&&_>=0))return!1;const y=h[1];if("object"!=typeof y||"string"!=typeof y.name)return!1;let M=!0;switch(y.name){case"XYZ":if(5!==l)return!1;break;case"Fit":case"FitB":return 2===l;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==l)return!1;break;case"FitR":if(6!==l)return!1;M=!1;break;default:return!1}for(let q=2;q<l;q++){const Q=h[q];if(!("number"==typeof Q||M&&null===Q))return!1}return!0}g.PDFLinkService=u,g.SimpleLinkService=class m{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(l){}get rotation(){return 0}set rotation(l){}goToDestination(l){return v(function*(){})()}goToPage(l){}addLinkAttributes(l,_,y=!1){S(l,{url:_,enabled:this.externalLinkEnabled})}getDestinationHash(l){return"#"}getAnchorUrl(l){return"#"}setHash(l){}executeNamedAction(l){}cachePageRef(l,_){}isPageVisible(l){return!0}isPageCached(l){return!0}}},(W,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.animationStarted=g.VERTICAL_PADDING=g.UNKNOWN_SCALE=g.TextLayerMode=g.SpreadMode=g.SidebarView=g.ScrollMode=g.SCROLLBAR_PADDING=g.RenderingStates=g.RendererType=g.ProgressBar=g.PresentationModeState=g.OutputScale=g.MIN_SCALE=g.MAX_SCALE=g.MAX_AUTO_SCALE=g.DEFAULT_SCALE_VALUE=g.DEFAULT_SCALE_DELTA=g.DEFAULT_SCALE=g.AutoPrintRegExp=void 0,g.apiPageLayoutToViewerModes=function Ce(se){let de=y.VERTICAL,be=M.NONE;switch(se){case"SinglePage":de=y.PAGE;break;case"OneColumn":break;case"TwoPageLeft":de=y.PAGE;case"TwoColumnLeft":be=M.ODD;break;case"TwoPageRight":de=y.PAGE;case"TwoColumnRight":be=M.EVEN}return{scrollMode:de,spreadMode:be}},g.apiPageModeToSidebarView=function pe(se){switch(se){case"UseNone":return h.NONE;case"UseThumbs":return h.THUMBS;case"UseOutlines":return h.OUTLINE;case"UseAttachments":return h.ATTACHMENTS;case"UseOC":return h.LAYERS}return h.NONE},g.approximateFraction=function r(se){if(Math.floor(se)===se)return[se,1];const de=1/se;if(de>8)return[1,8];if(Math.floor(de)===de)return[1,de];const ne=se>1?de:se;let z,T=0,K=1,le=1,ge=1;for(;;){const D=T+le,V=K+ge;if(V>8)break;ne<=D/V?(le=D,ge=V):(T=D,K=V)}return z=ne-T/K<le/ge-ne?ne===se?[T,K]:[K,T]:ne===se?[le,ge]:[ge,le],z},g.backtrackBeforeAllVisibleElements=p,g.binarySearchFirstItem=e,g.getActiveOrFocusedElement=function we(){let se=document,de=se.activeElement||se.querySelector(":focus");for(;de?.shadowRoot;)se=de.shadowRoot,de=se.activeElement||se.querySelector(":focus");return de},g.getPageSizeInches=function d({view:se,userUnit:de,rotate:be}){const[ne,T,K,le]=se,ge=be%180!=0,z=(K-ne)/72*de,D=(le-T)/72*de;return{width:ge?D:z,height:ge?z:D}},g.getVisibleElements=function c({scrollEl:se,views:de,sortByVisibility:be=!1,horizontal:ne=!1,rtl:T=!1}){const K=se.scrollTop,le=K+se.clientHeight,ge=se.scrollLeft,z=ge+se.clientWidth,ie=[],ve=new Set,Te=de.length;let re=e(de,ne?function V(fe){const xe=fe.div,ye=xe.offsetLeft+xe.clientLeft;return T?ye<z:ye+xe.clientWidth>ge}:function D(fe){const xe=fe.div;return xe.offsetTop+xe.clientTop+xe.clientHeight>K});re>0&&re<Te&&!ne&&(re=p(re,de,K));let ce=ne?z:-1;for(let fe=re;fe<Te;fe++){const xe=de[fe],ye=xe.div,Ee=ye.offsetLeft+ye.clientLeft,ke=ye.offsetTop+ye.clientTop,Me=ye.clientWidth,Le=ye.clientHeight,Ne=Ee+Me,Re=ke+Le;if(-1===ce)Re>=le&&(ce=Re);else if((ne?Ee:ke)>ce)break;if(Re<=K||ke>=le||Ne<=ge||Ee>=z)continue;const De=Math.max(0,K-ke)+Math.max(0,Re-le),Ie=(Me-(Math.max(0,ge-Ee)+Math.max(0,Ne-z)))/Me;ie.push({id:xe.id,x:Ee,y:ke,view:xe,percent:(Le-De)/Le*Ie*100|0,widthPercent:100*Ie|0}),ve.add(xe.id)}const Se=ie[0],Pe=ie[ie.length-1];return be&&ie.sort(function(fe,xe){const ye=fe.percent-xe.percent;return Math.abs(ye)>.001?-ye:fe.id-xe.id}),{first:Se,last:Pe,views:ie,ids:ve}},g.isPortraitOrientation=function ee(se){return se.width<=se.height},g.isValidRotation=function Y(se){return Number.isInteger(se)&&se%90==0},g.isValidScrollMode=function $(se){return Number.isInteger(se)&&Object.values(y).includes(se)&&se!==y.UNKNOWN},g.isValidSpreadMode=function Z(se){return Number.isInteger(se)&&Object.values(M).includes(se)&&se!==M.UNKNOWN},g.noContextMenuHandler=function L(se){se.preventDefault()},g.normalizeWheelEventDelta=function B(se){let de=X(se);return 0===se.deltaMode?de/=900:1===se.deltaMode&&(de/=30),de},g.normalizeWheelEventDirection=X,g.parseQueryString=function he(se){const de=new Map;for(const[be,ne]of new URLSearchParams(se))de.set(be.toLowerCase(),ne);return de},g.removeNullCharacters=function s(se,de=!1){return"string"!=typeof se?(console.error("The argument must be a string."),se):(de&&(se=se.replace(R," ")),se.replace(oe,""))},g.roundToDivide=function o(se,de){const be=se%de;return 0===be?se:Math.round(se-be+de)},g.scrollIntoView=function J(se,de,be=!1){let ne=se.offsetParent;if(!ne)return void console.error("offsetParent is not set -- cannot scroll");let T=se.offsetTop+se.clientTop,K=se.offsetLeft+se.clientLeft;for(;ne.clientHeight===ne.scrollHeight&&ne.clientWidth===ne.scrollWidth||be&&(ne.classList.contains("markedContent")||"hidden"===getComputedStyle(ne).overflow);)if(T+=ne.offsetTop,K+=ne.offsetLeft,ne=ne.offsetParent,!ne)return;de&&(void 0!==de.top&&(T+=de.top),void 0!==de.left&&(K+=de.left,ne.scrollLeft=K)),ne.scrollTop=T},g.watchScroll=function te(se,de){const be=function(K){T||(T=window.requestAnimationFrame(function(){T=null;const ge=se.scrollLeft,z=ne.lastX;ge!==z&&(ne.right=ge>z),ne.lastX=ge;const D=se.scrollTop,V=ne.lastY;D!==V&&(ne.down=D>V),ne.lastY=D,de(ne)}))},ne={right:!0,down:!0,lastX:se.scrollLeft,lastY:se.scrollTop,_eventHandler:be};let T=null;return se.addEventListener("scroll",be,!0),ne},g.DEFAULT_SCALE_VALUE="auto",g.DEFAULT_SCALE=1,g.DEFAULT_SCALE_DELTA=1.1,g.MIN_SCALE=.1,g.MAX_SCALE=10,g.UNKNOWN_SCALE=0,g.MAX_AUTO_SCALE=1.25,g.SCROLLBAR_PADDING=40,g.VERTICAL_PADDING=5,g.RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},g.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};const h={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};g.SidebarView=h,g.RendererType={CANVAS:"canvas",SVG:"svg"},g.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};const y={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};g.ScrollMode=y;const M={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};g.SpreadMode=M,g.AutoPrintRegExp=/\bprint\s*\(/,g.OutputScale=class Q{constructor(){const de=window.devicePixelRatio||1;this.sx=de,this.sy=de}get scaled(){return 1!==this.sx||1!==this.sy}};const oe=/\x00/g,R=/[\x01-\x1F]/g;function e(se,de,be=0){let ne=be,T=se.length-1;if(T<0||!de(se[T]))return se.length;if(de(se[ne]))return ne;for(;ne<T;){const K=ne+T>>1;de(se[K])?T=K:ne=K+1}return ne}function p(se,de,be){if(se<2)return se;let ne=de[se].div,T=ne.offsetTop+ne.clientTop;T>=be&&(ne=de[se-1].div,T=ne.offsetTop+ne.clientTop);for(let K=se-2;K>=0&&(ne=de[K].div,!(ne.offsetTop+ne.clientTop+ne.clientHeight<=T));--K)se=K;return se}function X(se){let de=Math.hypot(se.deltaX,se.deltaY);const be=Math.atan2(se.deltaY,se.deltaX);return-.25*Math.PI<be&&be<.75*Math.PI&&(de=-de),de}const ue=new Promise(function(se){window.requestAnimationFrame(se)});g.animationStarted=ue;var Ae=new WeakSet;function ae(){this._indeterminate?this.div.classList.add("indeterminate"):(this.div.classList.remove("indeterminate"),document.documentElement.style.setProperty("--progressBar-percent",`${this._percent}%`))}g.ProgressBar=class me{constructor(de){if(O(this,Ae),arguments.length>1)throw new Error("ProgressBar no longer accepts any additional options, please use CSS rules to modify its appearance instead.");this.visible=!0,this.div=document.querySelector(de+" .progress"),this.bar=this.div.parentNode,this.percent=0}get percent(){return this._percent}set percent(de){this._indeterminate=isNaN(de),this._percent=function _e(se,de,be){return Math.min(Math.max(se,de),be)}(de,0,100),k(this,Ae,ae).call(this)}setWidth(de){if(!de)return;const ne=de.parentNode.offsetWidth-de.offsetWidth;ne>0&&document.documentElement.style.setProperty("--progressBar-end-offset",`${ne}px`)}hide(){this.visible&&(this.visible=!1,this.bar.classList.add("hidden"))}show(){this.visible||(this.visible=!0,this.bar.classList.remove("hidden"))}}},(W,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.StructTreeLayerBuilder=void 0;const x={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},b=/^H(\d+)$/;g.StructTreeLayerBuilder=class w{constructor({pdfPage:S}){this.pdfPage=S}render(S){return this._walk(S)}_setAttributes(S,n){void 0!==S.alt&&n.setAttribute("aria-label",S.alt),void 0!==S.id&&n.setAttribute("aria-owns",S.id),void 0!==S.lang&&n.setAttribute("lang",S.lang)}_walk(S){if(!S)return null;const n=document.createElement("span");if("role"in S){const{role:i}=S,u=i.match(b);u?(n.setAttribute("role","heading"),n.setAttribute("aria-level",u[1])):x[i]&&n.setAttribute("role",x[i])}if(this._setAttributes(S,n),S.children)if(1===S.children.length&&"id"in S.children[0])this._setAttributes(S.children[0],n);else for(const i of S.children)n.appendChild(this._walk(i));return n}}},(W,g,x)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.TextLayerBuilder=void 0;var b=x(3);g.TextLayerBuilder=class A{constructor({textLayerDiv:n,eventBus:i,pageIndex:u,viewport:P,highlighter:f=null,enhanceTextSelection:m=!1}){this.textLayerDiv=n,this.eventBus=i,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageNumber=u+1,this.viewport=P,this.textDivs=[],this.textLayerRenderTask=null,this.highlighter=f,this.enhanceTextSelection=m,this._bindMouse()}_finishRendering(){if(this.renderingDone=!0,!this.enhanceTextSelection){const n=document.createElement("div");n.className="endOfContent",this.textLayerDiv.appendChild(n)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(n=0){if(!this.textContent&&!this.textContentStream||this.renderingDone)return;this.cancel(),this.textDivs.length=0,this.highlighter?.setTextMapping(this.textDivs,this.textContentItemsStr);const i=document.createDocumentFragment();this.textLayerRenderTask=(0,b.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:i,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:n,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(()=>{this.textLayerDiv.appendChild(i),this._finishRendering(),this.highlighter?.enable()},function(u){})}cancel(){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.highlighter?.disable()}setTextContentStream(n){this.cancel(),this.textContentStream=n}setTextContent(n){this.cancel(),this.textContent=n}_bindMouse(){const n=this.textLayerDiv;let i=null;n.addEventListener("mousedown",u=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return this.textLayerRenderTask.expandTextDivs(!0),void(i&&(clearTimeout(i),i=null));const P=n.querySelector(".endOfContent");if(!P)return;let f=u.target!==n;if(f=f&&"none"!==window.getComputedStyle(P).getPropertyValue("-moz-user-select"),f){const m=n.getBoundingClientRect(),h=Math.max(0,(u.pageY-m.top)/m.height);P.style.top=(100*h).toFixed(2)+"%"}P.classList.add("active")}),n.addEventListener("mouseup",()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return void(i=setTimeout(()=>{this.textLayerRenderTask&&this.textLayerRenderTask.expandTextDivs(!1),i=null},300));const u=n.querySelector(".endOfContent");u&&(u.style.top="",u.classList.remove("active"))})}}},(W,g,x)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.XfaLayerBuilder=void 0;var b=x(3);g.XfaLayerBuilder=class w{constructor({pageDiv:S,pdfPage:n,annotationStorage:i=null,linkService:u,xfaHtml:P=null}){this.pageDiv=S,this.pdfPage=n,this.annotationStorage=i,this.linkService=u,this.xfaHtml=P,this.div=null,this._cancelled=!1}render(S,n="display"){if("print"===n){const i={viewport:S.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:n},u=document.createElement("div");this.pageDiv.appendChild(u),i.div=u;const P=b.XfaLayer.render(i);return Promise.resolve(P)}return this.pdfPage.getXfa().then(i=>{if(this._cancelled||!i)return{textDivs:[]};const u={viewport:S.clone({dontFlip:!0}),div:this.div,xfaHtml:i,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:n};return this.div?b.XfaLayer.update(u):(this.div=document.createElement("div"),this.pageDiv.appendChild(this.div),u.div=this.div,b.XfaLayer.render(u))}).catch(i=>{console.error(i)})}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},(W,g,x)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFViewer=g.PDFSinglePageViewer=void 0;var b=x(6),w=x(11);g.PDFViewer=class A extends w.BaseViewer{},g.PDFSinglePageViewer=class S extends w.BaseViewer{_resetView(){super._resetView(),this._scrollMode=b.ScrollMode.PAGE,this._spreadMode=b.SpreadMode.NONE}set scrollMode(i){}_updateScrollMode(){}set spreadMode(i){}_updateSpreadMode(){}}},(W,g,x)=>{let b;Object.defineProperty(g,"__esModule",{value:!0}),g.PagesCountLimit=g.PDFPageViewBuffer=g.BaseViewer=void 0;var w=x(3),A=x(6),S=x(2),n=x(4),i=x(12),u=x(14),P=x(5),f=x(7),m=x(15),h=x(8),l=x(9);const y="enablePermissions",M={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};g.PagesCountLimit=M;var q=new WeakMap,Q=new WeakMap,J=new WeakSet;b=Symbol.iterator;class te{constructor(T){O(this,J),F(this,q,{writable:!0,value:new Set}),F(this,Q,{writable:!0,value:0}),t(this,Q,T)}push(T){const K=E(this,q);K.has(T)&&K.delete(T),K.add(T),K.size>E(this,Q)&&k(this,J,he).call(this)}resize(T,K=null){t(this,Q,T);const le=E(this,q);if(K){const ge=le.size;let z=1;for(const D of le)if(K.has(D.id)&&(le.delete(D),le.add(D)),++z>ge)break}for(;le.size>E(this,Q);)k(this,J,he).call(this)}has(T){return E(this,q).has(T)}[b](){return E(this,q).keys()}}function he(){const ne=E(this,q).keys().next().value;ne?.destroy(),E(this,q).delete(ne)}g.PDFPageViewBuffer=te;var oe=new WeakMap,R=new WeakMap,s=new WeakMap,e=new WeakMap,r=new WeakMap,o=new WeakMap,d=new WeakMap,p=new WeakSet,c=new WeakSet,L=new WeakSet,X=new WeakSet,B=new WeakSet,Y=new WeakSet,$=new WeakSet,Z=new WeakSet,ee=new WeakSet;class ue{constructor(T){if(O(this,ee),O(this,Z),O(this,$),O(this,Y),O(this,B),O(this,X),O(this,L),O(this,c),O(this,p),F(this,oe,{writable:!0,value:null}),F(this,R,{writable:!0,value:w.AnnotationMode.ENABLE_FORMS}),F(this,s,{writable:!0,value:null}),F(this,e,{writable:!0,value:!1}),F(this,r,{writable:!0,value:0}),F(this,o,{writable:!0,value:null}),F(this,d,{writable:!0,value:null}),this.constructor===ue)throw new Error("Cannot initialize BaseViewer.");const K="2.14.305";if(w.version!==K)throw new Error(`The API version "${w.version}" does not match the Viewer version "${K}".`);if(this.container=T.container,this.viewer=T.viewer||T.container.firstElementChild,"DIV"!==this.container?.tagName.toUpperCase()||"DIV"!==this.viewer?.tagName.toUpperCase())throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.eventBus=T.eventBus,this.linkService=T.linkService||new P.SimpleLinkService,this.downloadManager=T.downloadManager||null,this.findController=T.findController||null,this._scriptingManager=T.scriptingManager||null,this.removePageBorders=T.removePageBorders||!1,this.textLayerMode=T.textLayerMode??A.TextLayerMode.ENABLE,t(this,R,T.annotationMode??w.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=T.imageResourcesPath||"",this.enablePrintAutoRotate=T.enablePrintAutoRotate||!1,this.renderer=T.renderer||A.RendererType.CANVAS,this.useOnlyCssZoom=T.useOnlyCssZoom||!1,this.maxCanvasPixels=T.maxCanvasPixels,this.l10n=T.l10n||n.NullL10n,t(this,e,T.enablePermissions||!1),this.pageColors=T.pageColors||null,T.pageColors&&(!CSS.supports("color",T.pageColors.background)||!CSS.supports("color",T.pageColors.foreground))&&((T.pageColors.background||T.pageColors.foreground)&&console.warn("Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.defaultRenderingQueue=!T.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new u.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=T.renderingQueue,this._doc=document.documentElement,this.scroll=(0,A.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=A.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.updateContainerHeightCss(),Promise.resolve().then(()=>{this.eventBus.dispatch("baseviewerinit",{source:this})})}get pagesCount(){return this._pages.length}getPageView(T){return this._pages[T]}get pageViewsReady(){return!!this._pagesCapability.settled&&this._pages.every(function(T){return T?.pdfPage})}get renderForms(){return E(this,R)===w.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(T){if(!Number.isInteger(T))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(T,!0)||console.error(`currentPageNumber: "${T}" is not a valid page.`))}_setCurrentPageNumber(T,K=!1){if(this._currentPageNumber===T)return K&&k(this,Y,Ce).call(this),!0;if(!(0<T&&T<=this.pagesCount))return!1;const le=this._currentPageNumber;return this._currentPageNumber=T,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:T,pageLabel:this._pageLabels?.[T-1]??null,previous:le}),K&&k(this,Y,Ce).call(this),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(T){if(!this.pdfDocument)return;let K=0|T;if(this._pageLabels){const le=this._pageLabels.indexOf(T);le>=0&&(K=le+1)}this._setCurrentPageNumber(K,!0)||console.error(`currentPageLabel: "${T}" is not a valid page.`)}get currentScale(){return this._currentScale!==A.UNKNOWN_SCALE?this._currentScale:A.DEFAULT_SCALE}set currentScale(T){if(isNaN(T))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(T,!1)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(T){this.pdfDocument&&this._setScale(T,!1)}get pagesRotation(){return this._pagesRotation}set pagesRotation(T){if(!(0,A.isValidRotation)(T))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||((T%=360)<0&&(T+=360),this._pagesRotation===T))return;this._pagesRotation=T;const K=this._currentPageNumber,le={rotation:T};for(const ge of this._pages)ge.update(le);this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:T,pageNumber:K}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}setDocument(T){var K=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null),this._scriptingManager&&this._scriptingManager.setDocument(null)),this.pdfDocument=T,!T)return;const le=T.isPureXfa,ge=T.numPages,z=T.getPage(1),D=T.getOptionalContentConfig(),V=E(this,e)?T.getPermissions():Promise.resolve();if(ge>M.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const ie=this._scrollMode=A.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:ie})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:ge})},()=>{}),this._onBeforeDraw=ie=>{const ve=this._pages[ie.pageNumber-1];ve&&E(this,oe).push(ve)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=ie=>{ie.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:ie.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,E(this,d)&&(document.removeEventListener("visibilitychange",E(this,d)),t(this,d,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([z,V]).then(([ie,ve])=>{if(T!==this.pdfDocument)return;this._firstPageCapability.resolve(ie),this._optionalContentConfigPromise=D,k(this,p,_e).call(this,ve);const Te=this._scrollMode===A.ScrollMode.PAGE?null:this.viewer,re=this.currentScale,ce=ie.getViewport({scale:re*w.PixelsPerInch.PDF_TO_CSS_UNITS}),Se=this.textLayerMode===A.TextLayerMode.DISABLE||le?null:this,Pe=E(this,R)!==w.AnnotationMode.DISABLE?this:null,fe=le?this:null;for(let ye=1;ye<=ge;++ye){const Ee=new i.PDFPageView({container:Te,eventBus:this.eventBus,id:ye,scale:re,defaultViewport:ce.clone(),optionalContentConfigPromise:D,renderingQueue:this.renderingQueue,textLayerFactory:Se,textLayerMode:this.textLayerMode,annotationLayerFactory:Pe,annotationMode:E(this,R),xfaLayerFactory:fe,textHighlighterFactory:this,structTreeLayerFactory:this,imageResourcesPath:this.imageResourcesPath,renderer:this.renderer,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n});this._pages.push(Ee)}const xe=this._pages[0];xe&&(xe.setPdfPage(ie),this.linkService.cachePageRef(1,ie.ref)),this._scrollMode===A.ScrollMode.PAGE?k(this,L,me).call(this):this._spreadMode!==A.SpreadMode.NONE&&this._updateSpreadMode(),k(this,c,Ae).call(this).then(v(function*(){if(K.findController&&K.findController.setDocument(T),K._scriptingManager&&K._scriptingManager.setDocument(T),T.loadingParams.disableAutoFetch||ge>M.FORCE_LAZY_PAGE_INIT)return void K._pagesCapability.resolve();let ye=ge-1;if(ye<=0)K._pagesCapability.resolve();else for(let Ee=2;Ee<=ge;++Ee){const ke=T.getPage(Ee).then(Me=>{const Le=K._pages[Ee-1];Le.pdfPage||Le.setPdfPage(Me),K.linkService.cachePageRef(Ee,Me.ref),0==--ye&&K._pagesCapability.resolve()},Me=>{console.error(`Unable to get page ${Ee} to initialize viewer`,Me),0==--ye&&K._pagesCapability.resolve()});Ee%M.PAUSE_EAGER_PAGE_INIT==0&&(yield ke)}})),this.eventBus.dispatch("pagesinit",{source:this}),T.getMetadata().then(({info:ye})=>{T===this.pdfDocument&&ye.Language&&(this.viewer.lang=ye.Language)}),this.defaultRenderingQueue&&this.update()}).catch(ie=>{console.error("Unable to initialize viewer",ie),this._pagesCapability.reject(ie)})}setPageLabels(T){if(this.pdfDocument){T?Array.isArray(T)&&this.pdfDocument.numPages===T.length?this._pageLabels=T:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let K=0,le=this._pages.length;K<le;K++)this._pages[K].setPageLabel(this._pageLabels?.[K]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=A.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,t(this,oe,new te(10)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=(0,w.createPromiseCapability)(),this._onePageRenderedCapability=(0,w.createPromiseCapability)(),this._pagesCapability=(0,w.createPromiseCapability)(),this._scrollMode=A.ScrollMode.VERTICAL,this._previousScrollMode=A.ScrollMode.UNKNOWN,this._spreadMode=A.SpreadMode.NONE,t(this,o,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),E(this,d)&&(document.removeEventListener("visibilitychange",E(this,d)),t(this,d,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.viewer.classList.remove(y),null!==E(this,s)&&(t(this,R,E(this,s)),t(this,s,null))}_scrollUpdate(){0!==this.pagesCount&&this.update()}_setScaleUpdatePages(T,K,le=!1,ge=!1){if(this._currentScaleValue=K.toString(),k(this,B,we).call(this,T))return void(ge&&this.eventBus.dispatch("scalechanging",{source:this,scale:T,presetValue:K}));this._doc.style.setProperty("--zoom-factor",T);const z={scale:T};for(const D of this._pages)D.update(z);if(this._currentScale=T,!le){let V,D=this._currentPageNumber;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(D=this._location.pageNumber,V=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:D,destArray:V,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:T,presetValue:ge?K:void 0}),this.defaultRenderingQueue&&this.update(),this.updateContainerHeightCss()}get _pageWidthScaleFactor(){return this._spreadMode!==A.SpreadMode.NONE&&this._scrollMode!==A.ScrollMode.HORIZONTAL?2:1}_setScale(T,K=!1){let le=parseFloat(T);if(le>0)this._setScaleUpdatePages(le,T,K,!1);else{const ge=this._pages[this._currentPageNumber-1];if(!ge)return;let z=A.SCROLLBAR_PADDING,D=A.VERTICAL_PADDING;this.isInPresentationMode?z=D=4:this.removePageBorders?z=D=0:this._scrollMode===A.ScrollMode.HORIZONTAL&&([z,D]=[D,z]);const V=(this.container.clientWidth-z)/ge.width*ge.scale/this._pageWidthScaleFactor,ie=(this.container.clientHeight-D)/ge.height*ge.scale;switch(T){case"page-actual":le=1;break;case"page-width":le=V;break;case"page-height":le=ie;break;case"page-fit":le=Math.min(V,ie);break;case"auto":const ve=(0,A.isPortraitOrientation)(ge)?V:Math.min(ie,V);le=Math.min(A.MAX_AUTO_SCALE,ve);break;default:return void console.error(`_setScale: "${T}" is an unknown zoom value.`)}this._setScaleUpdatePages(le,T,K,!0)}}pageLabelToPageNumber(T){if(!this._pageLabels)return null;const K=this._pageLabels.indexOf(T);return K<0?null:K+1}scrollPageIntoView({pageNumber:T,destArray:K=null,allowNegativeOffset:le=!1,ignoreDestinationZoom:ge=!1}){if(!this.pdfDocument)return;const z=Number.isInteger(T)&&this._pages[T-1];if(!z)return void console.error(`scrollPageIntoView: "${T}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!K)return void this._setCurrentPageNumber(T,!0);let Te,re,D=0,V=0,ie=0,ve=0;const ce=z.rotation%180!=0,Se=(ce?z.height:z.width)/z.scale/w.PixelsPerInch.PDF_TO_CSS_UNITS,Pe=(ce?z.width:z.height)/z.scale/w.PixelsPerInch.PDF_TO_CSS_UNITS;let fe=0;switch(K[1].name){case"XYZ":D=K[2],V=K[3],fe=K[4],D=null!==D?D:0,V=null!==V?V:Pe;break;case"Fit":case"FitB":fe="page-fit";break;case"FitH":case"FitBH":V=K[2],fe="page-width",null===V&&this._location?(D=this._location.left,V=this._location.top):("number"!=typeof V||V<0)&&(V=Pe);break;case"FitV":case"FitBV":D=K[2],ie=Se,ve=Pe,fe="page-height";break;case"FitR":D=K[2],V=K[3],ie=K[4]-D,ve=K[5]-V,Te=(this.container.clientWidth-(this.removePageBorders?0:A.SCROLLBAR_PADDING))/ie/w.PixelsPerInch.PDF_TO_CSS_UNITS,re=(this.container.clientHeight-(this.removePageBorders?0:A.VERTICAL_PADDING))/ve/w.PixelsPerInch.PDF_TO_CSS_UNITS,fe=Math.min(Math.abs(Te),Math.abs(re));break;default:return void console.error(`scrollPageIntoView: "${K[1].name}" is not a valid destination type.`)}if(ge||(fe&&fe!==this._currentScale?this.currentScaleValue=fe:this._currentScale===A.UNKNOWN_SCALE&&(this.currentScaleValue=A.DEFAULT_SCALE_VALUE)),"page-fit"===fe&&!K[4])return void k(this,X,ae).call(this,z);const xe=[z.viewport.convertToViewportPoint(D,V),z.viewport.convertToViewportPoint(D+ie,V+ve)];let ye=Math.min(xe[0][0],xe[1][0]),Ee=Math.min(xe[0][1],xe[1][1]);le||(ye=Math.max(ye,0),Ee=Math.max(Ee,0)),k(this,X,ae).call(this,z,{left:ye,top:Ee})}_updateLocation(T){const K=this._currentScale,le=this._currentScaleValue,ge=parseFloat(le)===K?Math.round(1e4*K)/100:le,z=T.id,V=this.container,ie=this._pages[z-1].getPagePoint(V.scrollLeft-T.x,V.scrollTop-T.y),ve=Math.round(ie[0]),Te=Math.round(ie[1]);let re=`#page=${z}`;this.isInPresentationMode||(re+=`&zoom=${ge},${ve},${Te}`),this._location={pageNumber:z,scale:ge,top:Te,left:ve,rotation:this._pagesRotation,pdfOpenParams:re}}update(){const T=this._getVisiblePages(),K=T.views,le=K.length;if(0===le)return;const ge=Math.max(10,2*le+1);E(this,oe).resize(ge,T.ids),this.renderingQueue.renderHighestPriority(T);const z=this._spreadMode===A.SpreadMode.NONE&&(this._scrollMode===A.ScrollMode.PAGE||this._scrollMode===A.ScrollMode.VERTICAL),D=this._currentPageNumber;let V=!1;for(const ie of K){if(ie.percent<100)break;if(ie.id===D&&z){V=!0;break}}this._setCurrentPageNumber(V?D:K[0].id),this._updateLocation(T.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(T){return this.container.contains(T)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return this.presentationModeState===A.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===A.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const T=this._scrollMode===A.ScrollMode.PAGE?E(this,o).pages:this._pages,K=this._scrollMode===A.ScrollMode.HORIZONTAL;return(0,A.getVisibleElements)({scrollEl:this.container,views:T,sortByVisibility:!0,horizontal:K,rtl:K&&this._isContainerRtl})}isPageVisible(T){return!!this.pdfDocument&&(Number.isInteger(T)&&T>0&&T<=this.pagesCount?this._getVisiblePages().ids.has(T):(console.error(`isPageVisible: "${T}" is not a valid page.`),!1))}isPageCached(T){if(!this.pdfDocument)return!1;if(!(Number.isInteger(T)&&T>0&&T<=this.pagesCount))return console.error(`isPageCached: "${T}" is not a valid page.`),!1;const K=this._pages[T-1];return E(this,oe).has(K)}cleanup(){for(const T of this._pages)T.renderingState!==A.RenderingStates.FINISHED&&T.reset()}_cancelRendering(){for(const T of this._pages)T.cancelRendering()}forceRendering(T){const K=T||this._getVisiblePages(),le=k(this,Z,de).call(this,K),z=this.renderingQueue.getHighestPriority(K,this._pages,le,this._spreadMode!==A.SpreadMode.NONE&&this._scrollMode!==A.ScrollMode.HORIZONTAL);return k(this,ee,be).call(this,K.ids),!!z&&(k(this,$,pe).call(this,z).then(()=>{this.renderingQueue.renderView(z)}),!0)}createTextLayerBuilder(T,K,le,ge=!1,z,D){return new h.TextLayerBuilder({textLayerDiv:T,eventBus:z,pageIndex:K,viewport:le,enhanceTextSelection:!this.isInPresentationMode&&ge,highlighter:D})}createTextHighlighter(T,K){return new m.TextHighlighter({eventBus:K,pageIndex:T,findController:this.isInPresentationMode?null:this.findController})}createAnnotationLayerBuilder(T,K,le=null,ge="",z=!0,D=n.NullL10n,V=null,ie=null,ve=null,Te=null,re=null){return new S.AnnotationLayerBuilder({pageDiv:T,pdfPage:K,annotationStorage:le||this.pdfDocument?.annotationStorage,imageResourcesPath:ge,renderForms:z,linkService:this.linkService,downloadManager:this.downloadManager,l10n:D,enableScripting:V??this.enableScripting,hasJSActionsPromise:ie||this.pdfDocument?.hasJSActions(),fieldObjectsPromise:Te||this.pdfDocument?.getFieldObjects(),mouseState:ve||this._scriptingManager?.mouseState,annotationCanvasMap:re})}createXfaLayerBuilder(T,K,le=null){return new l.XfaLayerBuilder({pageDiv:T,pdfPage:K,annotationStorage:le||this.pdfDocument?.annotationStorage,linkService:this.linkService})}createStructTreeLayerBuilder(T){return new f.StructTreeLayerBuilder({pdfPage:T})}get hasEqualPageSizes(){const T=this._pages[0];for(let K=1,le=this._pages.length;K<le;++K){const ge=this._pages[K];if(ge.width!==T.width||ge.height!==T.height)return!1}return!0}getPagesOverview(){return this._pages.map(T=>{const K=T.pdfPage.getViewport({scale:1});return!this.enablePrintAutoRotate||(0,A.isPortraitOrientation)(K)?{width:K.width,height:K.height,rotation:K.rotation}:{width:K.height,height:K.width,rotation:(K.rotation-90)%360}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:this.pdfDocument.getOptionalContentConfig():Promise.resolve(null)}set optionalContentConfigPromise(T){if(!(T instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${T}`);if(!this.pdfDocument||!this._optionalContentConfigPromise)return;this._optionalContentConfigPromise=T;const K={optionalContentConfigPromise:T};for(const le of this._pages)le.update(K);this.update(),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:T})}get scrollMode(){return this._scrollMode}set scrollMode(T){if(this._scrollMode!==T){if(!(0,A.isValidScrollMode)(T))throw new Error(`Invalid scroll mode: ${T}`);this.pagesCount>M.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=T,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:T}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(T=null){const K=this._scrollMode,le=this.viewer;le.classList.toggle("scrollHorizontal",K===A.ScrollMode.HORIZONTAL),le.classList.toggle("scrollWrapped",K===A.ScrollMode.WRAPPED),this.pdfDocument&&T&&(K===A.ScrollMode.PAGE?k(this,L,me).call(this):this._previousScrollMode===A.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(T,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(T){if(this._spreadMode!==T){if(!(0,A.isValidSpreadMode)(T))throw new Error(`Invalid spread mode: ${T}`);this._spreadMode=T,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:T}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(T=null){if(!this.pdfDocument)return;const K=this.viewer,le=this._pages;if(this._scrollMode===A.ScrollMode.PAGE)k(this,L,me).call(this);else if(K.textContent="",this._spreadMode===A.SpreadMode.NONE)for(const ge of this._pages)K.appendChild(ge.div);else{const ge=this._spreadMode-1;let z=null;for(let D=0,V=le.length;D<V;++D)null===z?(z=document.createElement("div"),z.className="spread",K.appendChild(z)):D%2===ge&&(z=z.cloneNode(!1),K.appendChild(z)),z.appendChild(le[D].div)}T&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(T,!0),this.update())}_getPageAdvance(T,K=!1){switch(this._scrollMode){case A.ScrollMode.WRAPPED:{const{views:le}=this._getVisiblePages(),ge=new Map;for(const{id:z,y:D,percent:V,widthPercent:ie}of le){if(0===V||ie<100)continue;let ve=ge.get(D);ve||ge.set(D,ve||=[]),ve.push(z)}for(const z of ge.values()){const D=z.indexOf(T);if(-1===D)continue;const V=z.length;if(1===V)break;if(K)for(let ie=D-1,ve=0;ie>=ve;ie--){const re=z[ie+1]-1;if(z[ie]<re)return T-re}else for(let ie=D+1,ve=V;ie<ve;ie++){const re=z[ie-1]+1;if(z[ie]>re)return re-T}if(K){const ie=z[0];if(ie<T)return T-ie+1}else{const ie=z[V-1];if(ie>T)return ie-T+1}break}break}case A.ScrollMode.HORIZONTAL:break;case A.ScrollMode.PAGE:case A.ScrollMode.VERTICAL:{if(this._spreadMode===A.SpreadMode.NONE)break;const le=this._spreadMode-1;if(K&&T%2!==le)break;if(!K&&T%2===le)break;const{views:ge}=this._getVisiblePages(),z=K?T-1:T+1;for(const{id:D,percent:V,widthPercent:ie}of ge)if(D===z){if(V>0&&100===ie)return 2;break}break}}return 1}nextPage(){const T=this._currentPageNumber,K=this.pagesCount;if(T>=K)return!1;const le=this._getPageAdvance(T,!1)||1;return this.currentPageNumber=Math.min(T+le,K),!0}previousPage(){const T=this._currentPageNumber;if(T<=1)return!1;const K=this._getPageAdvance(T,!0)||1;return this.currentPageNumber=Math.max(T-K,1),!0}increaseScale(T=1){let K=this._currentScale;do{K=(K*A.DEFAULT_SCALE_DELTA).toFixed(2),K=Math.ceil(10*K)/10,K=Math.min(A.MAX_SCALE,K)}while(--T>0&&K<A.MAX_SCALE);this.currentScaleValue=K}decreaseScale(T=1){let K=this._currentScale;do{K=(K/A.DEFAULT_SCALE_DELTA).toFixed(2),K=Math.floor(10*K)/10,K=Math.max(A.MIN_SCALE,K)}while(--T>0&&K>A.MIN_SCALE);this.currentScaleValue=K}updateContainerHeightCss(){const T=this.container.clientHeight;T!==E(this,r)&&(t(this,r,T),this._doc.style.setProperty("--viewer-container-height",`${T}px`))}}function _e(ne){ne&&(ne.includes(w.PermissionFlag.COPY)||this.viewer.classList.add(y),!ne.includes(w.PermissionFlag.MODIFY_ANNOTATIONS)&&!ne.includes(w.PermissionFlag.FILL_INTERACTIVE_FORMS)&&E(this,R)===w.AnnotationMode.ENABLE_FORMS&&(t(this,s,E(this,R)),t(this,R,w.AnnotationMode.ENABLE)))}function Ae(){if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return Promise.resolve();const ne=new Promise(T=>{t(this,d,()=>{"hidden"===document.visibilityState&&(T(),document.removeEventListener("visibilitychange",E(this,d)),t(this,d,null))}),document.addEventListener("visibilitychange",E(this,d))});return Promise.race([this._onePageRenderedCapability.promise,ne])}function me(){if(this._scrollMode!==A.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const ne=this._currentPageNumber,T=E(this,o),K=this.viewer;if(K.textContent="",T.pages.length=0,this._spreadMode!==A.SpreadMode.NONE||this.isInPresentationMode){const le=new Set,ge=this._spreadMode-1;-1===ge?le.add(ne-1):ne%2!==ge?(le.add(ne-1),le.add(ne)):(le.add(ne-2),le.add(ne-1));const z=document.createElement("div");if(z.className="spread",this.isInPresentationMode){const D=document.createElement("div");D.className="dummyPage",z.appendChild(D)}for(const D of le){const V=this._pages[D];V&&(z.appendChild(V.div),T.pages.push(V))}K.appendChild(z)}else{const le=this._pages[ne-1];K.appendChild(le.div),T.pages.push(le)}T.scrollDown=ne>=T.previousPageNumber,T.previousPageNumber=ne}function ae(ne,T=null){const{div:K,id:le}=ne;if(this._scrollMode===A.ScrollMode.PAGE&&(this._setCurrentPageNumber(le),k(this,L,me).call(this),this.update()),!T&&!this.isInPresentationMode){const ge=K.offsetLeft+K.clientLeft,z=ge+K.clientWidth,{scrollLeft:D,clientWidth:V}=this.container;(this._scrollMode===A.ScrollMode.HORIZONTAL||ge<D||z>D+V)&&(T={left:0,top:0})}(0,A.scrollIntoView)(K,T)}function we(ne){return ne===this._currentScale||Math.abs(ne-this._currentScale)<1e-15}function Ce(){const ne=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0),k(this,X,ae).call(this,ne)}function pe(ne){return se.apply(this,arguments)}function se(){return(se=v(function*(ne){if(ne.pdfPage)return ne.pdfPage;try{const T=yield this.pdfDocument.getPage(ne.id);return ne.pdfPage||ne.setPdfPage(T),this.linkService._cachedPageNumber?.(T.ref)||this.linkService.cachePageRef(ne.id,T.ref),T}catch(T){return console.error("Unable to get page for page view",T),null}})).apply(this,arguments)}function de(ne){if(1===ne.first?.id)return!0;if(ne.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case A.ScrollMode.PAGE:return E(this,o).scrollDown;case A.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}function be(ne){for(const T of ne)this._pages[T-1]?.toggleLoadingIconSpinner(!0);for(const T of E(this,oe))ne.has(T.id)||T.toggleLoadingIconSpinner(!1)}g.BaseViewer=ue},(W,g,x)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFPageView=void 0;var b=x(3),w=x(6),A=x(13),S=x(4);const n=A.compatibilityParams.maxCanvasPixels||16777216;var i=new WeakMap;g.PDFPageView=class u{constructor(f){F(this,i,{writable:!0,value:b.AnnotationMode.ENABLE_FORMS});const m=f.container,h=f.defaultViewport;this.id=f.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=f.scale||w.DEFAULT_SCALE,this.viewport=h,this.pdfPageRotate=h.rotation,this._optionalContentConfigPromise=f.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=f.textLayerMode??w.TextLayerMode.ENABLE,t(this,i,f.annotationMode??b.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=f.imageResourcesPath||"",this.useOnlyCssZoom=f.useOnlyCssZoom||!1,this.maxCanvasPixels=f.maxCanvasPixels||n,this.pageColors=f.pageColors||null,this.eventBus=f.eventBus,this.renderingQueue=f.renderingQueue,this.textLayerFactory=f.textLayerFactory,this.annotationLayerFactory=f.annotationLayerFactory,this.xfaLayerFactory=f.xfaLayerFactory,this.textHighlighter=f.textHighlighterFactory?.createTextHighlighter(this.id-1,this.eventBus),this.structTreeLayerFactory=f.structTreeLayerFactory,this.renderer=f.renderer||w.RendererType.CANVAS,this.l10n=f.l10n||S.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=w.RenderingStates.INITIAL,this.resume=null,this._renderError=null,this._isStandalone=!this.renderingQueue?.hasViewer(),this._annotationCanvasMap=null,this.annotationLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const l=document.createElement("div");l.className="page",l.style.width=Math.floor(this.viewport.width)+"px",l.style.height=Math.floor(this.viewport.height)+"px",l.setAttribute("data-page-number",this.id),l.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(_=>{l.setAttribute("aria-label",_)}),this.div=l,m?.appendChild(l)}setPdfPage(f){this.pdfPage=f,this.pdfPageRotate=f.rotate,this.viewport=f.getViewport({scale:this.scale*b.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.reset()}destroy(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}_renderAnnotationLayer(){var f=this;return v(function*(){let m=null;try{yield f.annotationLayer.render(f.viewport,"display")}catch(h){m=h}finally{f.eventBus.dispatch("annotationlayerrendered",{source:f,pageNumber:f.id,error:m})}})()}_renderXfaLayer(){var f=this;return v(function*(){let m=null;try{const h=yield f.xfaLayer.render(f.viewport,"display");f.textHighlighter&&f._buildXfaTextContentItems(h.textDivs)}catch(h){m=h}finally{f.eventBus.dispatch("xfalayerrendered",{source:f,pageNumber:f.id,error:m})}})()}_buildXfaTextContentItems(f){var m=this;return v(function*(){const h=yield m.pdfPage.getTextContent(),l=[];for(const _ of h.items)l.push(_.str);m.textHighlighter.setTextMapping(f,l),m.textHighlighter.enable()})()}_resetZoomLayer(f=!1){if(!this.zoomLayer)return;const m=this.zoomLayer.firstChild;this.paintedViewportMap.delete(m),m.width=0,m.height=0,f&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:f=!1,keepAnnotationLayer:m=!1,keepXfaLayer:h=!1}={}){this.cancelRendering({keepAnnotationLayer:m,keepXfaLayer:h}),this.renderingState=w.RenderingStates.INITIAL;const l=this.div;l.style.width=Math.floor(this.viewport.width)+"px",l.style.height=Math.floor(this.viewport.height)+"px";const _=l.childNodes,y=f&&this.zoomLayer||null,M=m&&this.annotationLayer?.div||null,q=h&&this.xfaLayer?.div||null;for(let Q=_.length-1;Q>=0;Q--){const J=_[Q];switch(J){case y:case M:case q:continue}J.remove()}l.removeAttribute("data-loaded"),M&&this.annotationLayer.hide(),q&&this.xfaLayer.hide(),y||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon notVisible",this._isStandalone&&this.toggleLoadingIconSpinner(!0),this.loadingIconDiv.setAttribute("role","img"),this.l10n.get("loading").then(Q=>{this.loadingIconDiv?.setAttribute("aria-label",Q)}),l.appendChild(this.loadingIconDiv)}update({scale:f=0,rotation:m=null,optionalContentConfigPromise:h=null}){if(this.scale=f||this.scale,"number"==typeof m&&(this.rotation=m),h instanceof Promise&&(this._optionalContentConfigPromise=h),this.viewport=this.viewport.clone({scale:this.scale*b.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this._isStandalone){const{style:y}=document.documentElement;y.setProperty("--zoom-factor",this.scale)}if(this.svg)return this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});let _=!1;if(this.canvas&&this.maxCanvasPixels>0){const y=this.outputScale;(Math.floor(this.viewport.width)*y.sx|0)*(Math.floor(this.viewport.height)*y.sy|0)>this.maxCanvasPixels&&(_=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&_)return this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepXfaLayer:!0})}cancelRendering({keepAnnotationLayer:f=!1,keepXfaLayer:m=!1}={}){this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),this.annotationLayer&&(!f||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.xfaLayer&&(!m||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,this.textHighlighter?.disable()),this._onTextLayerRendered&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null)}cssTransform({target:f,redrawAnnotationLayer:m=!1,redrawXfaLayer:h=!1}){const l=this.viewport.width,_=this.viewport.height,y=this.div;f.style.width=f.parentNode.style.width=y.style.width=Math.floor(l)+"px",f.style.height=f.parentNode.style.height=y.style.height=Math.floor(_)+"px";const M=this.viewport.rotation-this.paintedViewportMap.get(f).rotation,q=Math.abs(M);let Q=1,J=1;if((90===q||270===q)&&(Q=_/l,J=l/_),f.style.transform=`rotate(${M}deg) scale(${Q}, ${J})`,this.textLayer){const te=this.textLayer.viewport,oe=Math.abs(this.viewport.rotation-te.rotation);let R=l/te.width;(90===oe||270===oe)&&(R=l/te.height);const s=this.textLayer.textLayerDiv;let e,r;switch(oe){case 0:e=r=0;break;case 90:e=0,r="-"+s.style.height;break;case 180:e="-"+s.style.width,r="-"+s.style.height;break;case 270:e="-"+s.style.width,r=0;break;default:console.error("Bad rotation value.")}s.style.transform=`rotate(${oe}deg) scale(${R}) translate(${e}, ${r})`,s.style.transformOrigin="0% 0%"}m&&this.annotationLayer&&this._renderAnnotationLayer(),h&&this.xfaLayer&&this._renderXfaLayer()}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(f,m){return this.viewport.convertToPdfPoint(f,m)}toggleLoadingIconSpinner(f=!1){this.loadingIconDiv?.classList.toggle("notVisible",!f)}draw(){var f=this;this.renderingState!==w.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:m,pdfPage:h}=this;if(!h)return this.renderingState=w.RenderingStates.FINISHED,this.loadingIconDiv&&(this.loadingIconDiv.remove(),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=w.RenderingStates.RUNNING;const l=document.createElement("div");l.style.width=m.style.width,l.style.height=m.style.height,l.classList.add("canvasWrapper"),this.annotationLayer?.div?m.insertBefore(l,this.annotationLayer.div):m.appendChild(l);let _=null;if(this.textLayerMode!==w.TextLayerMode.DISABLE&&this.textLayerFactory){const J=document.createElement("div");J.className="textLayer",J.style.width=l.style.width,J.style.height=l.style.height,this.annotationLayer?.div?m.insertBefore(J,this.annotationLayer.div):m.appendChild(J),_=this.textLayerFactory.createTextLayerBuilder(J,this.id-1,this.viewport,this.textLayerMode===w.TextLayerMode.ENABLE_ENHANCE,this.eventBus,this.textHighlighter)}this.textLayer=_,E(this,i)!==b.AnnotationMode.DISABLE&&this.annotationLayerFactory&&(this._annotationCanvasMap||=new Map,this.annotationLayer||=this.annotationLayerFactory.createAnnotationLayerBuilder(m,h,null,this.imageResourcesPath,E(this,i)===b.AnnotationMode.ENABLE_FORMS,this.l10n,null,null,null,null,this._annotationCanvasMap)),this.xfaLayer?.div&&m.appendChild(this.xfaLayer.div);let y=null;this.renderingQueue&&(y=J=>{if(!this.renderingQueue.isHighestPriority(this))return this.renderingState=w.RenderingStates.PAUSED,void(this.resume=()=>{this.renderingState=w.RenderingStates.RUNNING,J()});J()});const M=function(){var J=v(function*(te=null){if(q===f.paintTask&&(f.paintTask=null),te instanceof b.RenderingCancelledException)f._renderError=null;else if(f._renderError=te,f.renderingState=w.RenderingStates.FINISHED,f.loadingIconDiv&&(f.loadingIconDiv.remove(),delete f.loadingIconDiv),f._resetZoomLayer(!0),f.eventBus.dispatch("pagerendered",{source:f,pageNumber:f.id,cssTransform:!1,timestamp:performance.now(),error:f._renderError}),te)throw te});return function(){return J.apply(this,arguments)}}(),q=this.renderer===w.RendererType.SVG?this.paintOnSvg(l):this.paintOnCanvas(l);q.onRenderContinue=y,this.paintTask=q;const Q=q.promise.then(()=>M(null).then(()=>{if(_){const J=h.streamTextContent({includeMarkedContent:!0});_.setTextContentStream(J),_.render()}this.annotationLayer&&this._renderAnnotationLayer()}),function(J){return M(J)});return this.xfaLayerFactory&&(this.xfaLayer||(this.xfaLayer=this.xfaLayerFactory.createXfaLayerBuilder(m,h,null)),this._renderXfaLayer()),this.structTreeLayerFactory&&this.textLayer&&this.canvas&&(this._onTextLayerRendered=J=>{J.pageNumber===this.id&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null,this.canvas&&this.pdfPage.getStructTree().then(te=>{if(!te||!this.canvas)return;const he=this.structTreeLayer.render(te);he.classList.add("structTree"),this.canvas.appendChild(he)}))},this.eventBus._on("textlayerrendered",this._onTextLayerRendered),this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder(h)),m.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),Q}paintOnCanvas(f){const m=(0,b.createPromiseCapability)(),h={promise:m.promise,onRenderContinue(s){s()},cancel(){R.cancel()}},l=this.viewport,_=document.createElement("canvas");_.hidden=!0;let y=!0;const M=function(){y&&(_.hidden=!1,y=!1)};f.appendChild(_),this.canvas=_;const q=_.getContext("2d",{alpha:!1}),Q=this.outputScale=new w.OutputScale;if(this.useOnlyCssZoom){const s=l.clone({scale:b.PixelsPerInch.PDF_TO_CSS_UNITS});Q.sx*=s.width/l.width,Q.sy*=s.height/l.height}if(this.maxCanvasPixels>0){const e=Math.sqrt(this.maxCanvasPixels/(l.width*l.height));Q.sx>e||Q.sy>e?(Q.sx=e,Q.sy=e,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const J=(0,w.approximateFraction)(Q.sx),te=(0,w.approximateFraction)(Q.sy);_.width=(0,w.roundToDivide)(l.width*Q.sx,J[0]),_.height=(0,w.roundToDivide)(l.height*Q.sy,te[0]),_.style.width=(0,w.roundToDivide)(l.width,J[1])+"px",_.style.height=(0,w.roundToDivide)(l.height,te[1])+"px",this.paintedViewportMap.set(_,l);const oe={canvasContext:q,transform:Q.scaled?[Q.sx,0,0,Q.sy,0,0]:null,viewport:this.viewport,annotationMode:E(this,i),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:this.pageColors},R=this.pdfPage.render(oe);return R.onContinue=function(s){M(),h.onRenderContinue?h.onRenderContinue(s):s()},R.promise.then(function(){M(),m.resolve()},function(s){M(),m.reject(s)}),h}paintOnSvg(f){let m=!1;const h=()=>{if(m)throw new b.RenderingCancelledException(`Rendering cancelled, page ${this.id}`,"svg")},l=this.pdfPage,_=this.viewport.clone({scale:b.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:l.getOperatorList({annotationMode:E(this,i)}).then(M=>(h(),new b.SVGGraphics(l.commonObjs,l.objs).getSVG(M,_).then(Q=>{h(),this.svg=Q,this.paintedViewportMap.set(Q,_),Q.style.width=f.style.width,Q.style.height=f.style.height,this.renderingState=w.RenderingStates.FINISHED,f.appendChild(Q)}))),onRenderContinue(M){M()},cancel(){m=!0}}}setPageLabel(f){this.pageLabel="string"==typeof f?f:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}}},(W,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.compatibilityParams=g.OptionKind=g.AppOptions=void 0;const x=Object.create(null);g.compatibilityParams=x;{const n=navigator.userAgent||"",i=navigator.platform||"",u=navigator.maxTouchPoints||1,P=/Android/.test(n);(/\b(iPad|iPhone|iPod)(?=;)/.test(n)||"MacIntel"===i&&u>1||P)&&(x.maxCanvasPixels=5242880)}const b={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};g.OptionKind=b;const w={annotationMode:{value:2,kind:b.VIEWER+b.PREFERENCE},cursorToolOnLoad:{value:0,kind:b.VIEWER+b.PREFERENCE},defaultUrl:{value:"compressed.tracemonkey-pldi-09.pdf",kind:b.VIEWER},defaultZoomValue:{value:"",kind:b.VIEWER+b.PREFERENCE},disableHistory:{value:!1,kind:b.VIEWER},disablePageLabels:{value:!1,kind:b.VIEWER+b.PREFERENCE},enablePermissions:{value:!1,kind:b.VIEWER+b.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:b.VIEWER+b.PREFERENCE},enableScripting:{value:!0,kind:b.VIEWER+b.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:b.VIEWER},externalLinkTarget:{value:0,kind:b.VIEWER+b.PREFERENCE},historyUpdateUrl:{value:!1,kind:b.VIEWER+b.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:b.VIEWER+b.PREFERENCE},imageResourcesPath:{value:"./images/",kind:b.VIEWER},maxCanvasPixels:{value:16777216,compatibility:x.maxCanvasPixels,kind:b.VIEWER},pageColorsBackground:{value:"Canvas",kind:b.VIEWER+b.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:b.VIEWER+b.PREFERENCE},pdfBugEnabled:{value:!1,kind:b.VIEWER+b.PREFERENCE},printResolution:{value:150,kind:b.VIEWER},renderer:{value:"canvas",kind:b.VIEWER},sidebarViewOnLoad:{value:-1,kind:b.VIEWER+b.PREFERENCE},scrollModeOnLoad:{value:-1,kind:b.VIEWER+b.PREFERENCE},spreadModeOnLoad:{value:-1,kind:b.VIEWER+b.PREFERENCE},textLayerMode:{value:1,kind:b.VIEWER+b.PREFERENCE},useOnlyCssZoom:{value:!1,kind:b.VIEWER+b.PREFERENCE},viewerCssTheme:{value:0,kind:b.VIEWER+b.PREFERENCE},viewOnLoad:{value:0,kind:b.VIEWER+b.PREFERENCE},cMapPacked:{value:!0,kind:b.API},cMapUrl:{value:"../web/cmaps/",kind:b.API},disableAutoFetch:{value:!1,kind:b.API+b.PREFERENCE},disableFontFace:{value:!1,kind:b.API+b.PREFERENCE},disableRange:{value:!1,kind:b.API+b.PREFERENCE},disableStream:{value:!1,kind:b.API+b.PREFERENCE},docBaseUrl:{value:"",kind:b.API},enableXfa:{value:!0,kind:b.API+b.PREFERENCE},fontExtraProperties:{value:!1,kind:b.API},isEvalSupported:{value:!0,kind:b.API},maxImageSize:{value:-1,kind:b.API},pdfBug:{value:!1,kind:b.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:b.API},verbosity:{value:1,kind:b.API},workerPort:{value:null,kind:b.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:b.WORKER}};w.disablePreferences={value:!1,kind:b.VIEWER},w.locale={value:navigator.language||"en-US",kind:b.VIEWER},w.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:b.VIEWER},w.renderer.kind+=b.PREFERENCE;const A=Object.create(null);g.AppOptions=class S{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(i){const u=A[i];if(void 0!==u)return u;const P=w[i];return void 0!==P?P.compatibility??P.value:void 0}static getAll(i=null){const u=Object.create(null);for(const P in w){const f=w[P];if(i){if(!(i&f.kind))continue;if(i===b.PREFERENCE){const h=f.value,l=typeof h;if("boolean"===l||"string"===l||"number"===l&&Number.isInteger(h)){u[P]=h;continue}throw new Error(`Invalid type for preference: ${P}`)}}const m=A[P];u[P]=void 0!==m?m:f.compatibility??f.value}return u}static set(i,u){A[i]=u}static setAll(i){for(const u in i)A[u]=i[u]}static remove(i){delete A[i]}static _hasUserOptions(){return Object.keys(A).length>0}}},(W,g,x)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFRenderingQueue=void 0;var b=x(3),w=x(6);g.PDFRenderingQueue=class S{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(i){this.pdfViewer=i}setThumbnailViewer(i){this.pdfThumbnailViewer=i}isHighestPriority(i){return this.highestPriorityPage===i.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(i){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(i)&&(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4)))}getHighestPriority(i,u,P,f=!1){const m=i.views,h=m.length;if(0===h)return null;for(let q=0;q<h;q++){const Q=m[q].view;if(!this.isViewFinished(Q))return Q}const l=i.first.id,_=i.last.id;if(_-l+1>h){const q=i.ids;for(let Q=1,J=_-l;Q<J;Q++){const te=P?l+Q:_-Q;if(q.has(te))continue;const he=u[te-1];if(!this.isViewFinished(he))return he}}let y=P?_:l-2,M=u[y];return M&&!this.isViewFinished(M)||f&&(y+=P?1:-1,M=u[y],M&&!this.isViewFinished(M))?M:null}isViewFinished(i){return i.renderingState===w.RenderingStates.FINISHED}renderView(i){switch(i.renderingState){case w.RenderingStates.FINISHED:return!1;case w.RenderingStates.PAUSED:this.highestPriorityPage=i.renderingId,i.resume();break;case w.RenderingStates.RUNNING:this.highestPriorityPage=i.renderingId;break;case w.RenderingStates.INITIAL:this.highestPriorityPage=i.renderingId,i.draw().finally(()=>{this.renderHighestPriority()}).catch(u=>{u instanceof b.RenderingCancelledException||console.error(`renderView: "${u}"`)})}return!0}}},(W,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.TextHighlighter=void 0,g.TextHighlighter=class x{constructor({findController:w,eventBus:A,pageIndex:S}){this.findController=w,this.matches=[],this.eventBus=A,this.pageIdx=S,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(w,A){this.textDivs=w,this.textContentItemsStr=A}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=w=>{(w.pageIndex===this.pageIdx||-1===w.pageIndex)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null))}_convertMatches(w,A){if(!w)return[];const{textContentItemsStr:S}=this;let n=0,i=0;const u=S.length-1,P=[];for(let f=0,m=w.length;f<m;f++){let h=w[f];for(;n!==u&&h>=i+S[n].length;)i+=S[n].length,n++;n===S.length&&console.error("Could not find a matching mapping");const l={begin:{divIdx:n,offset:h-i}};for(h+=A[f];n!==u&&h>i+S[n].length;)i+=S[n].length,n++;l.end={divIdx:n,offset:h-i},P.push(l)}return P}_renderMatches(w){if(0===w.length)return;const{findController:A,pageIdx:S}=this,{textContentItemsStr:n,textDivs:i}=this,u=S===A.selected.pageIdx,P=A.selected.matchIdx;let m=null;function l(q,Q){const J=q.divIdx;return i[J].textContent="",_(J,0,q.offset,Q)}function _(q,Q,J,te){let he=i[q];if(he.nodeType===Node.TEXT_NODE){const s=document.createElement("span");he.parentNode.insertBefore(s,he),s.appendChild(he),i[q]=s,he=s}const oe=n[q].substring(Q,J),R=document.createTextNode(oe);if(te){const s=document.createElement("span");return s.className=`${te} appended`,s.appendChild(R),he.appendChild(s),te.includes("selected")?s.offsetLeft:0}return he.appendChild(R),0}let y=P,M=y+1;if(A.state.highlightAll)y=0,M=w.length;else if(!u)return;for(let q=y;q<M;q++){const Q=w[q],J=Q.begin,te=Q.end,he=u&&q===P,oe=he?" selected":"";let R=0;if(m&&J.divIdx===m.divIdx?_(m.divIdx,m.offset,J.offset):(null!==m&&_(m.divIdx,m.offset,undefined),l(J)),J.divIdx===te.divIdx)R=_(J.divIdx,J.offset,te.offset,"highlight"+oe);else{R=_(J.divIdx,J.offset,undefined,"highlight begin"+oe);for(let s=J.divIdx+1,e=te.divIdx;s<e;s++)i[s].className="highlight middle"+oe;l(te,"highlight end"+oe)}m=te,he&&A.scrollMatchIntoView({element:i[J.divIdx],selectedLeft:R,pageIndex:S,matchIndex:P})}m&&_(m.divIdx,m.offset,undefined)}_updateMatches(){if(!this.enabled)return;const{findController:w,matches:A,pageIdx:S}=this,{textContentItemsStr:n,textDivs:i}=this;let u=-1;for(let m=0,h=A.length;m<h;m++){const l=A[m];for(let y=Math.max(u,l.begin.divIdx),M=l.end.divIdx;y<=M;y++){const q=i[y];q.textContent=n[y],q.className=""}u=l.end.divIdx+1}w?.highlightMatches&&(this.matches=this._convertMatches(w.pageMatches[S]||null,w.pageMatchesLength[S]||null),this._renderMatches(this.matches))}}},(W,g,x)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.DownloadManager=void 0;var b=x(3);function w(S,n){const i=document.createElement("a");if(!i.click)throw new Error('DownloadManager: "a.click()" is not supported.');i.href=S,i.target="_parent","download"in i&&(i.download=n),(document.body||document.documentElement).appendChild(i),i.click(),i.remove()}g.DownloadManager=class A{constructor(){this._openBlobUrls=new WeakMap}downloadUrl(n,i){(0,b.createValidAbsoluteUrl)(n,"http://example.com")?w(n+"#pdfjs.action=download",i):console.error(`downloadUrl - not a valid URL: ${n}`)}downloadData(n,i,u){w(URL.createObjectURL(new Blob([n],{type:u})),i)}openOrDownloadData(n,i,u){const P=(0,b.isPdfFile)(u),f=P?"application/pdf":"";if(P){let h,m=this._openBlobUrls.get(n);m||(m=URL.createObjectURL(new Blob([i],{type:f})),this._openBlobUrls.set(n,m)),h="?file="+encodeURIComponent(m+"#"+u);try{return window.open(h),!0}catch(l){console.error(`openOrDownloadData: ${l}`),URL.revokeObjectURL(m),this._openBlobUrls.delete(n)}}return this.downloadData(i,u,f),!1}download(n,i,u,P="download"){w(URL.createObjectURL(n),u)}}},(W,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.WaitOnType=g.EventBus=g.AutomationEventBus=void 0,g.waitOnEventOrTimeout=function b({target:S,name:n,delay:i=0}){return new Promise(function(u,P){if("object"!=typeof S||!n||"string"!=typeof n||!(Number.isInteger(i)&&i>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function f(_){S instanceof w?S._off(n,m):S.removeEventListener(n,m),l&&clearTimeout(l),u(_)}const m=f.bind(null,x.EVENT);S instanceof w?S._on(n,m):S.addEventListener(n,m);const h=f.bind(null,x.TIMEOUT),l=setTimeout(h,i)})};const x={EVENT:"event",TIMEOUT:"timeout"};g.WaitOnType=x;class w{constructor(){this._listeners=Object.create(null)}on(n,i,u=null){this._on(n,i,{external:!0,once:u?.once})}off(n,i,u=null){this._off(n,i,{external:!0,once:u?.once})}dispatch(n,i){const u=this._listeners[n];if(!u||0===u.length)return;let P;for(const{listener:f,external:m,once:h}of u.slice(0))h&&this._off(n,f),m?(P||=[]).push(f):f(i);if(P){for(const f of P)f(i);P=null}}_on(n,i,u=null){(this._listeners[n]||=[]).push({listener:i,external:!0===u?.external,once:!0===u?.once})}_off(n,i,u=null){const P=this._listeners[n];if(P)for(let f=0,m=P.length;f<m;f++)if(P[f].listener===i)return void P.splice(f,1)}}g.EventBus=w,g.AutomationEventBus=class A extends w{dispatch(n,i){throw new Error("Not implemented: AutomationEventBus.dispatch")}}},(W,g,x)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.GenericL10n=void 0,x(19);var b=x(4);const w=document.webL10n;g.GenericL10n=class A{constructor(n){this._lang=n,this._ready=new Promise((i,u)=>{w.setLanguage((0,b.fixupLangCode)(n),()=>{i(w)})})}getLanguage(){var n=this;return v(function*(){return(yield n._ready).getLanguage()})()}getDirection(){var n=this;return v(function*(){return(yield n._ready).getDirection()})()}get(n,i=null,u=(0,b.getL10nFallback)(n,i)){var P=this;return v(function*(){return(yield P._ready).get(n,i,u)})()}translate(n){var i=this;return v(function*(){return(yield i._ready).translate(n)})()}}},()=>{document.webL10n=function(W,g,x){var b={},w="",A="textContent",S="",n={},i="loading",u=!0;function l(s,e,r){e=e||function(p){},r=r||function(){};var o=new XMLHttpRequest;o.open("GET",s,u),o.overrideMimeType&&o.overrideMimeType("text/plain; charset=utf-8"),o.onreadystatechange=function(){4==o.readyState&&(200==o.status||0===o.status?e(o.responseText):r())},o.onerror=r,o.ontimeout=r;try{o.send(null)}catch{r()}}function y(s,e){s&&(s=s.toLowerCase()),e=e||function(){},function M(){b={},w="",S=""}(),S=s;var r=function P(){return g.querySelectorAll('link[type="application/l10n"]')}(),o=r.length;if(0!==o){var L,X=0;L=function(){++X>=o&&(e(),i="complete")};for(var Y=0;Y<o;Y++)new B(r[Y]).load(s,L)}else{var d=function f(){var s=g.querySelector('script[type="application/l10n"]');return s?JSON.parse(s.innerHTML):null}();if(d&&d.locales&&d.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(b=d.locales[s])){var p=d.default_locale.toLowerCase();for(var c in d.locales){if((c=c.toLowerCase())===s){b=d.locales[s];break}c===p&&(b=d.locales[p])}}e()}else console.log("no resource to load, early way out");i="complete"}function B(Z){var ee=Z.href;this.load=function(ue,_e){!function _(s,e,r,o){var d=s.replace(/[^\/]*$/,"")||"./";function p(L){return L.lastIndexOf("\\")<0?L:L.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}l(s,function(L){w+=L,function c(L,X){var B={},Y=/^\s*|\s*$/,$=/^\s*#|^\s*$/,Z=/^\s*\[(.*)\]\s*$/,ee=/^\s*@import\s+url\((.*)\)\s*$/i,ue=/^([^=\s]*)\s*=\s*(.+)$/;function _e(me,ae,we){var Ce=me.replace(Y,"").split(/[\r\n]+/),pe="*",se=e.split("-",1)[0],de=!1,be="";!function ne(){for(;;){if(!Ce.length)return void we();var T=Ce.shift();if(!$.test(T)){if(ae){if(be=Z.exec(T)){pe=be[1].toLowerCase(),de="*"!==pe&&pe!==e&&pe!==se;continue}if(de)continue;if(be=ee.exec(T))return void Ae(d+be[1],ne)}var K=T.match(ue);K&&3==K.length&&(B[K[1]]=p(K[2]))}}}()}function Ae(me,ae){l(me,function(we){_e(we,!1,ae)},function(){console.warn(me+" not found."),ae()})}_e(L,!0,function(){X(B)})}(L,function(X){for(var B in X){var Y,$,Z=B.lastIndexOf(".");Z>0?(Y=B.substring(0,Z),$=B.substring(Z+1)):(Y=B,$=A),b[Y]||(b[Y]={}),b[Y][$]=X[B]}r&&r()})},o)}(ee,ue,_e,function(){console.warn(ee+" not found."),console.warn('"'+ue+'" resource not found'),S="",_e()})}}}function Q(s,e,r){var o=b[s];if(!o){if(console.warn("#"+s+" is undefined."),!r)return null;o=r}var d={};for(var p in o){var c=o[p];c=te(c=J(c,e,s,p),e,s),d[p]=c}return d}function J(s,e,r,o){var p=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(s);if(!p||!p.length)return s;var X,c=p[1],L=p[2];return e&&L in e?X=e[L]:L in b&&(X=b[L]),c in n&&(s=(0,n[c])(s,X,r,o)),s}function te(s,e,r){return s.replace(/\{\{\s*(.+?)\s*\}\}/g,function(d,p){return e&&p in e?e[p]:p in b?b[p]:(console.log("argument {{"+p+"}} for #"+r+" is undefined."),d)})}function he(s){var e=function h(s){if(!s)return{};var e=s.getAttribute("data-l10n-id"),r=s.getAttribute("data-l10n-args"),o={};if(r)try{o=JSON.parse(r)}catch{console.warn("could not parse arguments for #"+e)}return{id:e,args:o}}(s);if(e.id){var r=Q(e.id,e.args);if(!r)return void console.warn("#"+e.id+" is undefined.");if(r[A]){if(0===function oe(s){if(s.children)return s.children.length;if(typeof s.childElementCount<"u")return s.childElementCount;for(var e=0,r=0;r<s.childNodes.length;r++)e+=1===s.nodeType?1:0;return e}(s))s[A]=r[A];else{for(var o=s.childNodes,d=!1,p=0,c=o.length;p<c;p++)3===o[p].nodeType&&/\S/.test(o[p].nodeValue)&&(d?o[p].nodeValue="":(o[p].nodeValue=r[A],d=!0));if(!d){var L=g.createTextNode(r[A]);s.insertBefore(L,s.firstChild)}}delete r[A]}for(var X in r)s[X]=r[X]}}return n.plural=function(s,e,r,o){var d=parseFloat(e);if(isNaN(d)||o!=A)return s;n._pluralRules||(n._pluralRules=function q(s){function r(c,L){return-1!==L.indexOf(c)}function o(c,L,X){return L<=c&&c<=X}var d={0:function(c){return"other"},1:function(c){return o(c%100,3,10)?"few":0===c?"zero":o(c%100,11,99)?"many":2==c?"two":1==c?"one":"other"},2:function(c){return 0!==c&&c%10==0?"many":2==c?"two":1==c?"one":"other"},3:function(c){return 1==c?"one":"other"},4:function(c){return o(c,0,1)?"one":"other"},5:function(c){return o(c,0,2)&&2!=c?"one":"other"},6:function(c){return 0===c?"zero":c%10==1&&c%100!=11?"one":"other"},7:function(c){return 2==c?"two":1==c?"one":"other"},8:function(c){return o(c,3,6)?"few":o(c,7,10)?"many":2==c?"two":1==c?"one":"other"},9:function(c){return 0===c||1!=c&&o(c%100,1,19)?"few":1==c?"one":"other"},10:function(c){return o(c%10,2,9)&&!o(c%100,11,19)?"few":c%10!=1||o(c%100,11,19)?"other":"one"},11:function(c){return o(c%10,2,4)&&!o(c%100,12,14)?"few":c%10==0||o(c%10,5,9)||o(c%100,11,14)?"many":c%10==1&&c%100!=11?"one":"other"},12:function(c){return o(c,2,4)?"few":1==c?"one":"other"},13:function(c){return o(c%10,2,4)&&!o(c%100,12,14)?"few":1!=c&&o(c%10,0,1)||o(c%10,5,9)||o(c%100,12,14)?"many":1==c?"one":"other"},14:function(c){return o(c%100,3,4)?"few":c%100==2?"two":c%100==1?"one":"other"},15:function(c){return 0===c||o(c%100,2,10)?"few":o(c%100,11,19)?"many":1==c?"one":"other"},16:function(c){return c%10==1&&11!=c?"one":"other"},17:function(c){return 3==c?"few":0===c?"zero":6==c?"many":2==c?"two":1==c?"one":"other"},18:function(c){return 0===c?"zero":o(c,0,2)&&0!==c&&2!=c?"one":"other"},19:function(c){return o(c,2,10)?"few":o(c,0,1)?"one":"other"},20:function(c){return!o(c%10,3,4)&&c%10!=9||o(c%100,10,19)||o(c%100,70,79)||o(c%100,90,99)?c%1e6==0&&0!==c?"many":c%10!=2||r(c%100,[12,72,92])?c%10!=1||r(c%100,[11,71,91])?"other":"one":"two":"few"},21:function(c){return 0===c?"zero":1==c?"one":"other"},22:function(c){return o(c,0,1)||o(c,11,99)?"one":"other"},23:function(c){return o(c%10,1,2)||c%20==0?"one":"other"},24:function(c){return o(c,3,10)||o(c,13,19)?"few":r(c,[2,12])?"two":r(c,[1,11])?"one":"other"}},p={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[s.replace(/-.*$/,"")];return p in d?d[p]:(console.warn("plural form unknown for ["+s+"]"),function(){return"other"})}(S));var p="["+n._pluralRules(d)+"]";return 0===d&&r+"[zero]"in b?s=b[r+"[zero]"][o]:1==d&&r+"[one]"in b?s=b[r+"[one]"][o]:2==d&&r+"[two]"in b?s=b[r+"[two]"][o]:r+p in b?s=b[r+p][o]:r+"[other]"in b&&(s=b[r+"[other]"][o]),s},{get:function(s,e,r){var p,o=s.lastIndexOf("."),d=A;o>0&&(d=s.substring(o+1),s=s.substring(0,o)),r&&((p={})[d]=r);var c=Q(s,e,p);return c&&d in c?c[d]:"{{"+s+"}}"},getData:function(){return b},getText:function(){return w},getLanguage:function(){return S},setLanguage:function(s,e){y(s,function(){e&&e()})},getDirection:function(){var e=S.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(e)>=0?"rtl":"ltr"},translate:function R(s){for(var e=function m(s){return s?s.querySelectorAll("*[data-l10n-id]"):[]}(s=s||g.documentElement),r=e.length,o=0;o<r;o++)he(e[o]);he(s)},getReadyState:function(){return i},ready:function(s){s&&("complete"==i||"interactive"==i?W.setTimeout(function(){s()}):g.addEventListener&&g.addEventListener("localized",function e(){g.removeEventListener("localized",e),s()}))}}}(window,document)},(W,g,x)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFFindController=g.FindState=void 0;var b=x(6),w=x(3),A=x(21);const S={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};g.FindState=S;const P={"\u2010":"-","\u2018":"'","\u2019":"'","\u201a":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201e":'"',"\u201f":'"',"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4"},f=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),m=[...f.values()].map(re=>String.fromCharCode(re)).join(""),h=/\p{M}+/gu,l=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,_=/([^\p{M}])\p{M}*$/u,y=/^\p{M}*([^\p{M}])/u;let M=null;function q(re){if(!M){const Le=Object.keys(P).join("");M=new RegExp(`([${Le}])|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(\\n)`,"gum")}const ce=[];let Se;for(;null!==(Se=h.exec(re));)ce.push([Se[0].length,Se.index]);let Pe=re.normalize("NFD");const fe=[[0,0]];let xe=0,ye=0,Ee=0,ke=0,Me=!1;return Pe=Pe.replace(M,(Le,Ne,Re,De,Fe,Oe)=>{if(Oe-=Ee,Ne){const Ie=P[Le],Ve=Ie.length;for(let Be=1;Be<Ve;Be++)fe.push([Oe-ye+Be,ye-Be]);return ye-=Ve-1,Ie}if(Re){const Ie=Re.endsWith("\n"),Ve=Ie?Re.length-2:Re.length;Me=!0;let Be=Ve;Oe+ke===ce[xe]?.[1]&&(Be-=ce[xe][0],++xe);for(let Ue=1;Ue<Be+1;Ue++)fe.push([Oe-1-ye+Ue,ye-Ue]);return ye-=Be,Ee+=Be,Ie?(fe.push([(Oe+=Ve-1)-ye+1,1+ye]),ye+=1,Ee+=1,ke+=1,Re.slice(0,Ve)):Re}return De?(fe.push([Oe-ye+1,1+ye]),ye+=1,Ee+=1,ke+=1,De.charAt(0)):(fe.push([Oe-ye+1,ye-1]),ye-=1,Ee+=1,ke+=1," ")}),fe.push([Pe.length,ye]),[Pe,fe,Me]}function Q(re,ce,Se){if(!re)return[ce,Se];const Pe=ce,fe=ce+Se;let xe=(0,b.binarySearchFirstItem)(re,Ee=>Ee[0]>=Pe);re[xe][0]>Pe&&--xe;let ye=(0,b.binarySearchFirstItem)(re,Ee=>Ee[0]>=fe,xe);return re[ye][0]>fe&&--ye,[Pe+re[xe][1],Se+re[ye][1]-re[xe][1]]}var J=new WeakSet,te=new WeakSet,he=new WeakMap,oe=new WeakSet,R=new WeakSet,s=new WeakSet,e=new WeakSet,r=new WeakSet,o=new WeakSet,d=new WeakSet,p=new WeakSet,c=new WeakSet,L=new WeakSet,X=new WeakSet,B=new WeakSet,Y=new WeakSet,$=new WeakSet,Z=new WeakSet,ee=new WeakSet,ue=new WeakSet;function Ae(re){if(!re)return;const ce=this._pdfDocument,{type:Se}=re;(null===this._state||k(this,oe,we).call(this,re))&&(this._dirtyMatch=!0),this._state=re,"highlightallchange"!==Se&&k(this,ue,Te).call(this,S.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||ce&&this._pdfDocument!==ce)return;k(this,o,be).call(this);const Pe=!this._highlightMatches,fe=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),Se?this._dirtyMatch?k(this,c,K).call(this):"again"===Se?(k(this,c,K).call(this),Pe&&this._state.highlightAll&&k(this,p,T).call(this)):"highlightallchange"===Se?(fe?k(this,c,K).call(this):this._highlightMatches=!0,k(this,p,T).call(this)):k(this,c,K).call(this):this._findTimeout=setTimeout(()=>{k(this,c,K).call(this),this._findTimeout=null},250)})}function me(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,w.createPromiseCapability)()}function ae(){return this._state.query!==this._rawQuery&&(this._rawQuery=this._state.query,[this._normalizedQuery]=q(this._state.query)),this._normalizedQuery}function we(re){if(re.query!==this._state.query)return!0;switch(re.type){case"again":const ce=this._selected.pageIdx+1,Se=this._linkService;return ce>=1&&ce<=Se.pagesCount&&ce!==Se.page&&!Se.isPageVisible(ce);case"highlightallchange":return!1}return!0}function Ce(re,ce,Se){let Pe=re.slice(0,ce).match(_);if(Pe){const fe=re.charCodeAt(ce),xe=Pe[1].charCodeAt(0);if((0,A.getCharacterType)(fe)===(0,A.getCharacterType)(xe))return!1}if(Pe=re.slice(ce+Se).match(y),Pe){const fe=re.charCodeAt(ce+Se-1),xe=Pe[1].charCodeAt(0);if((0,A.getCharacterType)(fe)===(0,A.getCharacterType)(xe))return!1}return!0}function pe(re,ce,Se,Pe){const fe=[],xe=[],ye=this._pageDiffs[Se];let Ee;for(;null!==(Ee=re.exec(Pe));){if(ce&&!k(this,R,Ce).call(this,Pe,Ee.index,Ee[0].length))continue;const[ke,Me]=Q(ye,Ee.index,Ee[0].length);Me&&(fe.push(ke),xe.push(Me))}this._pageMatches[Se]=fe,this._pageMatchesLength[Se]=xe}function se(re,ce){const{matchDiacritics:Se}=this._state;let Pe=!1;return(re=re.replace(l,(xe,ye,Ee,ke,Me,Le)=>ye?`[ ]*\\${ye}[ ]*`:Ee?`[ ]*${Ee}[ ]*`:ke?"[ ]+":Se?Me||Le:Me?f.has(Me.charCodeAt(0))?Me:"":ce?(Pe=!0,`${Le}\\p{M}*`):Le)).endsWith("[ ]*")&&(re=re.slice(0,re.length-4)),Se&&ce&&(Pe=!0,re=`${re}(?=[${m}]|[^\\p{M}]|$)`),[Pe,re]}function de(re){let ce=E(this,he);if(0===ce.length)return;const{caseSensitive:Se,entireWord:Pe,phraseSearch:fe}=this._state,xe=this._pageContents[re],ye=this._hasDiacritics[re];let Ee=!1;if(fe)[Ee,ce]=k(this,e,se).call(this,ce,ye);else{const Le=ce.match(/\S+/g);Le&&(ce=Le.sort().reverse().map(Ne=>{const[Re,De]=k(this,e,se).call(this,Ne,ye);return Ee||=Re,`(${De})`}).join("|"))}ce=new RegExp(ce,`g${Ee?"u":""}${Se?"":"i"}`),k(this,s,pe).call(this,ce,Pe,re,xe),this._state.highlightAll&&k(this,d,ne).call(this,re),this._resumePageIdx===re&&(this._resumePageIdx=null,k(this,X,ge).call(this));const Me=this._pageMatches[re].length;Me>0&&(this._matchesCountTotal+=Me,k(this,ee,ve).call(this))}function be(){if(this._extractTextPromises.length>0)return;let re=Promise.resolve();for(let ce=0,Se=this._linkService.pagesCount;ce<Se;ce++){const Pe=(0,w.createPromiseCapability)();this._extractTextPromises[ce]=Pe.promise,re=re.then(()=>this._pdfDocument.getPage(ce+1).then(fe=>fe.getTextContent()).then(fe=>{const xe=[];for(const ye of fe.items)xe.push(ye.str),ye.hasEOL&&xe.push("\n");[this._pageContents[ce],this._pageDiffs[ce],this._hasDiacritics[ce]]=q(xe.join("")),Pe.resolve()},fe=>{console.error(`Unable to get text content for page ${ce+1}`,fe),this._pageContents[ce]="",this._pageDiffs[ce]=null,this._hasDiacritics[ce]=!1,Pe.resolve()}))}}function ne(re){this._scrollMatches&&this._selected.pageIdx===re&&(this._linkService.page=re+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:re})}function T(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}function K(){const re=this._state.findPrevious,ce=this._linkService.page-1,Se=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=ce,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,k(this,p,T).call(this);for(let fe=0;fe<Se;fe++)this._pendingFindMatches.has(fe)||(this._pendingFindMatches.add(fe),this._extractTextPromises[fe].then(()=>{this._pendingFindMatches.delete(fe),k(this,r,de).call(this,fe)}))}if(""===E(this,he))return void k(this,ue,Te).call(this,S.FOUND);if(this._resumePageIdx)return;const Pe=this._offset;if(this._pagesToSearch=Se,null!==Pe.matchIdx){if(!re&&Pe.matchIdx+1<this._pageMatches[Pe.pageIdx].length||re&&Pe.matchIdx>0)return Pe.matchIdx=re?Pe.matchIdx-1:Pe.matchIdx+1,void k(this,Y,D).call(this,!0);k(this,B,z).call(this,re)}k(this,X,ge).call(this)}function le(re){const ce=this._offset,Se=re.length,Pe=this._state.findPrevious;return Se?(ce.matchIdx=Pe?Se-1:0,k(this,Y,D).call(this,!0),!0):(k(this,B,z).call(this,Pe),!!(ce.wrapped&&(ce.matchIdx=null,this._pagesToSearch<0))&&(k(this,Y,D).call(this,!1),!0))}function ge(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let re=null;do{const ce=this._offset.pageIdx;if(re=this._pageMatches[ce],!re){this._resumePageIdx=ce;break}}while(!k(this,L,le).call(this,re))}function z(re){const ce=this._offset,Se=this._linkService.pagesCount;ce.pageIdx=re?ce.pageIdx-1:ce.pageIdx+1,ce.matchIdx=null,this._pagesToSearch--,(ce.pageIdx>=Se||ce.pageIdx<0)&&(ce.pageIdx=re?Se-1:0,ce.wrapped=!0)}function D(re=!1){let ce=S.NOT_FOUND;const Se=this._offset.wrapped;if(this._offset.wrapped=!1,re){const Pe=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,ce=Se?S.WRAPPED:S.FOUND,-1!==Pe&&Pe!==this._selected.pageIdx&&k(this,d,ne).call(this,Pe)}k(this,ue,Te).call(this,ce,this._state.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,k(this,d,ne).call(this,this._selected.pageIdx))}function V(re){const ce=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||ce&&this._pdfDocument!==ce||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),k(this,ue,Te).call(this,S.FOUND),this._highlightMatches=!1,k(this,p,T).call(this))})}function ie(){const{pageIdx:re,matchIdx:ce}=this._selected;let Se=0,Pe=this._matchesCountTotal;if(-1!==ce){for(let fe=0;fe<re;fe++)Se+=this._pageMatches[fe]?.length||0;Se+=ce+1}return(Se<1||Se>Pe)&&(Se=Pe=0),{current:Se,total:Pe}}function ve(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:k(this,Z,ie).call(this)})}function Te(re,ce=!1){this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:re,previous:ce,matchesCount:k(this,Z,ie).call(this),rawQuery:this._state?.query??null})}g.PDFFindController=class _e{constructor({linkService:ce,eventBus:Se}){O(this,ue),O(this,ee),O(this,Z),O(this,$),O(this,Y),O(this,B),O(this,X),O(this,L),O(this,c),O(this,p),O(this,d),O(this,o),O(this,r),O(this,e),O(this,s),O(this,R),O(this,oe),F(this,he,{get:ae,set:void 0}),O(this,te),O(this,J),this._linkService=ce,this._eventBus=Se,k(this,te,me).call(this),Se._on("find",k(this,J,Ae).bind(this)),Se._on("findbarclose",k(this,$,V).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(ce){this._pdfDocument&&k(this,te,me).call(this),ce&&(this._pdfDocument=ce,this._firstPageCapability.resolve())}scrollMatchIntoView({element:ce=null,selectedLeft:Se=0,pageIndex:Pe=-1,matchIndex:fe=-1}){this._scrollMatches&&ce&&-1!==fe&&fe===this._selected.matchIdx&&-1!==Pe&&Pe===this._selected.pageIdx&&(this._scrollMatches=!1,(0,b.scrollIntoView)(ce,{top:-50,left:Se+-400},!0))}}},(W,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.CharacterType=void 0,g.getCharacterType=function h(l){return function b(l){return l<11904}(l)?function w(l){return 0==(65408&l)}(l)?function n(l){return 32===l||9===l||13===l||10===l}(l)?x.SPACE:function A(l){return l>=97&&l<=122||l>=65&&l<=90}(l)||function S(l){return l>=48&&l<=57}(l)||95===l?x.ALPHA_LETTER:x.PUNCT:function m(l){return 3584==(65408&l)}(l)?x.THAI_LETTER:160===l?x.SPACE:x.ALPHA_LETTER:function i(l){return l>=13312&&l<=40959||l>=63744&&l<=64255}(l)?x.HAN_LETTER:function u(l){return l>=12448&&l<=12543}(l)?x.KATAKANA_LETTER:function P(l){return l>=12352&&l<=12447}(l)?x.HIRAGANA_LETTER:function f(l){return l>=65376&&l<=65439}(l)?x.HALFWIDTH_KATAKANA_LETTER:x.ALPHA_LETTER};const x={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};g.CharacterType=x},(W,g,x)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFHistory=void 0,g.isDestArraysEqual=f,g.isDestHashesEqual=P;var b=x(6),w=x(17);function i(){return document.location.hash}function P(m,h){return"string"==typeof m&&"string"==typeof h&&(m===h||(0,b.parseQueryString)(m).get("nameddest")===h)}function f(m,h){function l(_,y){if(typeof _!=typeof y||Array.isArray(_)||Array.isArray(y))return!1;if(null!==_&&"object"==typeof _&&null!==y){if(Object.keys(_).length!==Object.keys(y).length)return!1;for(const M in _)if(!l(_[M],y[M]))return!1;return!0}return _===y||Number.isNaN(_)&&Number.isNaN(y)}if(!Array.isArray(m)||!Array.isArray(h)||m.length!==h.length)return!1;for(let _=0,y=m.length;_<y;_++)if(!l(m[_],h[_]))return!1;return!0}g.PDFHistory=class u{constructor({linkService:h,eventBus:l}){this.linkService=h,this.eventBus=l,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",_=>{this._isPagesLoaded=!!_.pagesCount},{once:!0})})}initialize({fingerprint:h,resetHistory:l=!1,updateUrl:_=!1}){if(!h||"string"!=typeof h)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const y=""!==this._fingerprint&&this._fingerprint!==h;this._fingerprint=h,this._updateUrl=!0===_,this._initialized=!0,this._bindEvents();const M=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=i(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(M,!0)||l){const{hash:Q,page:J,rotation:te}=this._parseCurrentHash(!0);return!Q||y||l?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:Q,page:J,rotation:te},!0)}const q=M.destination;this._updateInternalState(q,M.uid,!0),void 0!==q.rotation&&(this._initialRotation=q.rotation),q.dest?(this._initialBookmark=JSON.stringify(q.dest),this._destination.page=null):q.hash?this._initialBookmark=q.hash:q.page&&(this._initialBookmark=`page=${q.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:h=null,explicitDest:l,pageNumber:_}){if(!this._initialized)return;if(h&&"string"!=typeof h)return void console.error(`PDFHistory.push: "${h}" is not a valid namedDest parameter.`);if(!Array.isArray(l))return void console.error(`PDFHistory.push: "${l}" is not a valid explicitDest parameter.`);if(!this._isValidPage(_)&&(null!==_||this._destination))return void console.error(`PDFHistory.push: "${_}" is not a valid pageNumber parameter.`);const y=h||JSON.stringify(l);if(!y)return;let M=!1;if(this._destination&&(P(this._destination.hash,y)||f(this._destination.dest,l))){if(this._destination.page)return;M=!0}this._popStateInProgress&&!M||(this._pushOrReplaceState({dest:l,hash:y,page:_,rotation:this.linkService.rotation},M),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(h){if(this._initialized){if(!this._isValidPage(h))return void console.error(`PDFHistory.pushPage: "${h}" is not a valid page number.`);this._destination?.page!==h&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${h}`,page:h,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const h=window.history.state;this._isValidState(h)&&h.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const h=window.history.state;this._isValidState(h)&&h.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(h,l=!1){const _=l||!this._destination,y={fingerprint:this._fingerprint,uid:_?this._uid:this._uid+1,destination:h};let M;if(this._updateInternalState(h,y.uid),this._updateUrl&&h?.hash){const q=document.location.href.split("#")[0];q.startsWith("file://")||(M=`${q}#${h.hash}`)}_?window.history.replaceState(y,"",M):window.history.pushState(y,"",M)}_tryPushCurrentPosition(h=!1){if(!this._position)return;let l=this._position;if(h&&(l=Object.assign(Object.create(null),this._position),l.temporary=!0),!this._destination)return void this._pushOrReplaceState(l);if(this._destination.temporary)return void this._pushOrReplaceState(l,!0);if(this._destination.hash===l.hash||!this._destination.page&&this._numPositionUpdates<=50)return;let _=!1;if(this._destination.page>=l.first&&this._destination.page<=l.page){if(void 0!==this._destination.dest||!this._destination.first)return;_=!0}this._pushOrReplaceState(l,_)}_isValidPage(h){return Number.isInteger(h)&&h>0&&h<=this.linkService.pagesCount}_isValidState(h,l=!1){if(!h)return!1;if(h.fingerprint!==this._fingerprint){if(!l)return!1;{if("string"!=typeof h.fingerprint||h.fingerprint.length!==this._fingerprint.length)return!1;const[_]=performance.getEntriesByType("navigation");if("reload"!==_?.type)return!1}}return!(!Number.isInteger(h.uid)||h.uid<0||null===h.destination||"object"!=typeof h.destination)}_updateInternalState(h,l,_=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),_&&h?.temporary&&delete h.temporary,this._destination=h,this._uid=l,this._maxUid=Math.max(this._maxUid,l),this._numPositionUpdates=0}_parseCurrentHash(h=!1){const l=unescape(i()).substring(1),_=(0,b.parseQueryString)(l),y=_.get("nameddest")||"";let M=0|_.get("page");return(!this._isValidPage(M)||h&&y.length>0)&&(M=null),{hash:l,page:M,rotation:this.linkService.rotation}}_updateViewarea({location:h}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:h.pdfOpenParams.substring(1),page:this.linkService.page,first:h.pageNumber,rotation:h.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},1e3))}_popState({state:h}){const l=i(),_=this._currentHash!==l;if(this._currentHash=l,!h){this._uid++;const{hash:M,page:q,rotation:Q}=this._parseCurrentHash();return void this._pushOrReplaceState({hash:M,page:q,rotation:Q},!0)}if(!this._isValidState(h))return;this._popStateInProgress=!0,_&&(this._blockHashChange++,(0,w.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then(()=>{this._blockHashChange--}));const y=h.destination;this._updateInternalState(y,h.uid,!0),(0,b.isValidRotation)(y.rotation)&&(this.linkService.rotation=y.rotation),y.dest?this.linkService.goToDestination(y.dest):y.hash?this.linkService.setHash(y.hash):y.page&&(this.linkService.page=y.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}},(W,g,x)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFScriptingManager=void 0;var b=x(6),w=x(3);g.PDFScriptingManager=class A{constructor({eventBus:n,sandboxBundleSrc:i=null,scriptingFactory:u=null,docPropertiesLookup:P=null}){this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._mouseState=Object.create(null),this._ready=!1,this._eventBus=n,this._sandboxBundleSrc=i,this._scriptingFactory=u,this._docPropertiesLookup=P,this._scriptingFactory||window.addEventListener("updatefromsandbox",f=>{this._eventBus.dispatch("updatefromsandbox",{source:window,detail:f.detail})})}setViewer(n){this._pdfViewer=n}setDocument(n){var i=this;return v(function*(){if(i._pdfDocument&&(yield i._destroyScripting()),i._pdfDocument=n,!n)return;const[u,P,f]=yield Promise.all([n.getFieldObjects(),n.getCalculationOrderIds(),n.getJSActions()]);if(u||f){if(n===i._pdfDocument){try{i._scripting=i._createScripting()}catch(m){return console.error(`PDFScriptingManager.setDocument: "${m?.message}".`),void(yield i._destroyScripting())}i._internalEvents.set("updatefromsandbox",m=>{m?.source===window&&i._updateFromSandbox(m.detail)}),i._internalEvents.set("dispatcheventinsandbox",m=>{i._scripting?.dispatchEventInSandbox(m.detail)}),i._internalEvents.set("pagechanging",({pageNumber:m,previous:h})=>{m!==h&&(i._dispatchPageClose(h),i._dispatchPageOpen(m))}),i._internalEvents.set("pagerendered",({pageNumber:m})=>{i._pageOpenPending.has(m)&&m===i._pdfViewer.currentPageNumber&&i._dispatchPageOpen(m)}),i._internalEvents.set("pagesdestroy",function(){var m=v(function*(h){yield i._dispatchPageClose(i._pdfViewer.currentPageNumber),yield i._scripting?.dispatchEventInSandbox({id:"doc",name:"WillClose"}),i._closeCapability?.resolve()});return function(h){return m.apply(this,arguments)}}()),i._domEvents.set("mousedown",m=>{i._mouseState.isDown=!0}),i._domEvents.set("mouseup",m=>{i._mouseState.isDown=!1});for(const[m,h]of i._internalEvents)i._eventBus._on(m,h);for(const[m,h]of i._domEvents)window.addEventListener(m,h,!0);try{const m=yield i._getDocProperties();if(n!==i._pdfDocument)return;yield i._scripting.createSandbox({objects:u,calculationOrder:P,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...m,actions:f}}),i._eventBus.dispatch("sandboxcreated",{source:i})}catch(m){return console.error(`PDFScriptingManager.setDocument: "${m?.message}".`),void(yield i._destroyScripting())}yield i._scripting?.dispatchEventInSandbox({id:"doc",name:"Open"}),yield i._dispatchPageOpen(i._pdfViewer.currentPageNumber,!0),Promise.resolve().then(()=>{n===i._pdfDocument&&(i._ready=!0)})}}else yield i._destroyScripting()})()}dispatchWillSave(n){var i=this;return v(function*(){return i._scripting?.dispatchEventInSandbox({id:"doc",name:"WillSave"})})()}dispatchDidSave(n){var i=this;return v(function*(){return i._scripting?.dispatchEventInSandbox({id:"doc",name:"DidSave"})})()}dispatchWillPrint(n){var i=this;return v(function*(){return i._scripting?.dispatchEventInSandbox({id:"doc",name:"WillPrint"})})()}dispatchDidPrint(n){var i=this;return v(function*(){return i._scripting?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})()}get mouseState(){return this._mouseState}get destroyPromise(){return this._destroyCapability?.promise||null}get ready(){return this._ready}get _internalEvents(){return(0,w.shadow)(this,"_internalEvents",new Map)}get _domEvents(){return(0,w.shadow)(this,"_domEvents",new Map)}get _pageOpenPending(){return(0,w.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,w.shadow)(this,"_visitedPages",new Map)}_updateFromSandbox(n){var i=this;return v(function*(){const u=i._pdfViewer.isInPresentationMode||i._pdfViewer.isChangingPresentationMode,{id:P,siblings:f,command:m,value:h}=n;if(!P){switch(m){case"clear":console.clear();break;case"error":console.error(h);break;case"layout":if(u)return;const _=(0,b.apiPageLayoutToViewerModes)(h);i._pdfViewer.spreadMode=_.spreadMode;break;case"page-num":i._pdfViewer.currentPageNumber=h+1;break;case"print":yield i._pdfViewer.pagesPromise,i._eventBus.dispatch("print",{source:i});break;case"println":console.log(h);break;case"zoom":if(u)return;i._pdfViewer.currentScaleValue=h;break;case"SaveAs":i._eventBus.dispatch("save",{source:i});break;case"FirstPage":i._pdfViewer.currentPageNumber=1;break;case"LastPage":i._pdfViewer.currentPageNumber=i._pdfViewer.pagesCount;break;case"NextPage":i._pdfViewer.nextPage();break;case"PrevPage":i._pdfViewer.previousPage();break;case"ZoomViewIn":if(u)return;i._pdfViewer.increaseScale();break;case"ZoomViewOut":if(u)return;i._pdfViewer.decreaseScale()}return}if(u&&n.focus)return;delete n.id,delete n.siblings;const l=f?[P,...f]:[P];for(const _ of l){const y=document.getElementById(_);y?y.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:n})):i._pdfDocument?.annotationStorage.setValue(_,n)}})()}_dispatchPageOpen(n,i=!1){var u=this;return v(function*(){const P=u._pdfDocument,f=u._visitedPages;if(i&&(u._closeCapability=(0,w.createPromiseCapability)()),!u._closeCapability)return;const m=u._pdfViewer.getPageView(n-1);if(m?.renderingState!==b.RenderingStates.FINISHED)return void u._pageOpenPending.add(n);u._pageOpenPending.delete(n);const h=v(function*(){const l=yield f.has(n)?null:m.pdfPage?.getJSActions();P===u._pdfDocument&&(yield u._scripting?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:n,actions:l}))})();f.set(n,h)})()}_dispatchPageClose(n){var i=this;return v(function*(){const u=i._pdfDocument,P=i._visitedPages;if(!i._closeCapability||i._pageOpenPending.has(n))return;const f=P.get(n);f&&(P.set(n,null),yield f,u===i._pdfDocument&&(yield i._scripting?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:n})))})()}_getDocProperties(){var n=this;return v(function*(){if(n._docPropertiesLookup)return n._docPropertiesLookup(n._pdfDocument);const{docPropertiesLookup:i}=x(24);return i(n._pdfDocument)})()}_createScripting(){if(this._destroyCapability=(0,w.createPromiseCapability)(),this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});const{GenericScripting:n}=x(24);return new n(this._sandboxBundleSrc)}_destroyScripting(){var n=this;return v(function*(){if(!n._scripting)return n._pdfDocument=null,void n._destroyCapability?.resolve();n._closeCapability&&(yield Promise.race([n._closeCapability.promise,new Promise(i=>{setTimeout(i,1e3)})]).catch(i=>{}),n._closeCapability=null),n._pdfDocument=null;try{yield n._scripting.destroySandbox()}catch{}for(const[i,u]of n._internalEvents)n._eventBus._off(i,u);n._internalEvents.clear();for(const[i,u]of n._domEvents)window.removeEventListener(i,u,!0);n._domEvents.clear(),n._pageOpenPending.clear(),n._visitedPages.clear(),n._scripting=null,delete n._mouseState.isDown,n._ready=!1,n._destroyCapability?.resolve()})()}}},(W,g,x)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.GenericScripting=void 0,g.docPropertiesLookup=function w(n){return A.apply(this,arguments)};var b=x(3);function A(){return(A=v(function*(n){const u="".split("#")[0];let{info:P,metadata:f,contentDispositionFilename:m,contentLength:h}=yield n.getMetadata();if(!h){const{length:l}=yield n.getDownloadInfo();h=l}return{...P,baseURL:u,filesize:h,filename:m||(0,b.getPdfFilenameFromUrl)(""),metadata:f?.getRaw(),authors:f?.get("dc:creator"),numPages:n.numPages,URL:""}})).apply(this,arguments)}g.GenericScripting=class S{constructor(i){this._ready=(0,b.loadScript)(i,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}createSandbox(i){var u=this;return v(function*(){(yield u._ready).create(i)})()}dispatchEventInSandbox(i){var u=this;return v(function*(){const P=yield u._ready;setTimeout(()=>P.dispatchEvent(i),0)})()}destroySandbox(){var i=this;return v(function*(){(yield i._ready).nukeSandbox()})()}}}],U={};function G(W){var g=U[W];if(void 0!==g)return g.exports;var x=U[W]={exports:{}};return I[W](x,x.exports,G),x.exports}var N={};return(()=>{var W=N;Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return A.AnnotationLayerBuilder}}),Object.defineProperty(W,"DefaultAnnotationLayerFactory",{enumerable:!0,get:function(){return g.DefaultAnnotationLayerFactory}}),Object.defineProperty(W,"DefaultStructTreeLayerFactory",{enumerable:!0,get:function(){return g.DefaultStructTreeLayerFactory}}),Object.defineProperty(W,"DefaultTextLayerFactory",{enumerable:!0,get:function(){return g.DefaultTextLayerFactory}}),Object.defineProperty(W,"DefaultXfaLayerFactory",{enumerable:!0,get:function(){return g.DefaultXfaLayerFactory}}),Object.defineProperty(W,"DownloadManager",{enumerable:!0,get:function(){return S.DownloadManager}}),Object.defineProperty(W,"EventBus",{enumerable:!0,get:function(){return n.EventBus}}),Object.defineProperty(W,"GenericL10n",{enumerable:!0,get:function(){return i.GenericL10n}}),Object.defineProperty(W,"LinkTarget",{enumerable:!0,get:function(){return x.LinkTarget}}),Object.defineProperty(W,"NullL10n",{enumerable:!0,get:function(){return u.NullL10n}}),Object.defineProperty(W,"PDFFindController",{enumerable:!0,get:function(){return P.PDFFindController}}),Object.defineProperty(W,"PDFHistory",{enumerable:!0,get:function(){return f.PDFHistory}}),Object.defineProperty(W,"PDFLinkService",{enumerable:!0,get:function(){return x.PDFLinkService}}),Object.defineProperty(W,"PDFPageView",{enumerable:!0,get:function(){return m.PDFPageView}}),Object.defineProperty(W,"PDFScriptingManager",{enumerable:!0,get:function(){return h.PDFScriptingManager}}),Object.defineProperty(W,"PDFSinglePageViewer",{enumerable:!0,get:function(){return w.PDFSinglePageViewer}}),Object.defineProperty(W,"PDFViewer",{enumerable:!0,get:function(){return w.PDFViewer}}),Object.defineProperty(W,"ProgressBar",{enumerable:!0,get:function(){return b.ProgressBar}}),Object.defineProperty(W,"SimpleLinkService",{enumerable:!0,get:function(){return x.SimpleLinkService}}),Object.defineProperty(W,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return l.StructTreeLayerBuilder}}),Object.defineProperty(W,"TextLayerBuilder",{enumerable:!0,get:function(){return _.TextLayerBuilder}}),Object.defineProperty(W,"XfaLayerBuilder",{enumerable:!0,get:function(){return y.XfaLayerBuilder}}),Object.defineProperty(W,"parseQueryString",{enumerable:!0,get:function(){return b.parseQueryString}});var g=G(1),x=G(5),b=G(6),w=G(10),A=G(2),S=G(16),n=G(17),i=G(18),u=G(4),P=G(20),f=G(22),m=G(12),h=G(23),l=G(7),_=G(8),y=G(9)})(),N})(),j.exports=G()},837:()=>{},2339:()=>{},4828:()=>{},7915:()=>{},5598:()=>{},372:()=>{},7156:j=>{function a(t,O,F,H,k,E,v){try{var I=t[E](v),U=I.value}catch(G){return void F(G)}I.done?O(U):Promise.resolve(U).then(H,k)}j.exports=function C(t){return function(){var O=this,F=arguments;return new Promise(function(H,k){var E=t.apply(O,F);function v(U){a(E,H,k,v,I,"next",U)}function I(U){a(E,H,k,v,I,"throw",U)}v(void 0)})}},j.exports.__esModule=!0,j.exports.default=j.exports},6521:j=>{j.exports=function a(C,t){if(t.has(C))throw new TypeError("Cannot initialize the same private elements twice on an object")},j.exports.__esModule=!0,j.exports.default=j.exports},8912:j=>{j.exports=function a(C,t){return t.get?t.get.call(C):t.value},j.exports.__esModule=!0,j.exports.default=j.exports},3448:j=>{j.exports=function a(C,t,O){if(t.set)t.set.call(C,O);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=O}},j.exports.__esModule=!0,j.exports.default=j.exports},2625:j=>{j.exports=function a(C,t){if(C!==t)throw new TypeError("Private static access of wrong provenance")},j.exports.__esModule=!0,j.exports.default=j.exports},2506:j=>{j.exports=function a(C,t){if(void 0===C)throw new TypeError("attempted to "+t+" private static field before its declaration")},j.exports.__esModule=!0,j.exports.default=j.exports},4069:j=>{j.exports=function a(C,t,O){if(!t.has(C))throw new TypeError("attempted to "+O+" private field on non-instance");return t.get(C)},j.exports.__esModule=!0,j.exports.default=j.exports},468:(j,a,C)=>{var t=C(8912),O=C(4069);j.exports=function F(H,k){var E=O(H,k,"get");return t(H,E)},j.exports.__esModule=!0,j.exports.default=j.exports},9159:(j,a,C)=>{var t=C(6521);j.exports=function O(F,H,k){t(F,H),H.set(F,k)},j.exports.__esModule=!0,j.exports.default=j.exports},5661:(j,a,C)=>{var t=C(3448),O=C(4069);j.exports=function F(H,k,E){var v=O(H,k,"set");return t(H,v,E),E},j.exports.__esModule=!0,j.exports.default=j.exports},4467:j=>{j.exports=function a(C,t,O){if(!t.has(C))throw new TypeError("attempted to get private field on non-instance");return O},j.exports.__esModule=!0,j.exports.default=j.exports},1860:(j,a,C)=>{var t=C(6521);j.exports=function O(F,H){t(F,H),H.add(F)},j.exports.__esModule=!0,j.exports.default=j.exports},1280:(j,a,C)=>{var t=C(8912),O=C(2625),F=C(2506);j.exports=function H(k,E,v){return O(k,E),F(v,"get"),t(k,v)},j.exports.__esModule=!0,j.exports.default=j.exports},9382:(j,a,C)=>{var t=C(3448),O=C(2625),F=C(2506);j.exports=function H(k,E,v,I){return O(k,E),F(v,"set"),t(k,v,I),I},j.exports.__esModule=!0,j.exports.default=j.exports},5764:(j,a,C)=>{var t=C(2625);j.exports=function O(F,H,k){return t(F,H),k},j.exports.__esModule=!0,j.exports.default=j.exports},8416:(j,a,C)=>{var t=C(4062);j.exports=function O(F,H,k){return(H=t(H))in F?Object.defineProperty(F,H,{value:k,enumerable:!0,configurable:!0,writable:!0}):F[H]=k,F},j.exports.__esModule=!0,j.exports.default=j.exports},5036:(j,a,C)=>{var t=C(8698).default;j.exports=function O(F,H){if("object"!==t(F)||null===F)return F;var k=F[Symbol.toPrimitive];if(void 0!==k){var E=k.call(F,H||"default");if("object"!==t(E))return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===H?String:Number)(F)},j.exports.__esModule=!0,j.exports.default=j.exports},4062:(j,a,C)=>{var t=C(8698).default,O=C(5036);j.exports=function F(H){var k=O(H,"string");return"symbol"===t(k)?k:String(k)},j.exports.__esModule=!0,j.exports.default=j.exports},8698:j=>{function a(C){return j.exports=a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j.exports.__esModule=!0,j.exports.default=j.exports,a(C)}j.exports=a,j.exports.__esModule=!0,j.exports.default=j.exports}}]);